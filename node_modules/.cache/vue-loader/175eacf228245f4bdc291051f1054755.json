{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/shelf/shelfGroupDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/shelf/shelfGroupDialog.vue","mtime":1541580605000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  props: {\n    visible: Boolean,\n    data: Array,\n    bookList: Array,\n    isInGroup: Boolean,\n    category: Object,\n    isEditGroupName: {\n      type: Boolean,\n      default: false\n    }\n  },\n  computed: {\n    defaultCategory() {\n      return [\n        {\n          title: this.$t('shelf.newGroup'),\n          edit: 1\n        },\n        {\n          title: this.$t('shelf.groupOut'),\n          edit: 2\n        }\n      ]\n    },\n    categoryList() {\n      const list = this.bookList ? this.bookList.filter(item => item.type === 2) : []\n      return [...this.defaultCategory, ...list]\n    }\n  },\n  data() {\n    return {\n      newGroupDialogVisible: false,\n      selectGroupDialogVisible: true,\n      newGroupName: ''\n    }\n  },\n  methods: {\n    createNewGroup() {\n      if (this.isEditGroupName) {\n        this.$emit('editGroupName', this.category, this.newGroupName)\n        this.hide()\n      } else {\n        if (this.newGroupName.length > 0) {\n          this.$emit('group', 2, {\n            id: this.bookList[this.bookList.length - 2].id + 1,\n            itemList: [],\n            selected: false,\n            title: this.newGroupName,\n            type: 2\n          })\n        }\n        this.hide()\n      }\n    },\n    clear() {\n      this.newGroupName = ''\n    },\n    onGroupClick(item) {\n      if (item.edit && item.edit === 1) {\n        // 新建分组\n        this.showCreateGroupDialog()\n      } else if (item.edit && item.edit === 2) {\n        // 移出分组\n        this.$emit('group', 3, item)\n        this.hide()\n      } else {\n        // 移入分组\n        this.$emit('group', 1, item)\n        this.hide()\n      }\n    },\n    showCreateGroupDialog() {\n      this.newGroupDialogVisible = true\n      this.selectGroupDialogVisible = false\n      this.newGroupName = ''\n      this.$nextTick(() => {\n        this.$refs.dialogInput.focus()\n      })\n    },\n    showEditGroupDialog() {\n      this.newGroupDialogVisible = true\n      this.selectGroupDialogVisible = false\n      this.newGroupName = this.category.title\n      this.$nextTick(() => {\n        this.$refs.dialogInput.focus()\n      })\n    },\n    show() {\n      this.$emit('update:visible', true)\n    },\n    hide() {\n      this.$emit('update:visible', false)\n      this.newGroupDialogVisible = false\n      this.selectGroupDialogVisible = true\n    }\n  }\n}\n",{"version":3,"sources":["shelfGroupDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"shelfGroupDialog.vue","sourceRoot":"src/components/shelf","sourcesContent":["<template>\n  <transition name=\"fade\">\n    <div class=\"shelf-group-dialog-bg\" v-if=\"visible\">\n      <div class=\"shelf-group-dialog-wrapper\" v-if=\"selectGroupDialogVisible\">\n        <div class=\"dialog-list\">\n          <div class=\"dialog-title-wrapper\">\n            <span class=\"dialog-title-text\">{{$t('shelf.moveBook')}}</span>\n          </div>\n          <div class=\"dialog-list-wrapper\">\n            <div class=\"dialog-list-item\" :class=\"{'is-add': item.edit ? item.edit === 1 : false}\" v-for=\"(item, index) in categoryList\" :key=\"index\" @click=\"onGroupClick(item)\" v-if=\"(item.edit === 2 && isInGroup) || item.edit !== 2 || !item.edit\">\n              <div class=\"dialog-list-item-text\">{{item.title}}</div>\n              <div class=\"dialog-list-icon-wrapper\" v-if=\"category && item.id ? category.id === item.id : false\">\n                <span class=\"icon-check\"></span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"dialog-btn-wrapper\" @click=\"hide\">\n          <div class=\"dialog-btn\">{{$t('shelf.cancel')}}</div>\n        </div>\n      </div>\n      <div class=\"shelf-group-dialog-wrapper\" v-if=\"newGroupDialogVisible\">\n        <div class=\"dialog-list\">\n          <div class=\"dialog-title-wrapper\">\n            <span class=\"dialog-title-text\">{{$t('shelf.newGroup')}}</span>\n          </div>\n          <div class=\"dialog-input-title-wrapper\">\n            <span class=\"dialog-input-title\">{{$t('shelf.groupName')}}</span>\n          </div>\n          <div class=\"dialog-input-wrapper\">\n            <div class=\"dialog-input-inner-wrapper\">\n              <input type=\"text\" class=\"dialog-input\" v-model=\"newGroupName\" ref=\"dialogInput\">\n              <div class=\"dialog-input-clear-wrapper\" @click=\"clear\" v-show=\"newGroupName.length > 0\">\n                <span class=\"icon-close-circle-fill\"></span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"dialog-btn-wrapper\">\n          <div class=\"dialog-btn\" @click=\"hide\">{{$t('shelf.cancel')}}</div>\n          <div class=\"dialog-btn\" @click=\"createNewGroup\" :class=\"{'is-empty': newGroupName.length === 0}\">{{$t('shelf.confirm')}}</div>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\n  export default {\n    props: {\n      visible: Boolean,\n      data: Array,\n      bookList: Array,\n      isInGroup: Boolean,\n      category: Object,\n      isEditGroupName: {\n        type: Boolean,\n        default: false\n      }\n    },\n    computed: {\n      defaultCategory() {\n        return [\n          {\n            title: this.$t('shelf.newGroup'),\n            edit: 1\n          },\n          {\n            title: this.$t('shelf.groupOut'),\n            edit: 2\n          }\n        ]\n      },\n      categoryList() {\n        const list = this.bookList ? this.bookList.filter(item => item.type === 2) : []\n        return [...this.defaultCategory, ...list]\n      }\n    },\n    data() {\n      return {\n        newGroupDialogVisible: false,\n        selectGroupDialogVisible: true,\n        newGroupName: ''\n      }\n    },\n    methods: {\n      createNewGroup() {\n        if (this.isEditGroupName) {\n          this.$emit('editGroupName', this.category, this.newGroupName)\n          this.hide()\n        } else {\n          if (this.newGroupName.length > 0) {\n            this.$emit('group', 2, {\n              id: this.bookList[this.bookList.length - 2].id + 1,\n              itemList: [],\n              selected: false,\n              title: this.newGroupName,\n              type: 2\n            })\n          }\n          this.hide()\n        }\n      },\n      clear() {\n        this.newGroupName = ''\n      },\n      onGroupClick(item) {\n        if (item.edit && item.edit === 1) {\n          // 新建分组\n          this.showCreateGroupDialog()\n        } else if (item.edit && item.edit === 2) {\n          // 移出分组\n          this.$emit('group', 3, item)\n          this.hide()\n        } else {\n          // 移入分组\n          this.$emit('group', 1, item)\n          this.hide()\n        }\n      },\n      showCreateGroupDialog() {\n        this.newGroupDialogVisible = true\n        this.selectGroupDialogVisible = false\n        this.newGroupName = ''\n        this.$nextTick(() => {\n          this.$refs.dialogInput.focus()\n        })\n      },\n      showEditGroupDialog() {\n        this.newGroupDialogVisible = true\n        this.selectGroupDialogVisible = false\n        this.newGroupName = this.category.title\n        this.$nextTick(() => {\n          this.$refs.dialogInput.focus()\n        })\n      },\n      show() {\n        this.$emit('update:visible', true)\n      },\n      hide() {\n        this.$emit('update:visible', false)\n        this.newGroupDialogVisible = false\n        this.selectGroupDialogVisible = true\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n  @import \"../../assets/styles/global\";\n\n  .shelf-group-dialog-bg {\n    position: fixed;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    z-index: 120;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, .2);\n    font-size: px2rem(16);\n    color: #333;\n    @include center;\n    .shelf-group-dialog-wrapper {\n      position: relative;\n      display: flex;\n      flex-direction: column;\n      width: 60%;\n      max-height: 80%;\n      background: white;\n      border-radius: px2rem(10);\n      .dialog-list {\n        width: 100%;\n        padding: 0 px2rem(20);\n        box-sizing: border-box;\n        @include scroll;\n        .dialog-title-wrapper {\n          font-size: px2rem(22);\n          font-weight: bold;\n          text-align: center;\n          padding: px2rem(30) 0 px2rem(20) 0;\n        }\n        .dialog-list-wrapper {\n          font-size: px2rem(14);\n          .dialog-list-item {\n            display: flex;\n            padding: px2rem(15) 0;\n            box-sizing: border-box;\n            color: #666;\n            &.is-add {\n              color: $color-blue;\n              &:active {\n                color: $color-blue-transparent;\n              }\n            }\n            &:active {\n              color: rgba(102, 102, 102, .5)\n            }\n            .dialog-list-item-text {\n              flex: 1;\n            }\n            .dialog-list-icon-wrapper {\n              flex: 0 0 px2rem(30);\n              color: $color-blue;\n              @include right;\n            }\n          }\n        }\n      }\n      .dialog-btn-wrapper {\n        display: flex;\n        width: 100%;\n        background: $color-blue;\n        font-size: px2rem(14);\n        font-weight: bold;\n        color: white;\n        text-align: center;\n        padding: px2rem(15) 0;\n        box-sizing: border-box;\n        border-radius: 0 0 px2rem(10) px2rem(10);\n        .dialog-btn {\n          flex: 1;\n          &.is-empty {\n            color: rgba(255, 255, 255, .5);\n          }\n          &:active {\n            color: rgba(255, 255, 255, .5)\n          }\n        }\n      }\n      .dialog-input-title-wrapper {\n        font-size: px2rem(10);\n        margin-top: px2rem(20);\n      }\n      .dialog-input-wrapper {\n        width: 100%;\n        padding: 0 0 px2rem(30) 0;\n        box-sizing: border-box;\n        .dialog-input-inner-wrapper {\n          display: flex;\n          width: 100%;\n          padding: px2rem(10) 0;\n          box-sizing: border-box;\n          border-bottom: px2rem(1) solid #eee;\n          font-size: px2rem(14);\n          color: #666;\n          .dialog-input {\n            flex: 1;\n            border: none;\n            &:focus {\n              outline: none;\n            }\n          }\n          .dialog-input-clear-wrapper {\n            flex: 0 0 px2rem(30);\n            color: #ccc;\n            @include center;\n            &:active {\n              color: #999;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n"]}]}