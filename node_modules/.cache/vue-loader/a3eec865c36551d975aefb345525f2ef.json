{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/src/views/store/StoreList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/src/views/store/StoreList.vue","mtime":1589128627616},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEZXRhaWxUaXRsZSBmcm9tICcuLi8uLi9jb21wb25lbnRzL2RldGFpbC9EZXRhaVRpdGxlJwppbXBvcnQgU2Nyb2xsIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvY29tbW9uL3Njcm9sbCcKaW1wb3J0IEZlYXR1cmVkIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvaG9tZS9GZWF0dXJlZCcKaW1wb3J0IHsgcmVhbFB4IH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnCmltcG9ydCB7IGxpc3QgfSBmcm9tICcuLi8uLi9hcGkvc3RvcmUnCmltcG9ydCB7IGNhdGVnb3J5TGlzdCwgY2F0ZWdvcnlUZXh0IH0gZnJvbSAnLi4vLi4vdXRpbHMvc3RvcmUnCgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgRGV0YWlsVGl0bGUsCiAgICBTY3JvbGwsCiAgICBGZWF0dXJlZAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRpdGxlICgpIHsKICAgICAgaWYgKHRoaXMubGlzdCkgewogICAgICAgIHJldHVybiB0aGlzLnRvdGFsICYmIHRoaXMuJHQoJ2hvbWUuYWxsQm9vaycpLnJlcGxhY2UoJyQxJywgdGhpcy50b3RhbE51bWJlcikKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbAogICAgICB9CiAgICB9LAogICAgdG90YWxOdW1iZXIgKCkgewogICAgICBsZXQgbnVtID0gMAogICAgICBPYmplY3Qua2V5cyh0aGlzLmxpc3QpLmZvckVhY2goa2V5ID0+IHsKICAgICAgICBudW0gKz0gdGhpcy5saXN0W2tleV0ubGVuZ3RoCiAgICAgIH0pCiAgICAgIHJldHVybiBudW0KICAgIH0KICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogbnVsbCwKICAgICAgdG90YWw6IG51bGwKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldENhdGVnb3J5VGV4dCAoa2V5KSB7CiAgICAgIHJldHVybiBgJHtjYXRlZ29yeVRleHQoY2F0ZWdvcnlMaXN0W2tleV0sIHRoaXMpfSgke3RoaXMubGlzdFtrZXldLmxlbmd0aH0pYAogICAgfSwKICAgIGJhY2sgKCkgewogICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpCiAgICB9LAogICAgb25TY3JvbGwgKG9mZnNldFkpIHsKICAgICAgaWYgKG9mZnNldFkgPiByZWFsUHgoNDIpKSB7CiAgICAgICAgdGhpcy4kcmVmcy50aXRsZS5zaG93U2hhZG93KCkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyZWZzLnRpdGxlLmhpZGVTaGFkb3coKQogICAgICB9CiAgICB9LAogICAgZ2V0TGlzdCAoKSB7CiAgICAgIGxpc3QoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmRhdGEKICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbAogICAgICAgIGNvbnN0IGNhdGVnb3J5ID0gdGhpcy4kcm91dGUucXVlcnkuY2F0ZWdvcnkKICAgICAgICBjb25zdCBrZXl3b3JkID0gdGhpcy4kcm91dGUucXVlcnkua2V5d29yZAogICAgICAgIGlmIChjYXRlZ29yeSkgewogICAgICAgICAgY29uc3Qga2V5ID0gT2JqZWN0LmtleXModGhpcy5saXN0KS5maWx0ZXIoaXRlbSA9PiBpdGVtID09PSBjYXRlZ29yeSlbMF0KICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmxpc3Rba2V5XQogICAgICAgICAgdGhpcy5saXN0ID0ge30KICAgICAgICAgIHRoaXMubGlzdFtrZXldID0gZGF0YQogICAgICAgIH0gZWxzZSBpZiAoa2V5d29yZCkgewogICAgICAgICAgT2JqZWN0LmtleXModGhpcy5saXN0KS5maWx0ZXIoa2V5ID0+IHsKICAgICAgICAgICAgdGhpcy5saXN0W2tleV0gPSB0aGlzLmxpc3Rba2V5XS5maWx0ZXIoYm9vayA9PiBib29rLmZpbGVOYW1lLmluZGV4T2Yoa2V5d29yZCkgPj0gMCkKICAgICAgICAgICAgcmV0dXJuIHRoaXMubGlzdFtrZXldLmxlbmd0aCA+IDAKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KQogICAgfQogIH0sCiAgY3JlYXRlZCAoKSB7CiAgICB0aGlzLmdldExpc3QoKQogICAgdGhpcy50aXRsZVRleHQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5jYXRlZ29yeVRleHQKICB9Cn0K"},{"version":3,"sources":["StoreList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"StoreList.vue","sourceRoot":"src/views/store","sourcesContent":["<template>\n  <div class=\"book-list-wrapper\">\n    <detail-title :title=\"title\"\n                  :showShelf=\"true\"\n                  @back=\"back\"\n                  ref=\"title\"></detail-title>\n    <scroll class=\"book-list-scroll-wrapper\"\n            :top=\"42\"\n            @onScroll=\"onScroll\"\n            ref=\"scroll\">\n      <featured :data=\"value\" :titleText=\"titleText ? titleText : getCategoryText(key)\" :btnText=\"''\" v-for=\"(value, key, index) in list\"\n                :key=\"index\"></featured>\n    </scroll>\n  </div>\n</template>\n\n<script>\nimport DetailTitle from '../../components/detail/DetaiTitle'\nimport Scroll from '../../components/common/scroll'\nimport Featured from '../../components/home/Featured'\nimport { realPx } from '../../utils/utils'\nimport { list } from '../../api/store'\nimport { categoryList, categoryText } from '../../utils/store'\n\nexport default {\n  components: {\n    DetailTitle,\n    Scroll,\n    Featured\n  },\n  computed: {\n    title () {\n      if (this.list) {\n        return this.total && this.$t('home.allBook').replace('$1', this.totalNumber)\n      } else {\n        return null\n      }\n    },\n    totalNumber () {\n      let num = 0\n      Object.keys(this.list).forEach(key => {\n        num += this.list[key].length\n      })\n      return num\n    }\n  },\n  data () {\n    return {\n      list: null,\n      total: null\n    }\n  },\n  methods: {\n    getCategoryText (key) {\n      return `${categoryText(categoryList[key], this)}(${this.list[key].length})`\n    },\n    back () {\n      this.$router.go(-1)\n    },\n    onScroll (offsetY) {\n      if (offsetY > realPx(42)) {\n        this.$refs.title.showShadow()\n      } else {\n        this.$refs.title.hideShadow()\n      }\n    },\n    getList () {\n      list().then(response => {\n        this.list = response.data.data\n        this.total = response.data.total\n        const category = this.$route.query.category\n        const keyword = this.$route.query.keyword\n        if (category) {\n          const key = Object.keys(this.list).filter(item => item === category)[0]\n          const data = this.list[key]\n          this.list = {}\n          this.list[key] = data\n        } else if (keyword) {\n          Object.keys(this.list).filter(key => {\n            this.list[key] = this.list[key].filter(book => book.fileName.indexOf(keyword) >= 0)\n            return this.list[key].length > 0\n          })\n        }\n      })\n    }\n  },\n  created () {\n    this.getList()\n    this.titleText = this.$route.query.categoryText\n  }\n}\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n  @import \"../../assets/styles/global\";\n\n  .book-list-wrapper {\n    width: 100%;\n    height: 100%;\n    background: white;\n  }\n</style>\n"]}]}