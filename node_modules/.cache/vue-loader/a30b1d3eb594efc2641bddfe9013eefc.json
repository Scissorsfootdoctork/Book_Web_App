{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/shelf/shelfFooter.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/shelf/shelfFooter.vue","mtime":1590725594808},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHN0b3JlU2hlbGZNaXhpbiB9IGZyb20gJy4uLy4uL3V0aWxzL21peGluJwppbXBvcnQgeyBzYXZlQm9va1NoZWxmLCByZW1vdmVMb2NhbFN0b3JhZ2UgfSBmcm9tICcuLi8uLi91dGlscy9sb2NhbHN0b3JhZ2UnCmltcG9ydCB7IGRvd25sb2FkIH0gZnJvbSAnLi4vLi4vYXBpL3N0b3JlJwppbXBvcnQgeyByZW1vdmVMb2NhbEZvcmFnZSB9IGZyb20gJy4uLy4uL3V0aWxzL2xvY2FsRm9yYWdlJwoKZXhwb3J0IGRlZmF1bHQgewogICAgbWl4aW5zOiBbc3RvcmVTaGVsZk1peGluXSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgaXNTZWxlY3RlZCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hlbGZTZWxlY3RlZCAmJiB0aGlzLnNoZWxmU2VsZWN0ZWQubGVuZ3RoID4gMAogICAgICAgIH0sCiAgICAgICAgdGFicygpIHsKICAgICAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnc2hlbGYucHJpdmF0ZScpLAogICAgICAgICAgICAgICAgICAgIGxhYmVsMjogdGhpcy4kdCgnc2hlbGYubm9Qcml2YXRlJyksCiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IDEKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ3NoZWxmLmRvd25sb2FkJyksCiAgICAgICAgICAgICAgICAgICAgbGFiZWwyOiB0aGlzLiR0KCdzaGVsZi5kZWxldGUnKSwKICAgICAgICAgICAgICAgICAgICBpbmRleDogMgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnc2hlbGYubW92ZScpLAogICAgICAgICAgICAgICAgICAgIGluZGV4OiAzCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdzaGVsZi5yZW1vdmUnKSwKICAgICAgICAgICAgICAgICAgICBpbmRleDogNAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBdCiAgICAgICAgfSwKICAgICAgICBpc1ByaXZhdGUoKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5pc1NlbGVjdGVkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNoZWxmU2VsZWN0ZWQuZXZlcnkoaXRlbSA9PiBpdGVtLnByaXZhdGUpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGlzRG93bmxvYWQoKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5pc1NlbGVjdGVkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNoZWxmU2VsZWN0ZWQuZXZlcnkoaXRlbSA9PiBpdGVtLmNhY2hlKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcG9wdXBNZW51OiBudWxsCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBhc3luYyBkb3dubG9hZFNlbGVjdGVkQm9vaygpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNoZWxmU2VsZWN0ZWQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZG93bmxvYWRCb29rKHRoaXMuc2hlbGZTZWxlY3RlZFtpXSkudGhlbihib29rID0+IHsKICAgICAgICAgICAgICAgICAgICBib29rLmNhY2hlID0gdHJ1ZQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZG93bmxvYWRCb29rKGJvb2spIHsKICAgICAgICAgICAgbGV0IHRleHQgPSAnJwogICAgICAgICAgICBjb25zdCB0b2FzdCA9IHRoaXMudG9hc3QoewogICAgICAgICAgICAgICAgdGV4dAogICAgICAgICAgICB9KQogICAgICAgICAgICB0b2FzdC5jb250aW51ZVNob3coKQogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgICAgICAgICAgZG93bmxvYWQoYm9vaywgYm9vayA9PiB7CiAgICAgICAgICAgICAgICAgICAgdG9hc3QucmVtb3ZlKCkKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGJvb2spCiAgICAgICAgICAgICAgICB9LCByZWplY3QsIHByb2dyZXNzRXZlbnQgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5mbG9vcihwcm9ncmVzc0V2ZW50LmxvYWRlZCAvIHByb2dyZXNzRXZlbnQudG90YWwgKiAxMDApICsgJyUnCiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHRoaXMuJHQoJ3NoZWxmLnByb2dyZXNzRG93bmxvYWQnKS5yZXBsYWNlKCckMScsIGAke2Jvb2suZmlsZU5hbWV9LmVwdWIoJHtwcm9ncmVzc30pYCkKICAgICAgICAgICAgICAgICAgICB0b2FzdC51cGRhdGVUZXh0KHRleHQpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgcmVtb3ZlU2VsZWN0ZWRCb29rKCkgewogICAgICAgICAgICBQcm9taXNlLmFsbCh0aGlzLnNoZWxmU2VsZWN0ZWQubWFwKGJvb2sgPT4gdGhpcy5yZW1vdmVCb29rKGJvb2spKSkudGhlbihib29rcyA9PiB7CiAgICAgICAgICAgICAgICBib29rcy5tYXAoYm9vayA9PiB7CiAgICAgICAgICAgICAgICAgICAgYm9vay5jYWNoZSA9IGZhbHNlCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgc2F2ZUJvb2tTaGVsZih0aGlzLnNoZWxmTGlzdCkKICAgICAgICAgICAgICAgIHRoaXMuc2ltcGxlVG9hc3QodGhpcy4kdCgnc2hlbGYucmVtb3ZlRG93bmxvYWRTdWNjZXNzJykpCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICByZW1vdmVCb29rKGJvb2spIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgICAgIHJlbW92ZUxvY2FsU3RvcmFnZShgJHtib29rLmNhdGVnb3J5VGV4dH0vJHtib29rLmZpbGVOYW1lfS1pbmZvYCkKICAgICAgICAgICAgICAgIHJlbW92ZUxvY2FsRm9yYWdlKGAke2Jvb2suZmlsZU5hbWV9YCkKICAgICAgICAgICAgICAgIHJlc29sdmUoYm9vaykKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGhpZGVQb3B1cCgpIHsKICAgICAgICAgICAgdGhpcy5wb3B1cE1lbnUuaGlkZSgpCiAgICAgICAgfSwKICAgICAgICBvbkNvbXBsZXRlKCkgewogICAgICAgICAgICB0aGlzLmhpZGVQb3B1cCgpCiAgICAgICAgICAgIHRoaXMuc2V0SXNFZGl0TW9kZShmYWxzZSkKICAgICAgICAgICAgc2F2ZUJvb2tTaGVsZih0aGlzLnNoZWxmTGlzdCkKICAgICAgICB9LAogICAgICAgIHNldFByaXZhdGUoKSB7CiAgICAgICAgICAgIGxldCBpc1ByaXZhdGUKICAgICAgICAgICAgaWYgKHRoaXMuaXNQcml2YXRlKSB7CiAgICAgICAgICAgICAgICBpc1ByaXZhdGUgPSBmYWxzZQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaXNQcml2YXRlID0gdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuc2hlbGZTZWxlY3RlZC5mb3JFYWNoKGJvb2sgPT4gewogICAgICAgICAgICAgICAgYm9vay5wcml2YXRlID0gaXNQcml2YXRlCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZSgpCiAgICAgICAgICAgIGlmIChpc1ByaXZhdGUpIHsKICAgICAgICAgICAgICAgIHRoaXMuc2ltcGxlVG9hc3QodGhpcy4kdCgnc2hlbGYuc2V0UHJpdmF0ZVN1Y2Nlc3MnKSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuc2ltcGxlVG9hc3QodGhpcy4kdCgnc2hlbGYuY2xvc2VQcml2YXRlU3VjY2VzcycpKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBzZXREb3dubG9hZCgpIHsKICAgICAgICAgICAgdGhpcy5vbkNvbXBsZXRlKCkKICAgICAgICAgICAgaWYgKHRoaXMuaXNEb3dubG9hZCkgewogICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTZWxlY3RlZEJvb2soKQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kb3dubG9hZFNlbGVjdGVkQm9vaygpCiAgICAgICAgICAgICAgICBzYXZlQm9va1NoZWxmKHRoaXMuc2hlbGZMaXN0KQogICAgICAgICAgICAgICAgdGhpcy5zaW1wbGVUb2FzdCh0aGlzLiR0KCdzaGVsZi5zZXREb3dubG9hZFN1Y2Nlc3MnKSkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcmVtb3ZlU2VsZWN0ZWQoKSB7CiAgICAgICAgICAgIHRoaXMuc2hlbGZTZWxlY3RlZC5mb3JFYWNoKHNlbGVjdGVkID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuc2V0U2hlbGZMaXN0KHRoaXMuc2hlbGZMaXN0LmZpbHRlcihib29rID0+IGJvb2sgIT09IHNlbGVjdGVkKSkKICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy5zZXRTaGVsZlNlbGVjdGVkKFtdKQogICAgICAgICAgICB0aGlzLm9uQ29tcGxldGUoKQogICAgICAgIH0sCiAgICAgICAgc2hvd1ByaXZhdGUoKSB7CiAgICAgICAgICAgIHRoaXMucG9wdXBNZW51ID0gdGhpcy5wb3B1cCh7CiAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy5pc1ByaXZhdGUgPyB0aGlzLiR0KCdzaGVsZi5jbG9zZVByaXZhdGVUaXRsZScpIDogdGhpcy4kdCgnc2hlbGYuc2V0UHJpdmF0ZVRpdGxlJyksCiAgICAgICAgICAgICAgICBidG46IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuaXNQcml2YXRlID8gdGhpcy4kdCgnc2hlbGYuY2xvc2UnKSA6IHRoaXMuJHQoJ3NoZWxmLm9wZW4nKSwKICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJpdmF0ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy4kdCgnc2hlbGYuY2FuY2VsJyksCiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVQb3B1cCgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0pLnNob3coKQogICAgICAgIH0sCiAgICAgICAgc2hvd0Rvd25sb2FkKCkgewogICAgICAgICAgICB0aGlzLnBvcHVwTWVudSA9IHRoaXMucG9wdXAoewogICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMuaXNEb3dubG9hZCA/IHRoaXMuJHQoJ3NoZWxmLnJlbW92ZURvd25sb2FkVGl0bGUnKSA6IHRoaXMuJHQoJ3NoZWxmLnNldERvd25sb2FkVGl0bGUnKSwKICAgICAgICAgICAgICAgIGJ0bjogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5pc0Rvd25sb2FkID8gdGhpcy4kdCgnc2hlbGYuZGVsZXRlJykgOiB0aGlzLiR0KCdzaGVsZi5vcGVuJyksCiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERvd25sb2FkKCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLiR0KCdzaGVsZi5jYW5jZWwnKSwKICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZVBvcHVwKCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfSkuc2hvdygpCiAgICAgICAgfSwKICAgICAgICBzaG93UmVtb3ZlKCkgewogICAgICAgICAgICBsZXQgdGl0bGUKICAgICAgICAgICAgaWYgKHRoaXMuc2hlbGZTZWxlY3RlZC5sZW5ndGggPT09IDEpIHsKICAgICAgICAgICAgICAgIHRpdGxlID0gdGhpcy4kdCgnc2hlbGYucmVtb3ZlQm9va1RpdGxlJykucmVwbGFjZSgnJDEnLCBg44CKJHt0aGlzLnNoZWxmU2VsZWN0ZWRbMF0udGl0bGV944CLYCkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRpdGxlID0gdGhpcy4kdCgnc2hlbGYucmVtb3ZlQm9va1RpdGxlJykucmVwbGFjZSgnJDEnLCB0aGlzLiR0KCdzaGVsZi5zZWxlY3RlZEJvb2tzJykpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5wb3B1cE1lbnUgPSB0aGlzLnBvcHVwKHsKICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSwKICAgICAgICAgICAgICAgIGJ0bjogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy4kdCgnc2hlbGYucmVtb3ZlQm9vaycpLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGFuZ2VyJywKICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU2VsZWN0ZWQoKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuJHQoJ3NoZWxmLmNhbmNlbCcpLAogICAgICAgICAgICAgICAgICAgICAgICBjbGljazogKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlUG9wdXAoKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9KS5zaG93KCkKICAgICAgICB9LAogICAgICAgIG9uVGFiQ2xpY2soaXRlbSkgewogICAgICAgICAgICBpZiAoIXRoaXMuaXNTZWxlY3RlZCkgewogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3dpdGNoIChpdGVtLmluZGV4KSB7CiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93UHJpdmF0ZSgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dEb3dubG9hZCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZygpLnNob3coKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93UmVtb3ZlKCkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBsYWJlbChpdGVtKSB7CiAgICAgICAgICAgIHN3aXRjaCAoaXRlbS5pbmRleCkgewogICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzUHJpdmF0ZSA/IGl0ZW0ubGFiZWwyIDogaXRlbS5sYWJlbAogICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzRG93bmxvYWQgPyBpdGVtLmxhYmVsMiA6IGl0ZW0ubGFiZWwKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubGFiZWwKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["shelfFooter.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"shelfFooter.vue","sourceRoot":"src/components/shelf","sourcesContent":["<template>\n    <div class=\"shelf-footer\" v-show=\"isEditMode\">\n        <div class=\"shelf-footer-tab-wrapper\" v-for=\"item in tabs\" :key=\"item.index\" @click=\"onTabClick(item)\">\n            <div class=\"shelf-footer-tab\" :class=\"{'is-selected': isSelected}\">\n                <div class=\"icon-private tab-icon\" v-if=\"item.index === 1 && !isPrivate\"></div>\n                <div class=\"icon-private-see tab-icon\" v-if=\"item.index === 1 && isPrivate\"></div>\n                <div class=\"icon-download tab-icon\" v-if=\"item.index === 2 && !isDownload\"></div>\n                <div class=\"icon-download-remove tab-icon\" v-if=\"item.index === 2 && isDownload\"></div>\n                <div class=\"icon-move tab-icon\" v-if=\"item.index === 3\"></div>\n                <div class=\"icon-shelf tab-icon\" v-if=\"item.index === 4\"></div>\n                <div class=\"tab-text\" :class=\"{'remove-text': item.index === 4}\">{{label(item)}}</div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import { storeShelfMixin } from '../../utils/mixin'\n    import { saveBookShelf, removeLocalStorage } from '../../utils/localstorage'\n    import { download } from '../../api/store'\n    import { removeLocalForage } from '../../utils/localForage'\n\n    export default {\n        mixins: [storeShelfMixin],\n        computed: {\n            isSelected() {\n                return this.shelfSelected && this.shelfSelected.length > 0\n            },\n            tabs() {\n                return [\n                    {\n                        label: this.$t('shelf.private'),\n                        label2: this.$t('shelf.noPrivate'),\n                        index: 1\n                    },\n                    {\n                        label: this.$t('shelf.download'),\n                        label2: this.$t('shelf.delete'),\n                        index: 2\n                    },\n                    {\n                        label: this.$t('shelf.move'),\n                        index: 3\n                    },\n                    {\n                        label: this.$t('shelf.remove'),\n                        index: 4\n                    }\n                ]\n            },\n            isPrivate() {\n                if (!this.isSelected) {\n                    return false\n                } else {\n                    return this.shelfSelected.every(item => item.private)\n                }\n            },\n            isDownload() {\n                if (!this.isSelected) {\n                    return false\n                } else {\n                    return this.shelfSelected.every(item => item.cache)\n                }\n            }\n        },\n        data() {\n            return {\n                popupMenu: null\n            }\n        },\n        methods: {\n            async downloadSelectedBook() {\n                for (let i = 0; i < this.shelfSelected.length; i++) {\n                    await this.downloadBook(this.shelfSelected[i]).then(book => {\n                        book.cache = true\n                    })\n                }\n            },\n            downloadBook(book) {\n                let text = ''\n                const toast = this.toast({\n                    text\n                })\n                toast.continueShow()\n                return new Promise((resolve, reject) => {\n                    download(book, book => {\n                        toast.remove()\n                        resolve(book)\n                    }, reject, progressEvent => {\n                        const progress = Math.floor(progressEvent.loaded / progressEvent.total * 100) + '%'\n                        text = this.$t('shelf.progressDownload').replace('$1', `${book.fileName}.epub(${progress})`)\n                        toast.updateText(text)\n                    })\n                })\n            },\n            removeSelectedBook() {\n                Promise.all(this.shelfSelected.map(book => this.removeBook(book))).then(books => {\n                    books.map(book => {\n                        book.cache = false\n                    })\n                    saveBookShelf(this.shelfList)\n                    this.simpleToast(this.$t('shelf.removeDownloadSuccess'))\n                })\n            },\n            removeBook(book) {\n                return new Promise((resolve, reject) => {\n                    removeLocalStorage(`${book.categoryText}/${book.fileName}-info`)\n                    removeLocalForage(`${book.fileName}`)\n                    resolve(book)\n                })\n            },\n            hidePopup() {\n                this.popupMenu.hide()\n            },\n            onComplete() {\n                this.hidePopup()\n                this.setIsEditMode(false)\n                saveBookShelf(this.shelfList)\n            },\n            setPrivate() {\n                let isPrivate\n                if (this.isPrivate) {\n                    isPrivate = false\n                } else {\n                    isPrivate = true\n                }\n                this.shelfSelected.forEach(book => {\n                    book.private = isPrivate\n                })\n                this.onComplete()\n                if (isPrivate) {\n                    this.simpleToast(this.$t('shelf.setPrivateSuccess'))\n                } else {\n                    this.simpleToast(this.$t('shelf.closePrivateSuccess'))\n                }\n            },\n            async setDownload() {\n                this.onComplete()\n                if (this.isDownload) {\n                    this.removeSelectedBook()\n                } else {\n                    await this.downloadSelectedBook()\n                    saveBookShelf(this.shelfList)\n                    this.simpleToast(this.$t('shelf.setDownloadSuccess'))\n                }\n            },\n            removeSelected() {\n                this.shelfSelected.forEach(selected => {\n                    this.setShelfList(this.shelfList.filter(book => book !== selected))\n                })\n                this.setShelfSelected([])\n                this.onComplete()\n            },\n            showPrivate() {\n                this.popupMenu = this.popup({\n                    title: this.isPrivate ? this.$t('shelf.closePrivateTitle') : this.$t('shelf.setPrivateTitle'),\n                    btn: [\n                        {\n                            text: this.isPrivate ? this.$t('shelf.close') : this.$t('shelf.open'),\n                            click: () => {\n                                this.setPrivate()\n                            }\n                        },\n                        {\n                            text: this.$t('shelf.cancel'),\n                            click: () => {\n                                this.hidePopup()\n                            }\n                        }\n                    ]\n                }).show()\n            },\n            showDownload() {\n                this.popupMenu = this.popup({\n                    title: this.isDownload ? this.$t('shelf.removeDownloadTitle') : this.$t('shelf.setDownloadTitle'),\n                    btn: [\n                        {\n                            text: this.isDownload ? this.$t('shelf.delete') : this.$t('shelf.open'),\n                            click: () => {\n                                this.setDownload()\n                            }\n                        },\n                        {\n                            text: this.$t('shelf.cancel'),\n                            click: () => {\n                                this.hidePopup()\n                            }\n                        }\n                    ]\n                }).show()\n            },\n            showRemove() {\n                let title\n                if (this.shelfSelected.length === 1) {\n                    title = this.$t('shelf.removeBookTitle').replace('$1', `《${this.shelfSelected[0].title}》`)\n                } else {\n                    title = this.$t('shelf.removeBookTitle').replace('$1', this.$t('shelf.selectedBooks'))\n                }\n                this.popupMenu = this.popup({\n                    title: title,\n                    btn: [\n                        {\n                            text: this.$t('shelf.removeBook'),\n                            type: 'danger',\n                            click: () => {\n                                this.removeSelected()\n                            }\n                        },\n                        {\n                            text: this.$t('shelf.cancel'),\n                            click: () => {\n                                this.hidePopup()\n                            }\n                        }\n                    ]\n                }).show()\n            },\n            onTabClick(item) {\n                if (!this.isSelected) {\n                    return\n                }\n                switch (item.index) {\n                    case 1:\n                        this.showPrivate()\n                        break\n                    case 2:\n                        this.showDownload()\n                        break\n                    case 3:\n                        this.dialog().show()\n                        break\n                    case 4:\n                        this.showRemove()\n                        break\n                    default:\n                        break\n                }\n            },\n            label(item) {\n                switch (item.index) {\n                    case 1:\n                        return this.isPrivate ? item.label2 : item.label\n                    case 2:\n                        return this.isDownload ? item.label2 : item.label\n                    default:\n                        return item.label\n                }\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"scss\">\n    @import \"../../assets/styles/global\";\n\n    .shelf-footer {\n        position: fixed;\n        bottom: 0;\n        left: 0;\n        z-index: 120;\n        display: flex;\n        width: 100%;\n        height: px2rem(48);\n        background: white;\n        box-shadow: 0 px2rem(-2) px2rem(4) 0 rgba(0, 0, 0, .1);\n\n        .shelf-footer-tab-wrapper {\n            flex: 1;\n            width: 25%;\n            height: 100%;\n\n            .shelf-footer-tab {\n                width: 100%;\n                height: 100%;\n                opacity: .5;\n                @include columnCenter;\n\n                &.is-selected {\n                    opacity: 1;\n                }\n\n                .tab-icon {\n                    font-size: px2rem(20);\n                    color: #666;\n                }\n\n                .tab-text {\n                    margin-top: px2rem(5);\n                    font-size: px2rem(12);\n                    color: #666;\n\n                    &.remove-text {\n                        color: $color-pink;\n                    }\n                }\n\n                .icon-shelf {\n                    color: $color-pink;\n                }\n            }\n        }\n    }\n</style>\n"]}]}