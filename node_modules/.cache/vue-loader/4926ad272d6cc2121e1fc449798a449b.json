{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/ebook/EbookReder.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/ebook/EbookReder.vue","mtime":1590727080387},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGVib29rTWlueCB9IGZyb20gJy4uLy4uL3V0aWxzL21peGluJwppbXBvcnQgewogICAgZ2V0Rm9udEZhbWlseSwKICAgIHNhdmVGb250RmFtaWx5LAogICAgZ2V0Rm9udFNpemUsCiAgICBzYXZlRm9udFNpemUsCiAgICBnZXRUaGVtZSwKICAgIHNhdmVUaGVtZSwKICAgIGdldExvY2F0aW9uCn0gZnJvbSAnLi4vLi4vdXRpbHMvbG9jYWxzdG9yYWdlLmpzJwppbXBvcnQgRXB1YiBmcm9tICdlcHVianMnCmltcG9ydCB7IGdldExvY2FsRm9yYWdlIH0gZnJvbSAnLi4vLi4vdXRpbHMvbG9jYWxGb3JhZ2UnCgpnbG9iYWwuZXB1YiA9IEVwdWIKZXhwb3J0IGRlZmF1bHQgewogICAgbWl4aW5zOiBbZWJvb2tNaW54XSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdG91Y2hTdGFydDogJycsCiAgICAgICAgICAgIHRvdWNoVGltZTogJycKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIG1vdmUoZSkgewogICAgICAgICAgICBsZXQgb2ZmU2V0WSA9IDAKICAgICAgICAgICAgaWYgKHRoaXMuZmlyc3RPZmZzZXRZKSB7CiAgICAgICAgICAgICAgICBvZmZTZXRZID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZIC0gdGhpcy5maXJzdE9mZnNldFkKICAgICAgICAgICAgICAgIHRoaXMuc2V0T2Zmc2V0WShvZmZTZXRZKQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5maXJzdE9mZnNldFkgPSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkKICAgICAgICAgICAgfQogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCkKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKQogICAgICAgIH0sCiAgICAgICAgbW92ZUVuZChlKSB7CiAgICAgICAgICAgIHRoaXMuc2V0T2Zmc2V0WSgwKQogICAgICAgICAgICB0aGlzLmZpcnN0T2Zmc2V0WSA9IG51bGwKICAgICAgICB9LAogICAgICAgIG9uTWFza0NsaWNrKGUpIHsKICAgICAgICAgICAgY29uc3Qgb2ZmU2V0WCA9IGUub2Zmc2V0WAogICAgICAgICAgICBjb25zdCB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoCiAgICAgICAgICAgIGlmIChvZmZTZXRYID4gMCAmJiBvZmZTZXRYIDwgd2lkdGggKiAwLjMpIHsKICAgICAgICAgICAgICAgIHRoaXMucHJldlBhZ2UoKQogICAgICAgICAgICB9IGVsc2UgaWYgKG9mZlNldFggPiAwICYmIG9mZlNldFggPiB3aWR0aCAqIDAuNykgewogICAgICAgICAgICAgICAgdGhpcy5uZXh0UGFnZSgpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLnNob3dUaXRsZUFuZE1lbnUoKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBwcmV2UGFnZSgpIHsKICAgICAgICAgICAgaWYgKHRoaXMucmVuZGl0aW9uKSB7CiAgICAgICAgICAgICAgICB0aGlzLnJlbmRpdGlvbi5wcmV2KCkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTG9jYXRpb24oKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIHRoaXMuaGlkZVRpdGxlQW5kTWVudSgpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG5leHRQYWdlKCkgewogICAgICAgICAgICBpZiAodGhpcy5yZW5kaXRpb24pIHsKICAgICAgICAgICAgICAgIHRoaXMucmVuZGl0aW9uLm5leHQoKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hMb2NhdGlvbigpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgdGhpcy5oaWRlVGl0bGVBbmRNZW51KCkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc2hvd1RpdGxlQW5kTWVudSgpIHsKICAgICAgICAgICAgaWYgKHRoaXMubWVudVZpc2libGUpIHsKICAgICAgICAgICAgICAgIHRoaXMuc2V0U2V0dGluZ1Zpc2libGUoLTEpCiAgICAgICAgICAgICAgICB0aGlzLnNldEZvbnRGYW1pbHlWaXNpYmxlKGZhbHNlKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuc2V0TWVudVZpc2libGUoIXRoaXMubWVudVZpc2libGUpCiAgICAgICAgfSwKICAgICAgICBpbml0Rm9udFNpemUoKSB7CiAgICAgICAgICAgIGNvbnN0IGZvbnRTaXplID0gZ2V0Rm9udFNpemUodGhpcy5maWxlTmFtZSkKICAgICAgICAgICAgaWYgKCFmb250U2l6ZSkgewogICAgICAgICAgICAgICAgc2F2ZUZvbnRTaXplKHRoaXMuZmlsZU5hbWUsIHRoaXMuZGVmdWx0Rm9udFNpemUpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRCb29rLnJlbmRpdGlvbi50aGVtZXMuZm9udFNpemUoZm9udFNpemUpCiAgICAgICAgICAgICAgICB0aGlzLnNldERlZmF1bHRGb250U2l6ZShmb250U2l6ZSkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgaW5pdEZvbnRGYW1pbHkoKSB7CiAgICAgICAgICAgIGNvbnN0IGZvbnQgPSBnZXRGb250RmFtaWx5KHRoaXMuZmlsZU5hbWUpCiAgICAgICAgICAgIGlmICghZm9udCkgewogICAgICAgICAgICAgICAgc2F2ZUZvbnRGYW1pbHkodGhpcy5maWxlTmFtZSwgdGhpcy5kZWZhdWx0Rm9udEZhbWlseSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEJvb2sucmVuZGl0aW9uLnRoZW1lcy5mb250KGZvbnQpCiAgICAgICAgICAgICAgICB0aGlzLnNldERlZmF1bHRGb250RmFtaWx5KGZvbnQpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGluaXRUaGVtZSgpIHsKICAgICAgICAgICAgbGV0IGRlZmF1bHRUaGVtZSA9IGdldFRoZW1lKHRoaXMuZmlsZU5hbWUpCiAgICAgICAgICAgIGlmICghZGVmYXVsdFRoZW1lKSB7CiAgICAgICAgICAgICAgICBkZWZhdWx0VGhlbWUgPSB0aGlzLlRoZW1lTGlzdFswXS5uYW1lCiAgICAgICAgICAgICAgICBzYXZlVGhlbWUodGhpcy5maWxlTmFtZSwgZGVmYXVsdFRoZW1lKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdFRoZW1lKGRlZmF1bHRUaGVtZSkKICAgICAgICAgICAgdGhpcy5UaGVtZUxpc3QuZm9yRWFjaChlbGVtZW50ID0+IHsKICAgICAgICAgICAgICAgIHRoaXMucmVuZGl0aW9uLnRoZW1lcy5yZWdpc3RlcihlbGVtZW50Lm5hbWUsIGVsZW1lbnQuc3R5bGUpCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMucmVuZGl0aW9uLnRoZW1lcy5zZWxlY3QoZGVmYXVsdFRoZW1lKQogICAgICAgIH0sCiAgICAgICAgaW5pdFJlbmRpdGlvbigpIHsKICAgICAgICAgICAgdGhpcy5yZW5kaXRpb24gPSB0aGlzLmJvb2sucmVuZGVyVG8oJ3JlYWQnLCB7CiAgICAgICAgICAgICAgICB3aWR0aDogaW5uZXJXaWR0aCwKICAgICAgICAgICAgICAgIGhlaWdodDogaW5uZXJIZWlnaHQsCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdkZWZhdWx0JwogICAgICAgICAgICB9KQoKICAgICAgICAgICAgdGhpcy5yZW5kaXRpb24uZGlzcGxheSgpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgbG9jYWx0aW9uID0gZ2V0TG9jYXRpb24odGhpcy5maWxlTmFtZSkKICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheShsb2NhbHRpb24sICgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRUaGVtZSgpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0Rm9udFNpemUoKQogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdEZvbnRGYW1pbHkoKQogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdEdsb2JsZVN0eWxlKCkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMucmVuZGl0aW9uLmhvb2tzLmNvbnRlbnQucmVnaXN0ZXIoY29udGVudHMgPT4gewogICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoWwogICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzLmFkZFN0eWxlc2hlZXQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9SRVNfVVJMfS9mb250cy9kYXlzT25lLmNzc2AKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzLmFkZFN0eWxlc2hlZXQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9SRVNfVVJMfS9mb250cy9jYWJpbi5jc3NgCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBjb250ZW50cy5hZGRTdHlsZXNoZWV0KAogICAgICAgICAgICAgICAgICAgICAgICAgIGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfUkVTX1VSTH0vZm9udHMvbW9udHNlcnJhdC5jc3NgCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBjb250ZW50cy5hZGRTdHlsZXNoZWV0KAogICAgICAgICAgICAgICAgICAgICAgICAgIGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfUkVTX1VSTH0vZm9udHMvdGFuZ2VyaW5lLmNzc2AKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBdKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5a2X5L2T5YWo6YOo5Yqg6L295a6M5q+VLi4uJykKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBpbml0R2VzdHVyZSgpIHsKICAgICAgICAgICAgdGhpcy5yZW5kaXRpb24ub24oJ3RvdWNoc3RhcnQnLCBlID0+IHsKICAgICAgICAgICAgICAgIHRoaXMudG91Y2hTdGFydCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WAogICAgICAgICAgICAgICAgdGhpcy50b3VjaFRpbWUgPSBlLnRpbWVTdGFtcAogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLnJlbmRpdGlvbi5vbigndG91Y2hlbmQnLCBlID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNldFggPSB0aGlzLnRvdWNoU3RhcnQgLSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFgKICAgICAgICAgICAgICAgIGNvbnN0IFRpbWUgPSBlLnRpbWVTdGFtcCAtIHRoaXMudG91Y2hUaW1lCiAgICAgICAgICAgICAgICBpZiAoVGltZSA8IDQwMCAmJiBvZmZzZXRYID4gNDApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRQYWdlKCkKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoVGltZSA8IDQwMCAmJiBvZmZzZXRYIDwgLTQwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2UGFnZSgpCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1RpdGxlQW5kTWVudSgpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCkKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCkKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHBhcnNlQm9vaygpIHsKICAgICAgICAgICAgdGhpcy5ib29rLmxvYWRlZC5jb3Zlci50aGVuKGNvdmVyID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuYm9vay5hcmNoaXZlLmNyZWF0ZVVybChjb3ZlcikudGhlbih1cmwgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q292ZXIodXJsKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy5ib29rLmxvYWRlZC5tZXRhZGF0YS50aGVuKG1ldGFkYXRhID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuc2V0TWV0YWRhdGEobWV0YWRhdGEpCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMuYm9vay5sb2FkZWQubmF2aWdhdGlvbi50aGVuKG5hdmlnID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IG5hdkl0ZW0gPSBuYXZpZy50b2MKICAgICAgICAgICAgICAgIHRoaXMuc2V0TmF2aWdhdGlvbihuYXZJdGVtKQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgaW5pdEVwdWIoVXJsKSB7CiAgICAgICAgICAgIHRoaXMuYm9vayA9IG5ldyBFcHViKFVybCkKICAgICAgICAgICAgdGhpcy5zZXRDdXJyZW50Qm9vayh0aGlzLmJvb2spCiAgICAgICAgICAgIHRoaXMuaW5pdFJlbmRpdGlvbigpCiAgICAgICAgICAgIHRoaXMuaW5pdEdlc3R1cmUoKQogICAgICAgICAgICB0aGlzLnBhcnNlQm9vaygpCiAgICAgICAgICAgIHRoaXMuYm9vay5yZWFkeQogICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ib29rLmxvY2F0aW9ucy5nZW5lcmF0ZSgKICAgICAgICAgICAgICAgICAgICAgIDc1MCAqICh3aW5kb3cuaW5uZXJXaWR0aCAvIDM3NSkgKiAoZ2V0Rm9udFNpemUodGhpcy5maWxlTmFtZSkgLyAxNikKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4obG9jYXRpb25zID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuc2V0Qm9va0F2YWlsYWJsZSh0cnVlKQogICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTG9jYXRpb24oKQogICAgICAgICAgICB9KQogICAgICAgIH0KICAgIH0sCgogICAgbW91bnRlZCgpIHsKICAgICAgICBjb25zdCBib29rcyA9IHRoaXMuJHJvdXRlLnBhcmFtcy5maWxlTmFtZS5zcGxpdCgnfCcpCiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBib29rc1sxXQogICAgICAgIGdldExvY2FsRm9yYWdlKGZpbGVOYW1lLCAoZXJyLCBibG9iKSA9PiB7CiAgICAgICAgICAgIGlmICghZXJyICYmIGJsb2IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcxJykKICAgICAgICAgICAgICAgIHRoaXMuc2V0RmlsZU5hbWUoYm9va3Muam9pbignLycpKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRFcHViKGJsb2IpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJzEnKQogICAgICAgICAgICAgICAgdGhpcy5zZXRGaWxlTmFtZShib29rcy5qb2luKCcvJykpLnRoZW4oCiAgICAgICAgICAgICAgICAgICAgICAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgVXJsID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkx9L2VwdWIvYCArIHRoaXMuZmlsZU5hbWUgKyAnLmVwdWInCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0RXB1YihVcmwpCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgfQp9Cg=="},{"version":3,"sources":["EbookReder.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EbookReder.vue","sourceRoot":"src/components/ebook","sourcesContent":["<template>\n    <div class=\"Ebook-Reder\">\n        <div id=\"read\"></div>\n        <div class=\"ebook-reader-mask\" @click=\"onMaskClick\" @touchmove=\"move\" @touchend=\"moveEnd\"></div>\n    </div>\n</template>\n\n<script>\n    import { ebookMinx } from '../../utils/mixin'\n    import {\n        getFontFamily,\n        saveFontFamily,\n        getFontSize,\n        saveFontSize,\n        getTheme,\n        saveTheme,\n        getLocation\n    } from '../../utils/localstorage.js'\n    import Epub from 'epubjs'\n    import { getLocalForage } from '../../utils/localForage'\n\n    global.epub = Epub\n    export default {\n        mixins: [ebookMinx],\n        data() {\n            return {\n                touchStart: '',\n                touchTime: ''\n            }\n        },\n        methods: {\n            move(e) {\n                let offSetY = 0\n                if (this.firstOffsetY) {\n                    offSetY = e.changedTouches[0].clientY - this.firstOffsetY\n                    this.setOffsetY(offSetY)\n                } else {\n                    this.firstOffsetY = e.changedTouches[0].clientY\n                }\n                e.preventDefault()\n                e.stopPropagation()\n            },\n            moveEnd(e) {\n                this.setOffsetY(0)\n                this.firstOffsetY = null\n            },\n            onMaskClick(e) {\n                const offSetX = e.offsetX\n                const width = window.innerWidth\n                if (offSetX > 0 && offSetX < width * 0.3) {\n                    this.prevPage()\n                } else if (offSetX > 0 && offSetX > width * 0.7) {\n                    this.nextPage()\n                } else {\n                    this.showTitleAndMenu()\n                }\n            },\n            prevPage() {\n                if (this.rendition) {\n                    this.rendition.prev().then(() => {\n                        this.refreshLocation()\n                    })\n                    this.hideTitleAndMenu()\n                }\n            },\n            nextPage() {\n                if (this.rendition) {\n                    this.rendition.next().then(() => {\n                        this.refreshLocation()\n                    })\n                    this.hideTitleAndMenu()\n                }\n            },\n            showTitleAndMenu() {\n                if (this.menuVisible) {\n                    this.setSettingVisible(-1)\n                    this.setFontFamilyVisible(false)\n                }\n                this.setMenuVisible(!this.menuVisible)\n            },\n            initFontSize() {\n                const fontSize = getFontSize(this.fileName)\n                if (!fontSize) {\n                    saveFontSize(this.fileName, this.defultFontSize)\n                } else {\n                    this.currentBook.rendition.themes.fontSize(fontSize)\n                    this.setDefaultFontSize(fontSize)\n                }\n            },\n            initFontFamily() {\n                const font = getFontFamily(this.fileName)\n                if (!font) {\n                    saveFontFamily(this.fileName, this.defaultFontFamily)\n                } else {\n                    this.currentBook.rendition.themes.font(font)\n                    this.setDefaultFontFamily(font)\n                }\n            },\n            initTheme() {\n                let defaultTheme = getTheme(this.fileName)\n                if (!defaultTheme) {\n                    defaultTheme = this.ThemeList[0].name\n                    saveTheme(this.fileName, defaultTheme)\n                }\n                this.setDefaultTheme(defaultTheme)\n                this.ThemeList.forEach(element => {\n                    this.rendition.themes.register(element.name, element.style)\n                })\n                this.rendition.themes.select(defaultTheme)\n            },\n            initRendition() {\n                this.rendition = this.book.renderTo('read', {\n                    width: innerWidth,\n                    height: innerHeight,\n                    method: 'default'\n                })\n\n                this.rendition.display().then(() => {\n                    const localtion = getLocation(this.fileName)\n                    this.display(localtion, () => {\n                        this.initTheme()\n                        this.initFontSize()\n                        this.initFontFamily()\n                        this.initGlobleStyle()\n                    })\n                })\n                this.rendition.hooks.content.register(contents => {\n                    Promise.all([\n                        contents.addStylesheet(\n                              `${process.env.VUE_APP_RES_URL}/fonts/daysOne.css`\n                        ),\n                        contents.addStylesheet(\n                              `${process.env.VUE_APP_RES_URL}/fonts/cabin.css`\n                        ),\n                        contents.addStylesheet(\n                              `${process.env.VUE_APP_RES_URL}/fonts/montserrat.css`\n                        ),\n                        contents.addStylesheet(\n                              `${process.env.VUE_APP_RES_URL}/fonts/tangerine.css`\n                        )\n                    ]).then(() => {\n                        console.log('字体全部加载完毕...')\n                    })\n                })\n            },\n            initGesture() {\n                this.rendition.on('touchstart', e => {\n                    this.touchStart = e.changedTouches[0].clientX\n                    this.touchTime = e.timeStamp\n                })\n                this.rendition.on('touchend', e => {\n                    const offsetX = this.touchStart - e.changedTouches[0].clientX\n                    const Time = e.timeStamp - this.touchTime\n                    if (Time < 400 && offsetX > 40) {\n                        this.nextPage()\n                    } else if (Time < 400 && offsetX < -40) {\n                        this.prevPage()\n                    } else {\n                        this.showTitleAndMenu()\n                    }\n                    e.preventDefault()\n                    e.stopPropagation()\n                })\n            },\n            parseBook() {\n                this.book.loaded.cover.then(cover => {\n                    this.book.archive.createUrl(cover).then(url => {\n                        this.setCover(url)\n                    })\n                })\n                this.book.loaded.metadata.then(metadata => {\n                    this.setMetadata(metadata)\n                })\n                this.book.loaded.navigation.then(navig => {\n                    const navItem = navig.toc\n                    this.setNavigation(navItem)\n                })\n            },\n            initEpub(Url) {\n                this.book = new Epub(Url)\n                this.setCurrentBook(this.book)\n                this.initRendition()\n                this.initGesture()\n                this.parseBook()\n                this.book.ready\n                .then(() => {\n                    return this.book.locations.generate(\n                          750 * (window.innerWidth / 375) * (getFontSize(this.fileName) / 16)\n                    )\n                })\n                .then(locations => {\n                    this.setBookAvailable(true)\n                    this.refreshLocation()\n                })\n            }\n        },\n\n        mounted() {\n            const books = this.$route.params.fileName.split('|')\n            const fileName = books[1]\n            getLocalForage(fileName, (err, blob) => {\n                if (!err && blob) {\n                    console.log('1')\n                    this.setFileName(books.join('/')).then(() => {\n                        this.initEpub(blob)\n                    })\n                } else {\n                    console.log('1')\n                    this.setFileName(books.join('/')).then(\n                          () => {\n                              const Url =\n                                    `${process.env.VUE_APP_RES_URL}/epub/` + this.fileName + '.epub'\n                              this.initEpub(Url)\n                          }\n                    )\n                }\n            })\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n    .Ebook-Reder {\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n\n        .ebook-reader-mask {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            top: 0;\n            left: 0;\n            z-index: 150;\n            background: transparent;\n        }\n    }\n</style>\n"]}]}