{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/src/components/ebook/EbookReder.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/src/components/ebook/EbookReder.vue","mtime":1589128928061},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGVib29rTWlueCB9IGZyb20gJy4uLy4uL3V0aWxzL21peGluJwppbXBvcnQgewogIGdldEZvbnRGYW1pbHksCiAgc2F2ZUZvbnRGYW1pbHksCiAgZ2V0Rm9udFNpemUsCiAgc2F2ZUZvbnRTaXplLAogIGdldFRoZW1lLAogIHNhdmVUaGVtZSwKICBnZXRMb2NhdGlvbgp9IGZyb20gJy4uLy4uL3V0aWxzL2xvY2Fsc3RvcmFnZS5qcycKaW1wb3J0IEVwdWIgZnJvbSAnZXB1YmpzJwpnbG9iYWwuZXB1YiA9IEVwdWIKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW2Vib29rTWlueF0sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICB0b3VjaFN0YXJ0OiAnJywKICAgICAgdG91Y2hUaW1lOiAnJwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgbW92ZSAoZSkgewogICAgICBsZXQgb2ZmU2V0WSA9IDAKICAgICAgaWYgKHRoaXMuZmlyc3RPZmZzZXRZKSB7CiAgICAgICAgb2ZmU2V0WSA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSAtIHRoaXMuZmlyc3RPZmZzZXRZCiAgICAgICAgdGhpcy5zZXRPZmZzZXRZKG9mZlNldFkpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5maXJzdE9mZnNldFkgPSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkKICAgICAgfQogICAgICBlLnByZXZlbnREZWZhdWx0KCkKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKQogICAgfSwKICAgIG1vdmVFbmQgKGUpIHsKICAgICAgdGhpcy5zZXRPZmZzZXRZKDApCiAgICAgIHRoaXMuZmlyc3RPZmZzZXRZID0gbnVsbAogICAgfSwKICAgIG9uTWFza0NsaWNrIChlKSB7CiAgICAgIGNvbnN0IG9mZlNldFggPSBlLm9mZnNldFgKICAgICAgY29uc3Qgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aAogICAgICBpZiAob2ZmU2V0WCA+IDAgJiYgb2ZmU2V0WCA8IHdpZHRoICogMC4zKSB7CiAgICAgICAgdGhpcy5wcmV2UGFnZSgpCiAgICAgIH0gZWxzZSBpZiAob2ZmU2V0WCA+IDAgJiYgb2ZmU2V0WCA+IHdpZHRoICogMC43KSB7CiAgICAgICAgdGhpcy5uZXh0UGFnZSgpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zaG93VGl0bGVBbmRNZW51KCkKICAgICAgfQogICAgfSwKICAgIHByZXZQYWdlICgpIHsKICAgICAgaWYgKHRoaXMucmVuZGl0aW9uKSB7CiAgICAgICAgdGhpcy5yZW5kaXRpb24ucHJldigpLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5yZWZyZXNoTG9jYXRpb24oKQogICAgICAgIH0pCiAgICAgICAgdGhpcy5oaWRlVGl0bGVBbmRNZW51KCkKICAgICAgfQogICAgfSwKICAgIG5leHRQYWdlICgpIHsKICAgICAgaWYgKHRoaXMucmVuZGl0aW9uKSB7CiAgICAgICAgdGhpcy5yZW5kaXRpb24ubmV4dCgpLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5yZWZyZXNoTG9jYXRpb24oKQogICAgICAgIH0pCiAgICAgICAgdGhpcy5oaWRlVGl0bGVBbmRNZW51KCkKICAgICAgfQogICAgfSwKICAgIHNob3dUaXRsZUFuZE1lbnUgKCkgewogICAgICBpZiAodGhpcy5tZW51VmlzaWJsZSkgewogICAgICAgIHRoaXMuc2V0U2V0dGluZ1Zpc2libGUoLTEpCiAgICAgICAgdGhpcy5zZXRGb250RmFtaWx5VmlzaWJsZShmYWxzZSkKICAgICAgfQogICAgICB0aGlzLnNldE1lbnVWaXNpYmxlKCF0aGlzLm1lbnVWaXNpYmxlKQogICAgfSwKICAgIGluaXRGb250U2l6ZSAoKSB7CiAgICAgIGNvbnN0IGZvbnRTaXplID0gZ2V0Rm9udFNpemUodGhpcy5maWxlTmFtZSkKICAgICAgaWYgKCFmb250U2l6ZSkgewogICAgICAgIHNhdmVGb250U2l6ZSh0aGlzLmZpbGVOYW1lLCB0aGlzLmRlZnVsdEZvbnRTaXplKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY3VycmVudEJvb2sucmVuZGl0aW9uLnRoZW1lcy5mb250U2l6ZShmb250U2l6ZSkKICAgICAgICB0aGlzLnNldERlZmF1bHRGb250U2l6ZShmb250U2l6ZSkKICAgICAgfQogICAgfSwKICAgIGluaXRGb250RmFtaWx5ICgpIHsKICAgICAgY29uc3QgZm9udCA9IGdldEZvbnRGYW1pbHkodGhpcy5maWxlTmFtZSkKICAgICAgaWYgKCFmb250KSB7CiAgICAgICAgc2F2ZUZvbnRGYW1pbHkodGhpcy5maWxlTmFtZSwgdGhpcy5kZWZhdWx0Rm9udEZhbWlseSkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmN1cnJlbnRCb29rLnJlbmRpdGlvbi50aGVtZXMuZm9udChmb250KQogICAgICAgIHRoaXMuc2V0RGVmYXVsdEZvbnRGYW1pbHkoZm9udCkKICAgICAgfQogICAgfSwKICAgIGluaXRUaGVtZSAoKSB7CiAgICAgIGxldCBkZWZhdWx0VGhlbWUgPSBnZXRUaGVtZSh0aGlzLmZpbGVOYW1lKQogICAgICBpZiAoIWRlZmF1bHRUaGVtZSkgewogICAgICAgIGRlZmF1bHRUaGVtZSA9IHRoaXMuVGhlbWVMaXN0WzBdLm5hbWUKICAgICAgICBzYXZlVGhlbWUodGhpcy5maWxlTmFtZSwgZGVmYXVsdFRoZW1lKQogICAgICB9CiAgICAgIHRoaXMuc2V0RGVmYXVsdFRoZW1lKGRlZmF1bHRUaGVtZSkKICAgICAgdGhpcy5UaGVtZUxpc3QuZm9yRWFjaChlbGVtZW50ID0+IHsKICAgICAgICB0aGlzLnJlbmRpdGlvbi50aGVtZXMucmVnaXN0ZXIoZWxlbWVudC5uYW1lLCBlbGVtZW50LnN0eWxlKQogICAgICB9KQogICAgICB0aGlzLnJlbmRpdGlvbi50aGVtZXMuc2VsZWN0KGRlZmF1bHRUaGVtZSkKICAgIH0sCiAgICBpbml0UmVuZGl0aW9uICgpIHsKICAgICAgdGhpcy5yZW5kaXRpb24gPSB0aGlzLmJvb2sucmVuZGVyVG8oJ3JlYWQnLCB7CiAgICAgICAgd2lkdGg6IGlubmVyV2lkdGgsCiAgICAgICAgaGVpZ2h0OiBpbm5lckhlaWdodCwKICAgICAgICBtZXRob2Q6ICdkZWZhdWx0JwogICAgICB9KQoKICAgICAgdGhpcy5yZW5kaXRpb24uZGlzcGxheSgpLnRoZW4oKCkgPT4gewogICAgICAgIGNvbnN0IGxvY2FsdGlvbiA9IGdldExvY2F0aW9uKHRoaXMuZmlsZU5hbWUpCiAgICAgICAgdGhpcy5kaXNwbGF5KGxvY2FsdGlvbiwgKCkgPT4gewogICAgICAgICAgdGhpcy5pbml0VGhlbWUoKQogICAgICAgICAgdGhpcy5pbml0Rm9udFNpemUoKQogICAgICAgICAgdGhpcy5pbml0Rm9udEZhbWlseSgpCiAgICAgICAgICB0aGlzLmluaXRHbG9ibGVTdHlsZSgpCiAgICAgICAgfSkKICAgICAgfSkKICAgICAgdGhpcy5yZW5kaXRpb24uaG9va3MuY29udGVudC5yZWdpc3Rlcihjb250ZW50cyA9PiB7CiAgICAgICAgUHJvbWlzZS5hbGwoWwogICAgICAgICAgY29udGVudHMuYWRkU3R5bGVzaGVldCgKICAgICAgICAgICAgYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9SRVNfVVJMfS9mb250cy9kYXlzT25lLmNzc2AKICAgICAgICAgICksCiAgICAgICAgICBjb250ZW50cy5hZGRTdHlsZXNoZWV0KAogICAgICAgICAgICBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkx9L2ZvbnRzL2NhYmluLmNzc2AKICAgICAgICAgICksCiAgICAgICAgICBjb250ZW50cy5hZGRTdHlsZXNoZWV0KAogICAgICAgICAgICBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkx9L2ZvbnRzL21vbnRzZXJyYXQuY3NzYAogICAgICAgICAgKSwKICAgICAgICAgIGNvbnRlbnRzLmFkZFN0eWxlc2hlZXQoCiAgICAgICAgICAgIGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfUkVTX1VSTH0vZm9udHMvdGFuZ2VyaW5lLmNzc2AKICAgICAgICAgICkKICAgICAgICBdKS50aGVuKCgpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCflrZfkvZPlhajpg6jliqDovb3lrozmr5UuLi4nKQogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgaW5pdEdlc3R1cmUgKCkgewogICAgICB0aGlzLnJlbmRpdGlvbi5vbigndG91Y2hzdGFydCcsIGUgPT4gewogICAgICAgIHRoaXMudG91Y2hTdGFydCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WAogICAgICAgIHRoaXMudG91Y2hUaW1lID0gZS50aW1lU3RhbXAKICAgICAgfSkKICAgICAgdGhpcy5yZW5kaXRpb24ub24oJ3RvdWNoZW5kJywgZSA9PiB7CiAgICAgICAgY29uc3Qgb2Zmc2V0WCA9IHRoaXMudG91Y2hTdGFydCAtIGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WAogICAgICAgIGNvbnN0IFRpbWUgPSBlLnRpbWVTdGFtcCAtIHRoaXMudG91Y2hUaW1lCiAgICAgICAgaWYgKFRpbWUgPCA0MDAgJiYgb2Zmc2V0WCA+IDQwKSB7CiAgICAgICAgICB0aGlzLm5leHRQYWdlKCkKICAgICAgICB9IGVsc2UgaWYgKFRpbWUgPCA0MDAgJiYgb2Zmc2V0WCA8IC00MCkgewogICAgICAgICAgdGhpcy5wcmV2UGFnZSgpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2hvd1RpdGxlQW5kTWVudSgpCiAgICAgICAgfQogICAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCkKICAgICAgfSkKICAgIH0sCiAgICBwYXJzZUJvb2sgKCkgewogICAgICB0aGlzLmJvb2subG9hZGVkLmNvdmVyLnRoZW4oY292ZXIgPT4gewogICAgICAgIHRoaXMuYm9vay5hcmNoaXZlLmNyZWF0ZVVybChjb3ZlcikudGhlbih1cmwgPT4gewogICAgICAgICAgdGhpcy5zZXRDb3Zlcih1cmwpCiAgICAgICAgfSkKICAgICAgfSkKICAgICAgdGhpcy5ib29rLmxvYWRlZC5tZXRhZGF0YS50aGVuKG1ldGFkYXRhID0+IHsKICAgICAgICB0aGlzLnNldE1ldGFkYXRhKG1ldGFkYXRhKQogICAgICB9KQogICAgICB0aGlzLmJvb2subG9hZGVkLm5hdmlnYXRpb24udGhlbihuYXZpZyA9PiB7CiAgICAgICAgY29uc3QgbmF2SXRlbSA9IG5hdmlnLnRvYwogICAgICAgIHRoaXMuc2V0TmF2aWdhdGlvbihuYXZJdGVtKQogICAgICB9KQogICAgfSwKICAgIGluaXRFcHViICgpIHsKICAgICAgY29uc3QgVXJsID0KICAgICAgICBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkx9L2VwdWIvYCArIHRoaXMuZmlsZU5hbWUgKyAnLmVwdWInCiAgICAgIHRoaXMuYm9vayA9IG5ldyBFcHViKFVybCkKICAgICAgdGhpcy5zZXRDdXJyZW50Qm9vayh0aGlzLmJvb2spCiAgICAgIHRoaXMuaW5pdFJlbmRpdGlvbigpCiAgICAgIHRoaXMuaW5pdEdlc3R1cmUoKQogICAgICB0aGlzLnBhcnNlQm9vaygpCiAgICAgIHRoaXMuYm9vay5yZWFkeQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHJldHVybiB0aGlzLmJvb2subG9jYXRpb25zLmdlbmVyYXRlKAogICAgICAgICAgICA3NTAgKiAod2luZG93LmlubmVyV2lkdGggLyAzNzUpICogKGdldEZvbnRTaXplKHRoaXMuZmlsZU5hbWUpIC8gMTYpCiAgICAgICAgICApCiAgICAgICAgfSkKICAgICAgICAudGhlbihsb2NhdGlvbnMgPT4gewogICAgICAgICAgdGhpcy5zZXRCb29rQXZhaWxhYmxlKHRydWUpCiAgICAgICAgICB0aGlzLnJlZnJlc2hMb2NhdGlvbigpCiAgICAgICAgfSkKICAgIH0KICB9LAoKICBtb3VudGVkICgpIHsKICAgIHRoaXMuc2V0RmlsZU5hbWUodGhpcy4kcm91dGUucGFyYW1zLmZpbGVOYW1lLnNwbGl0KCd8Jykuam9pbignLycpKS50aGVuKAogICAgICAoKSA9PiB7CiAgICAgICAgdGhpcy5pbml0RXB1YigpCiAgICAgIH0KICAgICkKICB9Cn0K"},{"version":3,"sources":["EbookReder.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EbookReder.vue","sourceRoot":"src/components/ebook","sourcesContent":["<template>\n  <div class=\"Ebook-Reder\">\n    <div id=\"read\"></div>\n    <div class=\"ebook-reader-mask\" @click=\"onMaskClick\" @touchmove=\"move\" @touchend=\"moveEnd\"></div>\n  </div>\n</template>\n\n<script>\nimport { ebookMinx } from '../../utils/mixin'\nimport {\n  getFontFamily,\n  saveFontFamily,\n  getFontSize,\n  saveFontSize,\n  getTheme,\n  saveTheme,\n  getLocation\n} from '../../utils/localstorage.js'\nimport Epub from 'epubjs'\nglobal.epub = Epub\nexport default {\n  mixins: [ebookMinx],\n  data () {\n    return {\n      touchStart: '',\n      touchTime: ''\n    }\n  },\n  methods: {\n    move (e) {\n      let offSetY = 0\n      if (this.firstOffsetY) {\n        offSetY = e.changedTouches[0].clientY - this.firstOffsetY\n        this.setOffsetY(offSetY)\n      } else {\n        this.firstOffsetY = e.changedTouches[0].clientY\n      }\n      e.preventDefault()\n      e.stopPropagation()\n    },\n    moveEnd (e) {\n      this.setOffsetY(0)\n      this.firstOffsetY = null\n    },\n    onMaskClick (e) {\n      const offSetX = e.offsetX\n      const width = window.innerWidth\n      if (offSetX > 0 && offSetX < width * 0.3) {\n        this.prevPage()\n      } else if (offSetX > 0 && offSetX > width * 0.7) {\n        this.nextPage()\n      } else {\n        this.showTitleAndMenu()\n      }\n    },\n    prevPage () {\n      if (this.rendition) {\n        this.rendition.prev().then(() => {\n          this.refreshLocation()\n        })\n        this.hideTitleAndMenu()\n      }\n    },\n    nextPage () {\n      if (this.rendition) {\n        this.rendition.next().then(() => {\n          this.refreshLocation()\n        })\n        this.hideTitleAndMenu()\n      }\n    },\n    showTitleAndMenu () {\n      if (this.menuVisible) {\n        this.setSettingVisible(-1)\n        this.setFontFamilyVisible(false)\n      }\n      this.setMenuVisible(!this.menuVisible)\n    },\n    initFontSize () {\n      const fontSize = getFontSize(this.fileName)\n      if (!fontSize) {\n        saveFontSize(this.fileName, this.defultFontSize)\n      } else {\n        this.currentBook.rendition.themes.fontSize(fontSize)\n        this.setDefaultFontSize(fontSize)\n      }\n    },\n    initFontFamily () {\n      const font = getFontFamily(this.fileName)\n      if (!font) {\n        saveFontFamily(this.fileName, this.defaultFontFamily)\n      } else {\n        this.currentBook.rendition.themes.font(font)\n        this.setDefaultFontFamily(font)\n      }\n    },\n    initTheme () {\n      let defaultTheme = getTheme(this.fileName)\n      if (!defaultTheme) {\n        defaultTheme = this.ThemeList[0].name\n        saveTheme(this.fileName, defaultTheme)\n      }\n      this.setDefaultTheme(defaultTheme)\n      this.ThemeList.forEach(element => {\n        this.rendition.themes.register(element.name, element.style)\n      })\n      this.rendition.themes.select(defaultTheme)\n    },\n    initRendition () {\n      this.rendition = this.book.renderTo('read', {\n        width: innerWidth,\n        height: innerHeight,\n        method: 'default'\n      })\n\n      this.rendition.display().then(() => {\n        const localtion = getLocation(this.fileName)\n        this.display(localtion, () => {\n          this.initTheme()\n          this.initFontSize()\n          this.initFontFamily()\n          this.initGlobleStyle()\n        })\n      })\n      this.rendition.hooks.content.register(contents => {\n        Promise.all([\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/daysOne.css`\n          ),\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/cabin.css`\n          ),\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/montserrat.css`\n          ),\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/tangerine.css`\n          )\n        ]).then(() => {\n          console.log('字体全部加载完毕...')\n        })\n      })\n    },\n    initGesture () {\n      this.rendition.on('touchstart', e => {\n        this.touchStart = e.changedTouches[0].clientX\n        this.touchTime = e.timeStamp\n      })\n      this.rendition.on('touchend', e => {\n        const offsetX = this.touchStart - e.changedTouches[0].clientX\n        const Time = e.timeStamp - this.touchTime\n        if (Time < 400 && offsetX > 40) {\n          this.nextPage()\n        } else if (Time < 400 && offsetX < -40) {\n          this.prevPage()\n        } else {\n          this.showTitleAndMenu()\n        }\n        e.preventDefault()\n        e.stopPropagation()\n      })\n    },\n    parseBook () {\n      this.book.loaded.cover.then(cover => {\n        this.book.archive.createUrl(cover).then(url => {\n          this.setCover(url)\n        })\n      })\n      this.book.loaded.metadata.then(metadata => {\n        this.setMetadata(metadata)\n      })\n      this.book.loaded.navigation.then(navig => {\n        const navItem = navig.toc\n        this.setNavigation(navItem)\n      })\n    },\n    initEpub () {\n      const Url =\n        `${process.env.VUE_APP_RES_URL}/epub/` + this.fileName + '.epub'\n      this.book = new Epub(Url)\n      this.setCurrentBook(this.book)\n      this.initRendition()\n      this.initGesture()\n      this.parseBook()\n      this.book.ready\n        .then(() => {\n          return this.book.locations.generate(\n            750 * (window.innerWidth / 375) * (getFontSize(this.fileName) / 16)\n          )\n        })\n        .then(locations => {\n          this.setBookAvailable(true)\n          this.refreshLocation()\n        })\n    }\n  },\n\n  mounted () {\n    this.setFileName(this.$route.params.fileName.split('|').join('/')).then(\n      () => {\n        this.initEpub()\n      }\n    )\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.Ebook-Reder {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  .ebook-reader-mask {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    z-index: 150;\n    background: transparent;\n  }\n}\n</style>\n"]}]}