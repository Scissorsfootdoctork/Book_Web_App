{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/src/components/ebook/EbookSlideContent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/src/components/ebook/EbookSlideContent.vue","mtime":1589128978628},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBzY3JvbGwgZnJvbSAnLi4vY29tbW9uL3Njcm9sbC52dWUnCmltcG9ydCB7IGVib29rTWlueCB9IGZyb20gJy4uLy4uL3V0aWxzL21peGluLmpzJwpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbZWJvb2tNaW54XSwKICBjb21wb25lbnRzOiB7CiAgICBzY3JvbGwKICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VhcmNoVmlzaWJsZTogZmFsc2UsCiAgICAgIHNlYXJjaFRleHQ6ICcnLAogICAgICBzZWFyY2hMaXN0OiBudWxsCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZWFyY2ggKCkgewogICAgICBpZiAodGhpcy5zZWFyY2hUZXh0ICYmIHRoaXMuc2VhcmNoVGV4dC5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5kb1NlYXJjaCh0aGlzLnNlYXJjaFRleHQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHRoaXMuc2VhcmNoTGlzdCA9IHJlcwogICAgICAgICAgdGhpcy5zZWFyY2hMaXN0Lm1hcChpdGVtID0+IHsKICAgICAgICAgICAgaXRlbS5leGNlcnB0ID0gaXRlbS5leGNlcnB0LnJlcGxhY2UoCiAgICAgICAgICAgICAgdGhpcy5zZWFyY2hUZXh0LAogICAgICAgICAgICAgIGA8c3BhbiBjbGFzcz0iY29udGVudC1zZWFyY2gtdGV4dCI+JHt0aGlzLnNlYXJjaFRleHR9PC9zcGFuPmAKICAgICAgICAgICAgKQogICAgICAgICAgICByZXR1cm4gaXRlbQogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgZG9TZWFyY2ggKHEpIHsKICAgICAgcmV0dXJuIFByb21pc2UuYWxsKAogICAgICAgIHRoaXMuY3VycmVudEJvb2suc3BpbmUuc3BpbmVJdGVtcy5tYXAoc2VjdGlvbiA9PgogICAgICAgICAgc2VjdGlvbgogICAgICAgICAgICAubG9hZCh0aGlzLmN1cnJlbnRCb29rLmxvYWQuYmluZCh0aGlzLmN1cnJlbnRCb29rKSkKICAgICAgICAgICAgLnRoZW4oc2VjdGlvbi5maW5kLmJpbmQoc2VjdGlvbiwgcSkpCiAgICAgICAgICAgIC5maW5hbGx5KHNlY3Rpb24udW5sb2FkLmJpbmQoc2VjdGlvbikpCiAgICAgICAgKQogICAgICApLnRoZW4ocmVzdWx0cyA9PiBQcm9taXNlLnJlc29sdmUoW10uY29uY2F0LmFwcGx5KFtdLCByZXN1bHRzKSkpCiAgICB9LAogICAgZGlzcGxheXNlYXJjaCAodywgaSkgewogICAgICBpZiAoaSkgewogICAgICAgIHRoaXMuY3VycmVudEJvb2sucmVuZGl0aW9uLmFubm90YXRpb25zLmhpZ2hsaWdodCh3KQogICAgICB9CiAgICAgIHRoaXMuaGlkZVRpdGxlQW5kTWVudSgpCiAgICB9LAogICAgc2VjaWsgKGkpIHsKICAgICAgdGhpcy5zZXRTZWN0aW9uKGkpCiAgICAgIHRoaXMuaGlkZVRpdGxlQW5kTWVudSgpCiAgICB9LAogICAgc2hvd1NlYXJjaFBhZ2UgKCkgewogICAgICB0aGlzLnNlYXJjaFZpc2libGUgPSB0cnVlCiAgICB9LAogICAgaGlkZVNlYXJjaFBhZ2UgKCkgewogICAgICB0aGlzLnNlYXJjaFZpc2libGUgPSBmYWxzZQogICAgICB0aGlzLnNlYXJjaFRleHQgPSAnJwogICAgICB0aGlzLnNlYXJjaExpc3QgPSBudWxsCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["EbookSlideContent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EbookSlideContent.vue","sourceRoot":"src/components/ebook","sourcesContent":["<template>\n  <div class=\"ebook-slide-contents\">\n    <div class=\"slide-contents-search-wrapper\">\n      <div class=\"slide-contents-search-input-wrapper\">\n        <div class=\"slide-contents-search-icon\">\n          <span class=\"icon-search\"></span>\n        </div>\n        <input\n          class=\"slide-contents-search-input\"\n          type=\"text\"\n          v-model=\"searchText\"\n          :placeholder=\"$t('book.searchHint')\"\n          @keyup.enter.exact=\"search()\"\n          @click=\"showSearchPage\"\n        />\n      </div>\n      <div\n        class=\"slide-contents-search-cancel\"\n        v-if=\"searchVisible\"\n        @click=\"hideSearchPage()\"\n      >\n        {{ $t(\"book.cancel\") }}\n      </div>\n    </div>\n    <div class=\"slide-contents-book-wrapper\" v-show=\"!searchVisible\">\n      <div class=\"slide-contents-book-img-wrapper\">\n        <img :src=\"cover\" alt class=\"slide-contents-book-img\" />\n      </div>\n      <div class=\"slide-contents-book-info-wrapper\">\n        <div class=\"slide-contents-book-title\">{{ metadata.title }}</div>\n        <div class=\"slide-contents-book-author\">{{ metadata.creator }}</div>\n      </div>\n      <div class=\"slide-contents-book-progress-wrapper\">\n        <div class=\"slide-contents-book-progress\">\n          <span class=\"progress\">{{ progress + \"%\" }}</span>\n          <span class=\"progress-text\">{{ $t(\"book.haveRead2\") }}</span>\n        </div>\n        <div class=\"slide-contents-book-time\">{{ getReadTimeText() }}</div>\n      </div>\n    </div>\n    <scroll\n      class=\"slide-contents-list\"\n      ref=\"scroll\"\n      :top=\"156\"\n      :bottom=\"48\"\n      v-show=\"!searchVisible\"\n    >\n      <div\n        class=\"slide-contents-item\"\n        v-for=\"(item, index) in navigation\"\n        :key=\"index\"\n      >\n        <span\n          class=\"slide-contents-item-lable\"\n          :class=\"{ selected: section === index }\"\n          @click=\"display(item.href), secik(index)\"\n          >{{ item.label }}</span\n        >\n        <span class=\"slide-contents-item-page\"></span>\n      </div>\n    </scroll>\n    <scroll\n      class=\"slide-search-list\"\n      :top=\"66\"\n      :bottom=\"48\"\n      v-show=\"searchVisible\"\n    >\n      <div\n        class=\"slide-search-item\"\n        v-for=\"(item, index) in searchList\"\n        :key=\"index\"\n        v-html=\"item.excerpt\"\n        @click=\"display(item.cfi), displaysearch(item.cfi, true)\"\n      ></div>\n    </scroll>\n  </div>\n</template>\n\n<script>\nimport scroll from '../common/scroll.vue'\nimport { ebookMinx } from '../../utils/mixin.js'\nexport default {\n  mixins: [ebookMinx],\n  components: {\n    scroll\n  },\n  data () {\n    return {\n      searchVisible: false,\n      searchText: '',\n      searchList: null\n    }\n  },\n  methods: {\n    search () {\n      if (this.searchText && this.searchText.length > 0) {\n        this.doSearch(this.searchText).then(res => {\n          this.searchList = res\n          this.searchList.map(item => {\n            item.excerpt = item.excerpt.replace(\n              this.searchText,\n              `<span class=\"content-search-text\">${this.searchText}</span>`\n            )\n            return item\n          })\n        })\n      }\n    },\n    doSearch (q) {\n      return Promise.all(\n        this.currentBook.spine.spineItems.map(section =>\n          section\n            .load(this.currentBook.load.bind(this.currentBook))\n            .then(section.find.bind(section, q))\n            .finally(section.unload.bind(section))\n        )\n      ).then(results => Promise.resolve([].concat.apply([], results)))\n    },\n    displaysearch (w, i) {\n      if (i) {\n        this.currentBook.rendition.annotations.highlight(w)\n      }\n      this.hideTitleAndMenu()\n    },\n    secik (i) {\n      this.setSection(i)\n      this.hideTitleAndMenu()\n    },\n    showSearchPage () {\n      this.searchVisible = true\n    },\n    hideSearchPage () {\n      this.searchVisible = false\n      this.searchText = ''\n      this.searchList = null\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../assets/styles/global.scss\";\n.selected {\n  font-weight: bold;\n  color: aliceblue;\n}\n.ebook-slide-contents {\n  width: 100%;\n  font-size: 0;\n  .slide-contents-search-wrapper {\n    display: flex;\n    width: 100%;\n    height: px2rem(36);\n    margin: px2rem(20) 0 px2rem(10) 0;\n    padding: 0 px2rem(15);\n    box-sizing: border-box;\n    .slide-contents-search-input-wrapper {\n      flex: 1;\n      @include center;\n      .slide-contents-search-icon {\n        flex: 0 0 px2rem(28);\n        font-size: px2rem(12);\n        @include center;\n      }\n      .slide-contents-search-input {\n        flex: 1;\n        width: 100%;\n        height: px2rem(32);\n        font-size: px2rem(14);\n        background: transparent;\n        border: none;\n        &:focus {\n          outline: none;\n        }\n      }\n    }\n    .slide-contents-search-cancel {\n      flex: 0 0 px2rem(50);\n      font-size: px2rem(14);\n      @include right;\n    }\n  }\n  .slide-contents-book-wrapper {\n    display: flex;\n    width: 100%;\n    height: px2rem(90);\n    padding: px2rem(10) px2rem(15) px2rem(20) px2rem(15);\n    box-sizing: border-box;\n    .slide-contents-book-img-wrapper {\n      flex: 0 0 px2rem(45);\n      .slide-contents-book-img {\n        width: px2rem(45);\n        height: px2rem(60);\n      }\n    }\n    .slide-contents-book-info-wrapper {\n      flex: 1;\n      padding: 0 px2rem(10);\n      box-sizing: border-box;\n      .slide-contents-book-title {\n        width: px2rem(153.75);\n        font-size: px2rem(14);\n        @include ellipsis2(2);\n      }\n      .slide-contents-book-author {\n        margin-top: px2rem(5);\n        width: px2rem(153.75);\n        font-size: px2rem(12);\n        @include textSmall;\n      }\n    }\n    .slide-contents-book-progress-wrapper {\n      flex: 0 0 px2rem(70);\n      .slide-contents-book-progress {\n        .progress {\n          font-size: px2rem(14);\n        }\n        .progress-text {\n          font-size: px2rem(12);\n        }\n      }\n      .slide-contents-book-time {\n        font-size: px2rem(12);\n        margin-top: px2rem(5);\n      }\n    }\n  }\n  .slide-contents-list {\n    padding: 0 px2rem(15);\n    box-sizing: border-box;\n    .slide-contents-item {\n      padding: px2rem(20) 0;\n      box-sizing: border-box;\n      display: flex;\n      .slide-contents-item-lable {\n        flex: 1;\n        font-size: px2rem(14);\n        line-height: px2rem(16);\n        @include textSmall;\n      }\n      .slide-contents-item-page {\n      }\n    }\n  }\n  .slide-search-list {\n    width: 100%;\n    padding: 0 px2rem(15);\n    box-sizing: border-box;\n    .slide-search-item {\n      font-size: px2rem(14);\n      line-height: px2rem(16);\n      padding: px2rem(20) 0;\n      box-sizing: border-box;\n    }\n  }\n}\n</style>\n"]}]}