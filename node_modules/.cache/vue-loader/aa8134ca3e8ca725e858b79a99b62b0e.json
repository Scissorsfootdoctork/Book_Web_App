{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/src/components/shelf/shelfSearch.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/src/components/shelf/shelfSearch.vue","mtime":1589464904433},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHNldExvY2FsU3RvcmFnZSB9IGZyb20gJy4uLy4uL3V0aWxzL2xvY2Fsc3RvcmFnZScKaW1wb3J0IHsgc3RvcmVTaGVsZk1peGluIH0gZnJvbSAnLi4vLi4vdXRpbHMvbWl4aW4nCgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnc2hlbGZTZWFyY2gnLAogICAgbWl4aW5zOiBbc3RvcmVTaGVsZk1peGluXSwKICAgIHdhdGNoOiB7CiAgICAgICAgb2Zmc2V0WShvZmZzZXRZKSB7CiAgICAgICAgICAgIGlmIChvZmZzZXRZID4gMCAmJiB0aGlzLmlmSW5wdXRDbGlja2VkKSB7CiAgICAgICAgICAgICAgICB0aGlzLmlmSGlkZVNoYWRvdyA9IGZhbHNlIC8vIOaYvuekuumYtOW9sQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5pZkhpZGVTaGFkb3cgPSB0cnVlIC8vIOmakOiXj+mYtOW9sQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgbGFuZygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGkxOG4ubG9jYWxlCiAgICAgICAgfSwKICAgICAgICB0YWJzKCkgewogICAgICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlkOiAxLAogICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuJHQoJ3NoZWxmLmRlZmF1bHQnKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZDogMiwKICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLiR0KCdzaGVsZi5wcm9ncmVzcycpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlkOiAzLAogICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuJHQoJ3NoZWxmLnB1cmNoYXNlJykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGlmSW5wdXRDbGlja2VkOiBmYWxzZSwKICAgICAgICAgICAgc2VhcmNoVGV4dDogJycsCiAgICAgICAgICAgIHNlbGVjdGVkVGFiOiAxLAogICAgICAgICAgICBpZkhpZGVTaGFkb3c6IGZhbHNlCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBvblRhYkNsaWNrKGlkKSB7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYWIgPSBpZAogICAgICAgIH0sCiAgICAgICAgY2xlYXJTZWFyY2hUZXh0KCkgewogICAgICAgICAgICB0aGlzLnNlYXJjaFRleHQgPSAnJwogICAgICAgIH0sCiAgICAgICAgc3dpdGNoTG9jYWxlKCkgewogICAgICAgICAgICBpZiAodGhpcy5sYW5nID09PSAnRU4nKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRpMThuLmxvY2FsZSA9ICdDTicKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJGkxOG4ubG9jYWxlID0gJ0VOJwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNldExvY2FsU3RvcmFnZSgnbG9jYWxlJywgdGhpcy4kaTE4bi5sb2NhbGUpCiAgICAgICAgfSwKICAgICAgICBvblNlYXJjaENsaWNrKCkgewogICAgICAgICAgICB0aGlzLmlmSW5wdXRDbGlja2VkID0gdHJ1ZQogICAgICAgICAgICB0aGlzLnNldFNoZWxmVGl0bGVWaXNpYmxlKGZhbHNlKQogICAgICAgIH0sCiAgICAgICAgb25DYW5jZWxDbGljaygpIHsKICAgICAgICAgICAgdGhpcy5pZklucHV0Q2xpY2tlZCA9IGZhbHNlCiAgICAgICAgICAgIHRoaXMuc2V0U2hlbGZUaXRsZVZpc2libGUodHJ1ZSkKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["shelfSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"shelfSearch.vue","sourceRoot":"src/components/shelf","sourcesContent":["<template>\n    <div class=\"shelf-search-wrapper\" :class=\"{'search-top': ifInputClicked, 'hide-shadow':ifHideShadow}\">\n        <div class=\"shelf-search\" :class=\"{ 'search-top': ifInputClicked }\">\n            <div class=\"search-wrapper\">\n                <div class=\"icon-search-wrapper\">\n                    <span class=\"icon-search icon\"></span>\n                </div>\n                <div class=\"search-input-wrapper\">\n                    <input\n                            class=\"search-input\"\n                            type=\"text\"\n                            :placeholder=\"$t('shelf.search')\"\n                            @click=\"onSearchClick()\"\n                            v-model=\"searchText\"\n                    />\n                </div>\n                <div\n                        class=\"icon-clear-wrapper\"\n                        v-show=\"searchText.length > 0\"\n                        @click=\"clearSearchText()\"\n                >\n                    <span class=\"icon-close-circle-fill\"></span>\n                </div>\n            </div>\n            <div\n                    class=\"icon-locale-wrapper\"\n                    v-if=\"!ifInputClicked\"\n                    @click=\"switchLocale()\"\n            >\n                <span class=\"icon-cn icon\" v-if=\"lang === 'CN'\"></span>\n                <span class=\"icon-en icon\" v-else></span>\n            </div>\n            <div class=\"cancel-btn-wrapper\" @click=\"onCancelClick()\" v-else>\n        <span class=\"cancel-text\">\n          {{ $t('shelf.cancel') }}\n        </span>\n            </div>\n        </div>\n        <transition name=\"hot-search-move\">\n            <div class=\"shelf-search-tab-wrapper\" v-if=\"ifInputClicked\">\n                <div\n                        class=\"shelf-search-tab-item\"\n                        v-for=\"item in tabs\"\n                        :key=\"item.id\"\n                        @click=\"onTabClick(item.id)\"\n                >\n          <span\n                  class=\"shelf-search-tab-text\"\n                  :class=\"{ 'is-selected': item.id === selectedTab }\"\n          >{{ item.text }}</span\n          >\n                </div>\n            </div>\n        </transition>\n    </div>\n</template>\n\n<script>\n    import { setLocalStorage } from '../../utils/localstorage'\n    import { storeShelfMixin } from '../../utils/mixin'\n\n    export default {\n        name: 'shelfSearch',\n        mixins: [storeShelfMixin],\n        watch: {\n            offsetY(offsetY) {\n                if (offsetY > 0 && this.ifInputClicked) {\n                    this.ifHideShadow = false // 显示阴影\n                } else {\n                    this.ifHideShadow = true // 隐藏阴影\n                }\n            }\n        },\n        computed: {\n            lang() {\n                return this.$i18n.locale\n            },\n            tabs() {\n                return [\n                    {\n                        id: 1,\n                        text: this.$t('shelf.default')\n                    },\n                    {\n                        id: 2,\n                        text: this.$t('shelf.progress')\n                    },\n                    {\n                        id: 3,\n                        text: this.$t('shelf.purchase')\n                    }\n                ]\n            }\n        },\n        data() {\n            return {\n                ifInputClicked: false,\n                searchText: '',\n                selectedTab: 1,\n                ifHideShadow: false\n            }\n        },\n        methods: {\n            onTabClick(id) {\n                this.selectedTab = id\n            },\n            clearSearchText() {\n                this.searchText = ''\n            },\n            switchLocale() {\n                if (this.lang === 'EN') {\n                    this.$i18n.locale = 'CN'\n                } else {\n                    this.$i18n.locale = 'EN'\n                }\n                setLocalStorage('locale', this.$i18n.locale)\n            },\n            onSearchClick() {\n                this.ifInputClicked = true\n                this.setShelfTitleVisible(false)\n            },\n            onCancelClick() {\n                this.ifInputClicked = false\n                this.setShelfTitleVisible(true)\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"scss\">\n    @import \"../../assets/styles/global\";\n\n    .shelf-search-wrapper {\n        position: relative;\n        z-index: 105;\n        width: 100%;\n        height: px2rem(94);\n        font-size: px2rem(16);\n        background: white;\n        box-shadow: 0 px2rem(2) px2rem(2) 0 rgba(0, 0, 0, 0.1);\n        overflow: hidden;\n\n        &.search-top {\n            position: fixed;\n        }\n\n        &.hide-shadow {\n            box-shadow: none;\n        }\n\n        .shelf-search {\n            position: absolute;\n            top: px2rem(42);\n            left: 0;\n            z-index: 105;\n            display: flex;\n            width: 100%;\n            height: px2rem(52);\n            transition: top 0.2s linear;\n\n            &.search-top {\n                position: fixed;\n                left: 0;\n                top: 0;\n            }\n\n            .search-wrapper {\n                flex: 1;\n                display: flex;\n                margin: px2rem(8) 0 px2rem(8) px2rem(10);\n                border: px2rem(1) solid #ccc;\n                border-radius: px2rem(3);\n\n                .icon-search-wrapper {\n                    flex: 0 0 px2rem(22);\n                    @include right;\n\n                    .icon-search {\n                        font-size: px2rem(12);\n                    }\n                }\n\n                .search-input-wrapper {\n                    flex: 1;\n                    padding: 0 px2rem(10);\n                    box-sizing: border-box;\n                    @include center;\n\n                    .search-input {\n                        width: 100%;\n                        font-size: px2rem(14);\n                        border: none;\n                        color: #333;\n\n                        &:focus {\n                            outline: none;\n                        }\n\n                        &::-webkit-input-placeholder {\n                            font-size: px2rem(14);\n                            color: #ccc;\n                        }\n                    }\n                }\n\n                .icon-clear-wrapper {\n                    flex: 0 0 px2rem(24);\n                    @include left;\n\n                    .icon-close-circle-fill {\n                        font-size: px2rem(14);\n                        color: #ccc;\n                    }\n                }\n            }\n\n            .icon-locale-wrapper {\n                flex: 0 0 px2rem(55);\n                @include center;\n\n                .icon-cn,\n                .icon-en {\n                    font-size: px2rem(22);\n                    color: #666;\n                }\n            }\n\n            .cancel-btn-wrapper {\n                flex: 0 0 px2rem(55);\n                @include center;\n\n                .cancel-text {\n                    font-size: px2rem(14);\n                    color: $color-blue;\n                }\n            }\n        }\n\n        .shelf-search-tab-wrapper {\n            position: absolute;\n            top: px2rem(52);\n            left: 0;\n            z-index: 105;\n            display: flex;\n            width: 100%;\n            height: px2rem(42);\n\n            .shelf-search-tab-item {\n                flex: 1;\n                @include center;\n\n                .shelf-search-tab-text {\n                    font-size: px2rem(12);\n                    color: #999;\n\n                    &.is-selected {\n                        color: $color-blue;\n                    }\n                }\n            }\n        }\n    }\n</style>\n"]}]}