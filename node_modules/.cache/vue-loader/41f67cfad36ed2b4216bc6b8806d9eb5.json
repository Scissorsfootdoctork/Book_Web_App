{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/home/searchBar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/home/searchBar.vue","mtime":1541580605000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { realPx } from '@/utils/utils'\nimport HotSearch from '@/components/home/hotSearch'\n\nexport default {\n  components: {\n    HotSearch\n  },\n  props: {\n    ifShowSearchPage: {\n      type: Boolean,\n      default: false\n    },\n    ifShowHotSearch: {\n      type: Boolean,\n      default: true\n    },\n    bookListOffsetY: Number\n  },\n  data() {\n    return {\n      searchList: {\n        hotSearch: [\n          {\n            type: 1,\n            text: 'Self-Reported Population Health',\n            num: '1.8万'\n          },\n          {\n            type: 1,\n            text: 'Library and Information Sciences',\n            num: '1.1万'\n          },\n          {\n            type: 1,\n            text: 'Global Business Strategy',\n            num: '1.3万'\n          },\n          {\n            type: 1,\n            text: 'Corporate Data Quality',\n            num: '1.0万'\n          },\n          {\n            type: 1,\n            text: 'Verrechnungspreise',\n            num: '3.9万'\n          }\n        ],\n        historySearch: [\n          {\n            type: 2,\n            text: 'Computer Science'\n          },\n          {\n            type: 1,\n            text: 'Building the Infrastructure for Cloud Security'\n          },\n          {\n            type: 2,\n            text: 'ePub'\n          },\n          {\n            type: 2,\n            text: 'api'\n          },\n          {\n            type: 2,\n            text: 'Vue.js'\n          },\n          {\n            type: 2,\n            text: 'Nginx'\n          },\n          {\n            type: 2,\n            text: 'Java'\n          },\n          {\n            type: 2,\n            text: 'hdfs'\n          },\n          {\n            type: 2,\n            text: 'vuejs'\n          },\n          {\n            type: 2,\n            text: 'es6'\n          },\n          {\n            type: 2,\n            text: 'Intel'\n          },\n          {\n            type: 1,\n            text: 'Pro Git'\n          },\n          {\n            type: 2,\n            text: 'imooc'\n          },\n          {\n            type: 2,\n            text: 'Education'\n          },\n          {\n            type: 2,\n            text: 'Springer'\n          },\n          {\n            type: 2,\n            text: 'Environment'\n          }\n        ]\n      },\n      ifHideShadow: true,\n      searchText: null\n    }\n  },\n  methods: {\n    setKeyword(keyword) {\n      this.searchText = keyword\n      this.searchList.historySearch.push(keyword)\n    },\n    search() {\n      this.$router.push({\n        path: '/book-store/list',\n        query: {\n          keyword: this.searchText\n        }\n      })\n    },\n    hideHotSearch() {\n      this.$emit('update:ifShowHotSearch', false)\n    },\n    showShadow() {\n      this.ifHideShadow = false\n    },\n    hideShadow() {\n      this.ifHideShadow = true\n    },\n    showSearchPageAndHotSearch() {\n      this.showSearchPage()\n      this.hideShadow()\n      this.$emit('update:ifShowHotSearch', true)\n      this.$nextTick(() => {\n        this.initHotSearch()\n      })\n    },\n    back() {\n      this.searchText = ''\n      if (this.ifShowSearchPage) {\n        if (this.bookListOffsetY <= 0) {\n          this.hideSearchPage()\n        } else {\n          if (this.ifShowHotSearch) {\n            this.hideHotSearch()\n            this.showShadow()\n          } else {\n            this.$router.push('/book-store/shelf')\n          }\n        }\n      } else {\n        this.$router.push('/book-store/shelf')\n      }\n      this.$emit('back')\n    },\n    hideSearchPage() {\n      this.$emit('update:ifShowSearchPage', false)\n      this.ifHideShadow = true\n    },\n    showSearchPage() {\n      this.$emit('update:ifShowSearchPage', true)\n    },\n    showFlapCard() {\n      this.$emit('showFlapCard')\n    },\n    handleScroll(e) {\n      const target = e.target\n      if (target) {\n        if (target.scrollTop > 0) {\n          this.ifHideShadow = false\n        } else {\n          this.ifHideShadow = true\n        }\n      }\n    },\n    initHotSearch() {\n      if (this.$refs.searchMaskWrapper) {\n        this.$refs.searchMaskWrapper.style.height = window.innerHeight - realPx(52) + 'px'\n        this.$refs.searchMaskWrapper.addEventListener('scroll', this.handleScroll)\n        this.$refs.searchMaskWrapper.scrollTo(0, 0)\n      }\n    }\n  }\n}\n",{"version":3,"sources":["searchBar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"searchBar.vue","sourceRoot":"src/components/home","sourcesContent":["<template>\n  <div class=\"search-bar-wrapper\">\n    <div class=\"title-search-wrapper\" :class=\"{'show-search': ifShowSearchPage, 'hide-shadow': ifHideShadow}\" ref=\"titleSearchWrapper\">\n      <transition name=\"title\">\n        <div class=\"title-search-page-wrapper\" v-show=\"!ifShowSearchPage\">\n          <span class=\"title-text\">{{$t('home.title')}}</span>\n          <div class=\"icon-shake-wrapper\" @click=\"showFlapCard\">\n            <span class=\"icon-shake icon\"></span>\n          </div>\n        </div>\n      </transition>\n      <div class=\"icon-back-wrapper\" :class=\"{'show-search': ifShowSearchPage}\" @click=\"back\">\n        <span class=\"icon-back icon\"></span>\n      </div>\n      <div class=\"search-wrapper\" :class=\"{'show-search': ifShowSearchPage}\">\n        <div class=\"search-back-wrapper\" :class=\"{'show-search': ifShowSearchPage}\">\n          <span class=\"icon-back icon\" :class=\"{'show-search': ifShowSearchPage}\"></span>\n        </div>\n        <div class=\"search-bg\">\n          <span class=\"icon-search icon\"></span>\n          <input type=\"text\" class=\"search\" :placeholder=\"$t('home.hint')\" v-model=\"searchText\" @click=\"showSearchPageAndHotSearch\" @keyup.13.exact=\"search\">\n        </div>\n      </div>\n    </div>\n    <transition name=\"host-search\">\n      <div class=\"hot-search-wrapper\" v-if=\"ifShowSearchPage && ifShowHotSearch\" ref=\"searchMaskWrapper\">\n        <hot-search :label=\"$t('home.hotSearch')\"\n                    :btn=\"$t('home.change')\"\n                    :hotSearch=\"searchList.hotSearch\"></hot-search>\n        <div class=\"line\"></div>\n        <hot-search :label=\"$t('home.historySearch')\"\n                    :btn=\"$t('home.clear')\"\n                    :hotSearch=\"searchList.historySearch\"></hot-search>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\n  import { realPx } from '@/utils/utils'\n  import HotSearch from '@/components/home/hotSearch'\n\n  export default {\n    components: {\n      HotSearch\n    },\n    props: {\n      ifShowSearchPage: {\n        type: Boolean,\n        default: false\n      },\n      ifShowHotSearch: {\n        type: Boolean,\n        default: true\n      },\n      bookListOffsetY: Number\n    },\n    data() {\n      return {\n        searchList: {\n          hotSearch: [\n            {\n              type: 1,\n              text: 'Self-Reported Population Health',\n              num: '1.8万'\n            },\n            {\n              type: 1,\n              text: 'Library and Information Sciences',\n              num: '1.1万'\n            },\n            {\n              type: 1,\n              text: 'Global Business Strategy',\n              num: '1.3万'\n            },\n            {\n              type: 1,\n              text: 'Corporate Data Quality',\n              num: '1.0万'\n            },\n            {\n              type: 1,\n              text: 'Verrechnungspreise',\n              num: '3.9万'\n            }\n          ],\n          historySearch: [\n            {\n              type: 2,\n              text: 'Computer Science'\n            },\n            {\n              type: 1,\n              text: 'Building the Infrastructure for Cloud Security'\n            },\n            {\n              type: 2,\n              text: 'ePub'\n            },\n            {\n              type: 2,\n              text: 'api'\n            },\n            {\n              type: 2,\n              text: 'Vue.js'\n            },\n            {\n              type: 2,\n              text: 'Nginx'\n            },\n            {\n              type: 2,\n              text: 'Java'\n            },\n            {\n              type: 2,\n              text: 'hdfs'\n            },\n            {\n              type: 2,\n              text: 'vuejs'\n            },\n            {\n              type: 2,\n              text: 'es6'\n            },\n            {\n              type: 2,\n              text: 'Intel'\n            },\n            {\n              type: 1,\n              text: 'Pro Git'\n            },\n            {\n              type: 2,\n              text: 'imooc'\n            },\n            {\n              type: 2,\n              text: 'Education'\n            },\n            {\n              type: 2,\n              text: 'Springer'\n            },\n            {\n              type: 2,\n              text: 'Environment'\n            }\n          ]\n        },\n        ifHideShadow: true,\n        searchText: null\n      }\n    },\n    methods: {\n      setKeyword(keyword) {\n        this.searchText = keyword\n        this.searchList.historySearch.push(keyword)\n      },\n      search() {\n        this.$router.push({\n          path: '/book-store/list',\n          query: {\n            keyword: this.searchText\n          }\n        })\n      },\n      hideHotSearch() {\n        this.$emit('update:ifShowHotSearch', false)\n      },\n      showShadow() {\n        this.ifHideShadow = false\n      },\n      hideShadow() {\n        this.ifHideShadow = true\n      },\n      showSearchPageAndHotSearch() {\n        this.showSearchPage()\n        this.hideShadow()\n        this.$emit('update:ifShowHotSearch', true)\n        this.$nextTick(() => {\n          this.initHotSearch()\n        })\n      },\n      back() {\n        this.searchText = ''\n        if (this.ifShowSearchPage) {\n          if (this.bookListOffsetY <= 0) {\n            this.hideSearchPage()\n          } else {\n            if (this.ifShowHotSearch) {\n              this.hideHotSearch()\n              this.showShadow()\n            } else {\n              this.$router.push('/book-store/shelf')\n            }\n          }\n        } else {\n          this.$router.push('/book-store/shelf')\n        }\n        this.$emit('back')\n      },\n      hideSearchPage() {\n        this.$emit('update:ifShowSearchPage', false)\n        this.ifHideShadow = true\n      },\n      showSearchPage() {\n        this.$emit('update:ifShowSearchPage', true)\n      },\n      showFlapCard() {\n        this.$emit('showFlapCard')\n      },\n      handleScroll(e) {\n        const target = e.target\n        if (target) {\n          if (target.scrollTop > 0) {\n            this.ifHideShadow = false\n          } else {\n            this.ifHideShadow = true\n          }\n        }\n      },\n      initHotSearch() {\n        if (this.$refs.searchMaskWrapper) {\n          this.$refs.searchMaskWrapper.style.height = window.innerHeight - realPx(52) + 'px'\n          this.$refs.searchMaskWrapper.addEventListener('scroll', this.handleScroll)\n          this.$refs.searchMaskWrapper.scrollTo(0, 0)\n        }\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n  @import \"../../assets/styles/global\";\n\n  .search-bar-wrapper {\n    .title-search-wrapper {\n      position: relative;\n      z-index: 110;\n      width: 100%;\n      height: px2rem(94);\n      background: white;\n      box-shadow: 0 px2rem(2) px2rem(2) 0 rgba(0, 0, 0, .1);\n      &.show-search {\n        height: px2rem(52);\n      }\n      &.hide-shadow {\n        box-shadow: none;\n      }\n      .title-search-page-wrapper {\n        position: absolute;\n        top: 0;\n        left: 0;\n        z-index: 105;\n        width: 100%;\n        height: px2rem(42);\n        @include center;\n        .title-text {\n          font-weight: bold;\n        }\n        .icon-shake-wrapper {\n          position: absolute;\n          right: 0;\n          top: 0;\n          z-index: 110;\n          padding-right: px2rem(15);\n          height: 100%;\n          @include center;\n        }\n      }\n      .icon-back-wrapper {\n        position: absolute;\n        left: px2rem(15);\n        top: 0;\n        z-index: 110;\n        height: px2rem(42);\n        @include center;\n        transition: all $homeAnimationTime linear;\n        &.show-search {\n          height: px2rem(52);\n        }\n      }\n      .search-wrapper {\n        position: absolute;\n        top: px2rem(42);\n        left: 0;\n        z-index: 100;\n        display: flex;\n        padding: px2rem(10);\n        width: 100%;\n        box-sizing: border-box;\n        transition: all $homeAnimationTime linear;\n        &.show-search {\n          top: 0;\n        }\n        .search-back-wrapper {\n          flex: 0;\n          width: 0;\n          @include center;\n          transition: all $homeAnimationTime linear;\n          visibility: hidden;\n          &.show-search {\n            margin-right: px2rem(10);\n            flex: 0 0 px2rem(20);\n            width: px2rem(20);\n          }\n          .icon-back {\n            font-size: 0;\n            &.show-search {\n              font-size: px2rem(20);\n            }\n          }\n        }\n        .search-bg {\n          flex: 1;\n          background: #f4f4f4;\n          border-radius: px2rem(20);\n          border: px2rem(1) solid #eee;\n          box-sizing: border-box;\n          padding: px2rem(5) px2rem(15);\n          transition: all $homeAnimationTime linear;\n          @include left;\n          .icon-search {\n            font-size: px2rem(16);\n            color: #999;\n          }\n          .search {\n            color: #666;\n            width: 100%;\n            height: px2rem(22);\n            background: transparent;\n            font-size: px2rem(12);\n            margin-left: px2rem(10);\n            border: none;\n            &:focus {\n              outline: none;\n            }\n            &::-webkit-input-placeholder {\n              color: #ccc;\n            }\n          }\n        }\n      }\n    }\n    .hot-search-wrapper {\n      width: 100%;\n      height: 100%;\n      background: white;\n      overflow-x: hidden;\n      overflow-y: scroll;\n      -webkit-overflow-scrolling: touch;\n      &::-webkit-scrollbar {\n        display: none;\n      }\n      .line {\n        width: 100%;\n        height: 0;\n        border-top: px2rem(1) solid #eee;\n        margin: px2rem(10) 0;\n      }\n    }\n  }\n</style>\n"]}]}