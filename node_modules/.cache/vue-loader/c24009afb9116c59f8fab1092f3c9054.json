{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/ebook/EbookSlideContent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/ebook/EbookSlideContent.vue","mtime":1584214469920},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBzY3JvbGwgZnJvbSAiLi4vY29tbW9uL3Njcm9sbC52dWUiOwppbXBvcnQgeyBlYm9va01pbnggfSBmcm9tICIuLi8uLi91dGlscy9taXhpbi5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBtaXhpbnM6IFtlYm9va01pbnhdLAogIGNvbXBvbmVudHM6IHsKICAgIHNjcm9sbAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaFZpc2libGU6IGZhbHNlLAogICAgICBzZWFyY2hUZXh0OiAiIiwKICAgICAgc2VhcmNoTGlzdDogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNlYXJjaCgpIHsKICAgICAgaWYgKHRoaXMuc2VhcmNoVGV4dCAmJiB0aGlzLnNlYXJjaFRleHQubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuZG9TZWFyY2godGhpcy5zZWFyY2hUZXh0KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICB0aGlzLnNlYXJjaExpc3QgPSByZXM7CiAgICAgICAgICB0aGlzLnNlYXJjaExpc3QubWFwKGl0ZW0gPT4gewogICAgICAgICAgICBpdGVtLmV4Y2VycHQgPSBpdGVtLmV4Y2VycHQucmVwbGFjZSgKICAgICAgICAgICAgICB0aGlzLnNlYXJjaFRleHQsCiAgICAgICAgICAgICAgYDxzcGFuIGNsYXNzPSJjb250ZW50LXNlYXJjaC10ZXh0Ij4ke3RoaXMuc2VhcmNoVGV4dH08L3NwYW4+YAogICAgICAgICAgICApOwogICAgICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZG9TZWFyY2gocSkgewogICAgICByZXR1cm4gUHJvbWlzZS5hbGwoCiAgICAgICAgdGhpcy5jdXJyZW50Qm9vay5zcGluZS5zcGluZUl0ZW1zLm1hcChzZWN0aW9uID0+CiAgICAgICAgICBzZWN0aW9uCiAgICAgICAgICAgIC5sb2FkKHRoaXMuY3VycmVudEJvb2subG9hZC5iaW5kKHRoaXMuY3VycmVudEJvb2spKQogICAgICAgICAgICAudGhlbihzZWN0aW9uLmZpbmQuYmluZChzZWN0aW9uLCBxKSkKICAgICAgICAgICAgLmZpbmFsbHkoc2VjdGlvbi51bmxvYWQuYmluZChzZWN0aW9uKSkKICAgICAgICApCiAgICAgICkudGhlbihyZXN1bHRzID0+IFByb21pc2UucmVzb2x2ZShbXS5jb25jYXQuYXBwbHkoW10sIHJlc3VsdHMpKSk7CiAgICB9LAogICAgZGlzcGxheXNlYXJjaCh3LCBpKSB7CiAgICAgIGlmIChpKSB7CiAgICAgICAgdGhpcy5jdXJyZW50Qm9vay5yZW5kaXRpb24uYW5ub3RhdGlvbnMuaGlnaGxpZ2h0KHcpOwogICAgICB9CiAgICAgIHRoaXMuaGlkZVRpdGxlQW5kTWVudSgpOwogICAgfSwKICAgIHNlY2lrKGkpIHsKICAgICAgdGhpcy5zZXRTZWN0aW9uKGkpOwogICAgICB0aGlzLmhpZGVUaXRsZUFuZE1lbnUoKTsKICAgIH0sCiAgICBzaG93U2VhcmNoUGFnZSgpIHsKICAgICAgdGhpcy5zZWFyY2hWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBoaWRlU2VhcmNoUGFnZSgpIHsKICAgICAgdGhpcy5zZWFyY2hWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuc2VhcmNoVGV4dCA9ICIiOwogICAgICB0aGlzLnNlYXJjaExpc3QgPSBudWxsOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["EbookSlideContent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EbookSlideContent.vue","sourceRoot":"src/components/ebook","sourcesContent":["<template>\n  <div class=\"ebook-slide-contents\">\n    <div class=\"slide-contents-search-wrapper\">\n      <div class=\"slide-contents-search-input-wrapper\">\n        <div class=\"slide-contents-search-icon\">\n          <span class=\"icon-search\"></span>\n        </div>\n        <input\n          class=\"slide-contents-search-input\"\n          type=\"text\"\n          v-model=\"searchText\"\n          :placeholder=\"$t('book.searchHint')\"\n          @keyup.enter.exact=\"search()\"\n          @click=\"showSearchPage\"\n        />\n      </div>\n      <div\n        class=\"slide-contents-search-cancel\"\n        v-if=\"searchVisible\"\n        @click=\"hideSearchPage()\"\n      >{{$t('book.cancel')}}</div>\n    </div>\n    <div class=\"slide-contents-book-wrapper\" v-show=\"!searchVisible\">\n      <div class=\"slide-contents-book-img-wrapper\">\n        <img :src=\"cover\" alt class=\"slide-contents-book-img\" />\n      </div>\n      <div class=\"slide-contents-book-info-wrapper\">\n        <div class=\"slide-contents-book-title\">{{metadata.title}}</div>\n        <div class=\"slide-contents-book-author\">{{metadata.creator}}</div>\n      </div>\n      <div class=\"slide-contents-book-progress-wrapper\">\n        <div class=\"slide-contents-book-progress\">\n          <span class=\"progress\">{{progress + '%'}}</span>\n          <span class=\"progress-text\">{{$t('book.haveRead2')}}</span>\n        </div>\n        <div class=\"slide-contents-book-time\">{{getReadTimeText()}}</div>\n      </div>\n    </div>\n    <scroll\n      class=\"slide-contents-list\"\n      ref=\"scroll\"\n      :top=\"156\"\n      :bottom=\"48\"\n      v-show=\"!searchVisible\"\n    >\n      <div class=\"slide-contents-item\" v-for=\"(item, index) in navigation\" :key=\"index\">\n        <span\n          class=\"slide-contents-item-lable\"\n          :class=\"{'selected':section===index}\"\n          @click=\"display(item.href),secik(index)\"\n        >{{item.label}}</span>\n        <span class=\"slide-contents-item-page\"></span>\n      </div>\n    </scroll>\n    <scroll class=\"slide-search-list\" :top=\"66\" :bottom=\"48\" v-show=\"searchVisible\">\n      <div\n        class=\"slide-search-item\"\n        v-for=\"(item, index) in searchList\"\n        :key=\"index\"\n        v-html=\"item.excerpt\"\n        @click=\"display(item.cfi), displaysearch(item.cfi,true)\"\n      ></div>\n    </scroll>\n  </div>\n</template>\n\n<script>\nimport scroll from \"../common/scroll.vue\";\nimport { ebookMinx } from \"../../utils/mixin.js\";\nexport default {\n  mixins: [ebookMinx],\n  components: {\n    scroll\n  },\n  data() {\n    return {\n      searchVisible: false,\n      searchText: \"\",\n      searchList: null\n    };\n  },\n  methods: {\n    search() {\n      if (this.searchText && this.searchText.length > 0) {\n        this.doSearch(this.searchText).then(res => {\n          this.searchList = res;\n          this.searchList.map(item => {\n            item.excerpt = item.excerpt.replace(\n              this.searchText,\n              `<span class=\"content-search-text\">${this.searchText}</span>`\n            );\n            return item;\n          });\n        });\n      }\n    },\n    doSearch(q) {\n      return Promise.all(\n        this.currentBook.spine.spineItems.map(section =>\n          section\n            .load(this.currentBook.load.bind(this.currentBook))\n            .then(section.find.bind(section, q))\n            .finally(section.unload.bind(section))\n        )\n      ).then(results => Promise.resolve([].concat.apply([], results)));\n    },\n    displaysearch(w, i) {\n      if (i) {\n        this.currentBook.rendition.annotations.highlight(w);\n      }\n      this.hideTitleAndMenu();\n    },\n    secik(i) {\n      this.setSection(i);\n      this.hideTitleAndMenu();\n    },\n    showSearchPage() {\n      this.searchVisible = true;\n    },\n    hideSearchPage() {\n      this.searchVisible = false;\n      this.searchText = \"\";\n      this.searchList = null;\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../assets/styles/global.scss\";\n.selected {\n  font-weight: bold;\n  color: aliceblue;\n}\n.ebook-slide-contents {\n  width: 100%;\n  font-size: 0;\n  .slide-contents-search-wrapper {\n    display: flex;\n    width: 100%;\n    height: px2rem(36);\n    margin: px2rem(20) 0 px2rem(10) 0;\n    padding: 0 px2rem(15);\n    box-sizing: border-box;\n    .slide-contents-search-input-wrapper {\n      flex: 1;\n      @include center;\n      .slide-contents-search-icon {\n        flex: 0 0 px2rem(28);\n        font-size: px2rem(12);\n        @include center;\n      }\n      .slide-contents-search-input {\n        flex: 1;\n        width: 100%;\n        height: px2rem(32);\n        font-size: px2rem(14);\n        background: transparent;\n        border: none;\n        &:focus {\n          outline: none;\n        }\n      }\n    }\n    .slide-contents-search-cancel {\n      flex: 0 0 px2rem(50);\n      font-size: px2rem(14);\n      @include right;\n    }\n  }\n  .slide-contents-book-wrapper {\n    display: flex;\n    width: 100%;\n    height: px2rem(90);\n    padding: px2rem(10) px2rem(15) px2rem(20) px2rem(15);\n    box-sizing: border-box;\n    .slide-contents-book-img-wrapper {\n      flex: 0 0 px2rem(45);\n      .slide-contents-book-img {\n        width: px2rem(45);\n        height: px2rem(60);\n      }\n    }\n    .slide-contents-book-info-wrapper {\n      flex: 1;\n      padding: 0 px2rem(10);\n      box-sizing: border-box;\n      .slide-contents-book-title {\n        width: px2rem(153.75);\n        font-size: px2rem(14);\n        @include ellipsis2(2);\n      }\n      .slide-contents-book-author {\n        margin-top: px2rem(5);\n        width: px2rem(153.75);\n        font-size: px2rem(12);\n        @include textSmall;\n      }\n    }\n    .slide-contents-book-progress-wrapper {\n      flex: 0 0 px2rem(70);\n      .slide-contents-book-progress {\n        .progress {\n          font-size: px2rem(14);\n        }\n        .progress-text {\n          font-size: px2rem(12);\n        }\n      }\n      .slide-contents-book-time {\n        font-size: px2rem(12);\n        margin-top: px2rem(5);\n      }\n    }\n  }\n  .slide-contents-list {\n    padding: 0 px2rem(15);\n    box-sizing: border-box;\n    .slide-contents-item {\n      padding: px2rem(20) 0;\n      box-sizing: border-box;\n      display: flex;\n      .slide-contents-item-lable {\n        flex: 1;\n        font-size: px2rem(14);\n        line-height: px2rem(16);\n        @include textSmall;\n      }\n      .slide-contents-item-page {\n      }\n    }\n  }\n  .slide-search-list {\n    width: 100%;\n    padding: 0 px2rem(15);\n    box-sizing: border-box;\n    .slide-search-item {\n      font-size: px2rem(14);\n      line-height: px2rem(16);\n      padding: px2rem(20) 0;\n      box-sizing: border-box;\n    }\n  }\n}\n</style>\n"]}]}