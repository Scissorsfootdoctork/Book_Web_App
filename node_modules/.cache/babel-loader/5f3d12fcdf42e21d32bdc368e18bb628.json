{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js!/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/ebook/EbookSlideContent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/ebook/EbookSlideContent.vue","mtime":1541580605000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.array.map\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { ebookMixin } from \"../../utils/mixin\";\nimport Scroll from \"../Scroll\";\nexport default {\n  mixins: [ebookMixin],\n  components: {\n    Scroll: Scroll\n  },\n  data: function data() {\n    return {\n      searchText: '',\n      searchVisible: false,\n      searchList: null\n    };\n  },\n  methods: {\n    showSearchPage: function showSearchPage() {\n      this.searchVisible = true;\n    },\n    hideSearchPage: function hideSearchPage() {\n      this.searchVisible = false;\n    },\n    search: function search() {\n      var _this = this;\n\n      this.doSearch(this.searchText).then(function (result) {\n        _this.searchList = result.map(function (item) {\n          item.excerpt = item.excerpt.replace(_this.searchText, \"<span class=\\\"content-search-text\\\">\".concat(_this.searchText, \"</span>\"));\n          return item;\n        });\n\n        _this.$refs.searchInput.blur();\n      });\n    },\n    doSearch: function doSearch(q) {\n      var _this2 = this;\n\n      return Promise.all(this.currentBook.spine.spineItems.map(function (item) {\n        return item.load(_this2.currentBook.load.bind(_this2.currentBook)).then(item.find.bind(item, q)).finally(item.unload.bind(item));\n      })).then(function (results) {\n        return Promise.resolve([].concat.apply([], results));\n      });\n    }\n  }\n};",{"version":3,"sources":["EbookSlideContent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA,SAAA,UAAA;AACA,OAAA,MAAA;AAEA,eAAA;AACA,EAAA,MAAA,EAAA,CAAA,UAAA,CADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,MAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,EADA;AAEA,MAAA,aAAA,EAAA,KAFA;AAGA,MAAA,UAAA,EAAA;AAHA,KAAA;AAKA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AACA,WAAA,aAAA,GAAA,IAAA;AACA,KAHA;AAIA,IAAA,cAJA,4BAIA;AACA,WAAA,aAAA,GAAA,KAAA;AACA,KANA;AAOA,IAAA,MAPA,oBAOA;AAAA;;AACA,WAAA,QAAA,CAAA,KAAA,UAAA,EAAA,IAAA,CAAA,UAAA,MAAA,EAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,MAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,UAAA,IAAA,CAAA,OAAA,GAAA,IAAA,CAAA,OAAA,CAAA,OAAA,CAAA,KAAA,CAAA,UAAA,gDAAA,KAAA,CAAA,UAAA,aAAA;AACA,iBAAA,IAAA;AACA,SAHA,CAAA;;AAIA,QAAA,KAAA,CAAA,KAAA,CAAA,WAAA,CAAA,IAAA;AACA,OANA;AAOA,KAfA;AAgBA,IAAA,QAhBA,oBAgBA,CAhBA,EAgBA;AAAA;;AACA,aAAA,OAAA,CAAA,GAAA,CACA,KAAA,WAAA,CAAA,KAAA,CAAA,UAAA,CAAA,GAAA,CACA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,IAAA,CAAA,MAAA,CAAA,WAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,CAAA,WAAA,CAAA,EAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,EAAA,CAAA,CAAA,EAAA,OAAA,CAAA,IAAA,CAAA,MAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CAAA;AAAA,OADA,CADA,EAGA,IAHA,CAGA,UAAA,OAAA;AAAA,eAAA,OAAA,CAAA,OAAA,CAAA,GAAA,MAAA,CAAA,KAAA,CAAA,EAAA,EAAA,OAAA,CAAA,CAAA;AAAA,OAHA,CAAA;AAIA;AArBA;AAZA,CAAA","sourcesContent":["<template>\n  <div class=\"ebook-slide-contents\">\n    <div class=\"slide-contents-search-wrapper\">\n      <div class=\"slide-contents-search-input-wrapper\">\n        <div class=\"slide-contents-search-icon\">\n          <span class=\"icon-search\"></span>\n        </div>\n        <input class=\"slide-contents-search-input\"\n               type=\"text\"\n               :placeholder=\"$t('book.searchHint')\"\n               @click=\"showSearchPage()\"\n               v-model=\"searchText\"\n               @keyup.enter=\"search()\"\n               ref=\"searchInput\">\n      </div>\n      <div class=\"slide-contents-search-cancel\" v-if=\"searchVisible\"\n           @click=\"hideSearchPage()\">{{$t('book.cancel')}}\n      </div>\n    </div>\n    <div class=\"slide-contents-book-wrapper\" v-show=\"!searchVisible\">\n      <div class=\"slide-contents-book-img-wrapper\">\n        <img v-lazy=\"cover\" class=\"slide-contents-book-img\">\n      </div>\n      <div class=\"slide-contents-book-info-wrapper\">\n        <div class=\"slide-contents-book-title\">\n          <span class=\"slide-contents-book-title-text\">{{metadata.title}}</span>\n        </div>\n        <div class=\"slide-contents-book-author\">\n          <span class=\"slide-contents-book-author-text\">{{metadata.creator}}</span>\n        </div>\n      </div>\n      <div class=\"slide-contents-book-progress-wrapper\">\n        <div class=\"slide-contents-book-progress\">\n          <span class=\"progress\">{{progress + '%'}}</span>\n          <span class=\"progress-text\">{{$t('book.haveRead2')}}</span>\n        </div>\n        <div class=\"slide-contents-book-time\">{{getReadTime()}}</div>\n      </div>\n    </div>\n    <scroll class=\"slide-contents-list\" :top=\"156\" :bottom=\"48\" ref=\"scroll\" v-show=\"!searchVisible\">\n      <div class=\"slide-contents-item\" v-for=\"(item, index) in navigation\" :key=\"index\" @click=\"display(item.href)\">\n        <span class=\"slide-contents-item-label\" :class=\"{'selected': section === index}\">{{item.label.trim()}}</span>\n        <span class=\"slide-contents-item-page\">{{item.page}}</span>\n      </div>\n    </scroll>\n    <scroll class=\"slide-search-list\" :top=\"66\" :bottom=\"48\" ref=\"scroll\" v-show=\"searchVisible\">\n      <div class=\"slide-search-item\" v-for=\"(item, index) in searchList\"\n           :key=\"index\" v-html=\"item.excerpt\" @click=\"display(item.cfi, true)\">\n      </div>\n    </scroll>\n  </div>\n</template>\n\n<script>\n  import { ebookMixin } from '../../utils/mixin'\n  import Scroll from '../Scroll'\n\n  export default {\n    mixins: [ebookMixin],\n    components: {\n      Scroll\n    },\n    data() {\n      return {\n        searchText: '',\n        searchVisible: false,\n        searchList: null\n      }\n    },\n    methods: {\n      showSearchPage() {\n        this.searchVisible = true\n      },\n      hideSearchPage() {\n        this.searchVisible = false\n      },\n      search() {\n        this.doSearch(this.searchText).then(result => {\n          this.searchList = result.map(item => {\n            item.excerpt = item.excerpt.replace(this.searchText, `<span class=\"content-search-text\">${this.searchText}</span>`)\n            return item\n          })\n          this.$refs.searchInput.blur()\n        })\n      },\n      doSearch(q) {\n        return Promise.all(\n          this.currentBook.spine.spineItems.map(\n            item => item.load(this.currentBook.load.bind(this.currentBook)).then(item.find.bind(item, q)).finally(item.unload.bind(item)))\n        ).then(results => Promise.resolve([].concat.apply([], results)))\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n  @import \"../../assets/styles/global\";\n  .ebook-slide-contents {\n    width: 100%;\n    font-size: 0;\n    .slide-contents-search-wrapper {\n      display: flex;\n      width: 100%;\n      height: px2rem(36);\n      margin: px2rem(20) 0 px2rem(10) 0;\n      padding: 0 px2rem(15);\n      box-sizing: border-box;\n      .slide-contents-search-input-wrapper {\n        flex: 1;\n        border-radius: px2rem(3);\n        @include center;\n        .slide-contents-search-icon {\n          flex: 0 0 px2rem(28);\n          @include center;\n          .icon-search {\n            font-size: px2rem(12);\n          }\n        }\n        .slide-contents-search-input {\n          flex: 1;\n          width: 100%;\n          height: px2rem(32);\n          font-size: px2rem(14);\n          background: transparent;\n          border: none;\n          &:focus {\n            outline: none;\n          }\n        }\n      }\n      .slide-contents-search-cancel {\n        flex: 0 0 px2rem(50);\n        font-size: px2rem(14);\n        @include right;\n      }\n    }\n    .slide-contents-book-wrapper {\n      display: flex;\n      width: 100%;\n      height: px2rem(90);\n      padding: px2rem(10) px2rem(15) px2rem(20) px2rem(15);\n      box-sizing: border-box;\n      .slide-contents-book-img-wrapper {\n        flex: 0 0 px2rem(45);\n        box-sizing: border-box;\n        .slide-contents-book-img {\n          width: px2rem(45);\n          height: px2rem(60);\n        }\n      }\n      .slide-contents-book-info-wrapper {\n        flex: 1;\n        @include columnLeft;\n        .slide-contents-book-title {\n          font-size: px2rem(14);\n          line-height: px2rem(16);\n          padding: 0 px2rem(10);\n          box-sizing: border-box;\n          @include left;\n          .slide-contents-book-title-text {\n            @include ellipsis2(1);\n          }\n        }\n        .slide-contents-book-author {\n          font-size: px2rem(12);\n          line-height: px2rem(14);\n          padding: 0 px2rem(10);\n          box-sizing: border-box;\n          margin-top: px2rem(5);\n          @include left;\n          .slide-contents-book-author-text {\n            @include ellipsis2(1);\n          }\n        }\n      }\n      .slide-contents-book-progress-wrapper {\n        flex: 0 0 px2rem(70);\n        @include columnLeft;\n        .slide-contents-book-progress {\n          .progress {\n            font-size: px2rem(14);\n            line-height: px2rem(16);\n          }\n          .progress-text {\n            font-size: px2rem(12);\n            line-height: px2rem(14);\n            margin-left: px2rem(2);\n          }\n        }\n        .slide-contents-book-time {\n          font-size: px2rem(12);\n          line-height: px2rem(14);\n          margin-top: px2rem(5);\n        }\n      }\n    }\n    .slide-contents-list {\n      padding: 0 px2rem(15);\n      box-sizing: border-box;\n      .slide-contents-item {\n        display: flex;\n        padding: px2rem(20) 0;\n        box-sizing: border-box;\n        .slide-contents-item-label {\n          flex: 1;\n          font-size: px2rem(14);\n          line-height: px2rem(16);\n          @include ellipsis;\n        }\n        .slide-contents-item-page {\n          flex: 0 0 px2rem(30);\n          font-size: px2rem(10);\n          @include right;\n        }\n      }\n    }\n    .slide-search-list {\n      padding: 0 px2rem(15);\n      box-sizing: border-box;\n      .slide-search-item {\n        font-size: px2rem(14);\n        line-height: px2rem(16);\n        padding: px2rem(20) 0;\n        box-sizing: border-box;\n      }\n    }\n  }\n</style>\n"],"sourceRoot":"src/components/ebook"}]}