{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js!/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/shelf/shelfTitle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/shelf/shelfTitle.vue","mtime":1590872998833},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHN0b3JlU2hlbGZNaXhpbiB9IGZyb20gJy4uLy4uL3V0aWxzL21peGluJzsKaW1wb3J0IHsgY2xlYXJMb2NhbFN0b3JhZ2UgfSBmcm9tICcuLi8uLi91dGlscy9sb2NhbHN0b3JhZ2UnOwppbXBvcnQgeyBjbGVhckxvY2FsRm9yYWdlIH0gZnJvbSAnLi4vLi4vdXRpbHMvbG9jYWxGb3JhZ2UnOwpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbc3RvcmVTaGVsZk1peGluXSwKICBuYW1lOiAnc2hlbGZUaXRsZScsCiAgcHJvcHM6IHsKICAgIHRpdGxlOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfSwKICAgIHNob3dCYWNrOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgc2VsZWN0ZWRUZXh0OiBmdW5jdGlvbiBzZWxlY3RlZFRleHQoKSB7CiAgICAgIHZhciBzZWxlY3RlZE51bWJlciA9IHRoaXMuc2hlbGZTZWxlY3RlZCA/IHRoaXMuc2hlbGZTZWxlY3RlZC5sZW5ndGggOiAwOwogICAgICByZXR1cm4gc2VsZWN0ZWROdW1iZXIgPD0gMCA/IHRoaXMuJHQoJ3NoZWxmLnNlbGVjdEJvb2snKSA6IHNlbGVjdGVkTnVtYmVyID09PSAxID8gdGhpcy4kdCgnc2hlbGYuaGF2ZVNlbGVjdGVkQm9vaycpLnJlcGxhY2UoJyQxJywgc2VsZWN0ZWROdW1iZXIpIDogdGhpcy4kdCgnc2hlbGYuaGF2ZVNlbGVjdGVkQm9va3MnKS5yZXBsYWNlKCckMScsIHNlbGVjdGVkTnVtYmVyKTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBvZmZzZXRZOiBmdW5jdGlvbiBvZmZzZXRZKHYpIHsKICAgICAgaWYgKHYgPiAwKSB7CiAgICAgICAgdGhpcy5pZkhpZGVTaGFkb3cgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlmSGlkZVNoYWRvdyA9IHRydWU7CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpZkhpZGVTaGFkb3c6IHRydWUKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBiYWNrOiBmdW5jdGlvbiBiYWNrKCkgewogICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOwogICAgfSwKICAgIG9uRWRpdENsaWNrOiBmdW5jdGlvbiBvbkVkaXRDbGljaygpIHsKICAgICAgaWYgKCF0aGlzLmlzRWRpdE1vZGUpIHsKICAgICAgICB0aGlzLnNldFNoZWxmU2VsZWN0ZWQoW10pOwogICAgICAgIHRoaXMuc2hlbGZMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIGl0ZW0uc2VsZWN0ZWQgPSBmYWxzZTsKICAgICAgICB9KTsgLy8gdGhpcy5DbGVhckNob29zZVN0YXRlKCkKICAgICAgICAvLyDkv67mlLlsaXN05Lit55qEU2VsZWN0ZWTmnaXljLrliKvmmK/lkKbooqvmt7vliqAKICAgICAgfQoKICAgICAgdGhpcy5zZXRJc0VkaXRNb2RlKCF0aGlzLmlzRWRpdE1vZGUpOwogICAgfSwKICAgIGNsZWFyQ2FjaGU6IGZ1bmN0aW9uIGNsZWFyQ2FjaGUoKSB7CiAgICAgIGNsZWFyTG9jYWxTdG9yYWdlKCk7CiAgICAgIGNsZWFyTG9jYWxGb3JhZ2UoKTsKICAgICAgdGhpcy5zZXRTaGVsZkxpc3QoW10pOwogICAgICB0aGlzLnNldFNoZWxmU2VsZWN0ZWQoW10pOwogICAgICBjb25zb2xlLmxvZygnMScpOwogICAgICB0aGlzLmdldFNoZWxmTGlzdCgpOwogICAgICBjb25zb2xlLmxvZygnMicpOwogICAgICB0aGlzLnNpbXBsZVRvYXN0KHRoaXMuJHQoJ3NoZWxmLmNsZWFyQ2FjaGVTdWNjZXNzJykpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["shelfTitle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,SAAA,eAAA,QAAA,mBAAA;AACA,SAAA,iBAAA,QAAA,0BAAA;AACA,SAAA,gBAAA,QAAA,yBAAA;AAEA,eAAA;AACA,EAAA,MAAA,EAAA,CAAA,eAAA,CADA;AAEA,EAAA,IAAA,EAAA,YAFA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA,KADA;AAIA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAJA,GAHA;AAYA,EAAA,QAAA,EAAA;AACA,IAAA,YADA,0BACA;AACA,UAAA,cAAA,GAAA,KAAA,aAAA,GAAA,KAAA,aAAA,CAAA,MAAA,GAAA,CAAA;AACA,aAAA,cAAA,IAAA,CAAA,GAAA,KAAA,EAAA,CAAA,kBAAA,CAAA,GAAA,cAAA,KAAA,CAAA,GAAA,KAAA,EAAA,CACA,wBADA,EACA,OADA,CACA,IADA,EACA,cADA,CAAA,GACA,KAAA,EAAA,CAAA,yBAAA,EACA,OADA,CACA,IADA,EACA,cADA,CADA;AAGA;AANA,GAZA;AAoBA,EAAA,KAAA,EAAA;AACA,IAAA,OADA,mBACA,CADA,EACA;AACA,UAAA,CAAA,GAAA,CAAA,EAAA;AACA,aAAA,YAAA,GAAA,KAAA;AACA,OAFA,MAEA;AACA,aAAA,YAAA,GAAA,IAAA;AACA;AACA;AAPA,GApBA;AA6BA,EAAA,IA7BA,kBA6BA;AACA,WAAA;AACA,MAAA,YAAA,EAAA;AADA,KAAA;AAGA,GAjCA;AAkCA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,WAAA,OAAA,CAAA,EAAA,CAAA,CAAA,CAAA;AACA,KAHA;AAIA,IAAA,WAJA,yBAIA;AACA,UAAA,CAAA,KAAA,UAAA,EAAA;AACA,aAAA,gBAAA,CAAA,EAAA;AACA,aAAA,SAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,UAAA,IAAA,CAAA,QAAA,GAAA,KAAA;AACA,SAFA,EAFA,CAKA;AACA;AACA;;AACA,WAAA,aAAA,CAAA,CAAA,KAAA,UAAA;AACA,KAdA;AAeA,IAAA,UAfA,wBAeA;AACA,MAAA,iBAAA;AACA,MAAA,gBAAA;AACA,WAAA,YAAA,CAAA,EAAA;AACA,WAAA,gBAAA,CAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,WAAA,YAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,WAAA,WAAA,CAAA,KAAA,EAAA,CAAA,yBAAA,CAAA;AACA;AAxBA;AAlCA,CAAA","sourcesContent":["<template>\n    <transition name=\"fade\">\n        <div class=\"shelf-title\" v-show=\"shelfTitleVisible\" :class=\"{'hide-shadow':ifHideShadow}\">\n            <div class=\"shelf-text-wrapper\">\n                <span class=\"shelf-title-text\">{{title}}</span>\n                <span class=\"shelf-title-sub-text\" v-show=\"isEditMode\">{{selectedText}}</span>\n            </div>\n            <div class=\"shelf-title-btn-wrapper shelf-title-left\" v-if=\"!showBack\">\n                <div class=\"shelf-title-btn-text\" @click=\"clearCache()\">\n                    {{this.$t('shelf.clearCache')}}\n                </div>\n            </div>\n            <div class=\"shelf-title-btn-wrapper shelf-title-right\">\n                <div class=\"shelf-title-btn-text\" @click=\"onEditClick()\">\n                    {{ isEditMode ? this.$t('shelf.cancel') : this.$t('shelf.edit')}}\n                </div>\n            </div>\n            <div class=\"shelf-title-btn-wrapper shelf-title-left\" v-if=\"showBack\">\n                <span class=\"icon-back\" @click=\"back\"></span>\n            </div>\n        </div>\n    </transition>\n</template>\n\n<script>\n    import { storeShelfMixin } from '../../utils/mixin'\n    import { clearLocalStorage } from '../../utils/localstorage'\n    import { clearLocalForage } from '../../utils/localForage'\n\n    export default {\n        mixins: [storeShelfMixin],\n        name: 'shelfTitle',\n        props: {\n            title: {\n                type: String\n            },\n            showBack: {\n                type: Boolean,\n                default: false\n            }\n        },\n        computed: {\n            selectedText() {\n                const selectedNumber = this.shelfSelected ? this.shelfSelected.length : 0\n                return selectedNumber <= 0 ? this.$t('shelf.selectBook') : (selectedNumber === 1 ? this.$t(\n                      'shelf.haveSelectedBook').replace('$1', selectedNumber) : this.$t('shelf.haveSelectedBooks')\n                .replace('$1', selectedNumber))\n            }\n        },\n        watch: {\n            offsetY(v) {\n                if (v > 0) {\n                    this.ifHideShadow = false\n                } else {\n                    this.ifHideShadow = true\n                }\n            }\n        },\n        data() {\n            return {\n                ifHideShadow: true\n            }\n        },\n        methods: {\n            back() {\n                this.$router.go(-1)\n            },\n            onEditClick() {\n                if (!this.isEditMode) {\n                    this.setShelfSelected([])\n                    this.shelfList.forEach((item) => {\n                        item.selected = false\n                    })\n                    // this.ClearChooseState()\n                    // 修改list中的Selected来区别是否被添加\n                }\n                this.setIsEditMode(!this.isEditMode)\n            },\n            clearCache() {\n                clearLocalStorage()\n                clearLocalForage()\n                this.setShelfList([])\n                this.setShelfSelected([])\n                console.log('1')\n                this.getShelfList()\n                console.log('2')\n                this.simpleToast(this.$t('shelf.clearCacheSuccess'))\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"scss\">\n    @import \"../../assets/styles/global\";\n\n    .icon-back {\n        font-size: px2rem(20);\n        color: #666666;\n    }\n\n    .shelf-title {\n        z-index: 130;\n        position: relative;\n        width: 100%;\n        height: px2rem(42);\n        background: white;\n        box-shadow: 0 px2rem(2) px2rem(2) 0 rgba(0, 0, 0, .1);\n\n        &.hide-shadow {\n            box-shadow: none;\n        }\n\n        .shelf-text-wrapper {\n            position: absolute;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: px2rem(42);\n            @include columnCenter;\n\n            .shelf-title-text {\n                font-size: px2rem(16);\n                line-height: px2rem(20);\n                font-weight: bold;\n                color: #333333;\n            }\n\n            .shelf-title-sub-text {\n                font-size: px2rem(16);\n                color: #333333;\n            }\n\n        }\n\n        .shelf-title-btn-wrapper {\n            position: absolute;\n            top: 0;\n            box-sizing: border-box;\n            height: 100%;\n            @include center;\n\n            .shelf-title-btn-text {\n                font-size: px2rem(14);\n                color: #666666;\n            }\n\n            &.shelf-title-left {\n                left: 0;\n                padding-left: px2rem(15);\n            }\n\n            &.shelf-title-right {\n                right: 0;\n                padding-right: px2rem(15);\n            }\n        }\n    }\n</style>\n"],"sourceRoot":"src/components/shelf"}]}