{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js!/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/views/store/StoreList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/views/store/StoreList.vue","mtime":1589128627616},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgRGV0YWlsVGl0bGUgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9kZXRhaWwvRGV0YWlUaXRsZSc7CmltcG9ydCBTY3JvbGwgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9jb21tb24vc2Nyb2xsJzsKaW1wb3J0IEZlYXR1cmVkIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvaG9tZS9GZWF0dXJlZCc7CmltcG9ydCB7IHJlYWxQeCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJzsKaW1wb3J0IHsgbGlzdCB9IGZyb20gJy4uLy4uL2FwaS9zdG9yZSc7CmltcG9ydCB7IGNhdGVnb3J5TGlzdCwgY2F0ZWdvcnlUZXh0IH0gZnJvbSAnLi4vLi4vdXRpbHMvc3RvcmUnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgRGV0YWlsVGl0bGU6IERldGFpbFRpdGxlLAogICAgU2Nyb2xsOiBTY3JvbGwsCiAgICBGZWF0dXJlZDogRmVhdHVyZWQKICB9LAogIGNvbXB1dGVkOiB7CiAgICB0aXRsZTogZnVuY3Rpb24gdGl0bGUoKSB7CiAgICAgIGlmICh0aGlzLmxpc3QpIHsKICAgICAgICByZXR1cm4gdGhpcy50b3RhbCAmJiB0aGlzLiR0KCdob21lLmFsbEJvb2snKS5yZXBsYWNlKCckMScsIHRoaXMudG90YWxOdW1iZXIpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9LAogICAgdG90YWxOdW1iZXI6IGZ1bmN0aW9uIHRvdGFsTnVtYmVyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG51bSA9IDA7CiAgICAgIE9iamVjdC5rZXlzKHRoaXMubGlzdCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgbnVtICs9IF90aGlzLmxpc3Rba2V5XS5sZW5ndGg7CiAgICAgIH0pOwogICAgICByZXR1cm4gbnVtOwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IG51bGwsCiAgICAgIHRvdGFsOiBudWxsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0Q2F0ZWdvcnlUZXh0OiBmdW5jdGlvbiBnZXRDYXRlZ29yeVRleHQoa2V5KSB7CiAgICAgIHJldHVybiAiIi5jb25jYXQoY2F0ZWdvcnlUZXh0KGNhdGVnb3J5TGlzdFtrZXldLCB0aGlzKSwgIigiKS5jb25jYXQodGhpcy5saXN0W2tleV0ubGVuZ3RoLCAiKSIpOwogICAgfSwKICAgIGJhY2s6IGZ1bmN0aW9uIGJhY2soKSB7CiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICB9LAogICAgb25TY3JvbGw6IGZ1bmN0aW9uIG9uU2Nyb2xsKG9mZnNldFkpIHsKICAgICAgaWYgKG9mZnNldFkgPiByZWFsUHgoNDIpKSB7CiAgICAgICAgdGhpcy4kcmVmcy50aXRsZS5zaG93U2hhZG93KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcmVmcy50aXRsZS5oaWRlU2hhZG93KCk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGxpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi5saXN0ID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgIF90aGlzMi50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7CiAgICAgICAgdmFyIGNhdGVnb3J5ID0gX3RoaXMyLiRyb3V0ZS5xdWVyeS5jYXRlZ29yeTsKICAgICAgICB2YXIga2V5d29yZCA9IF90aGlzMi4kcm91dGUucXVlcnkua2V5d29yZDsKCiAgICAgICAgaWYgKGNhdGVnb3J5KSB7CiAgICAgICAgICB2YXIga2V5ID0gT2JqZWN0LmtleXMoX3RoaXMyLmxpc3QpLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gaXRlbSA9PT0gY2F0ZWdvcnk7CiAgICAgICAgICB9KVswXTsKICAgICAgICAgIHZhciBkYXRhID0gX3RoaXMyLmxpc3Rba2V5XTsKICAgICAgICAgIF90aGlzMi5saXN0ID0ge307CiAgICAgICAgICBfdGhpczIubGlzdFtrZXldID0gZGF0YTsKICAgICAgICB9IGVsc2UgaWYgKGtleXdvcmQpIHsKICAgICAgICAgIE9iamVjdC5rZXlzKF90aGlzMi5saXN0KS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICBfdGhpczIubGlzdFtrZXldID0gX3RoaXMyLmxpc3Rba2V5XS5maWx0ZXIoZnVuY3Rpb24gKGJvb2spIHsKICAgICAgICAgICAgICByZXR1cm4gYm9vay5maWxlTmFtZS5pbmRleE9mKGtleXdvcmQpID49IDA7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gX3RoaXMyLmxpc3Rba2V5XS5sZW5ndGggPiAwOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICAgIHRoaXMudGl0bGVUZXh0ID0gdGhpcy4kcm91dGUucXVlcnkuY2F0ZWdvcnlUZXh0OwogIH0KfTs="},{"version":3,"sources":["StoreList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"book-list-wrapper\">\n    <detail-title :title=\"title\"\n                  :showShelf=\"true\"\n                  @back=\"back\"\n                  ref=\"title\"></detail-title>\n    <scroll class=\"book-list-scroll-wrapper\"\n            :top=\"42\"\n            @onScroll=\"onScroll\"\n            ref=\"scroll\">\n      <featured :data=\"value\" :titleText=\"titleText ? titleText : getCategoryText(key)\" :btnText=\"''\" v-for=\"(value, key, index) in list\"\n                :key=\"index\"></featured>\n    </scroll>\n  </div>\n</template>\n\n<script>\nimport DetailTitle from '../../components/detail/DetaiTitle'\nimport Scroll from '../../components/common/scroll'\nimport Featured from '../../components/home/Featured'\nimport { realPx } from '../../utils/utils'\nimport { list } from '../../api/store'\nimport { categoryList, categoryText } from '../../utils/store'\n\nexport default {\n  components: {\n    DetailTitle,\n    Scroll,\n    Featured\n  },\n  computed: {\n    title () {\n      if (this.list) {\n        return this.total && this.$t('home.allBook').replace('$1', this.totalNumber)\n      } else {\n        return null\n      }\n    },\n    totalNumber () {\n      let num = 0\n      Object.keys(this.list).forEach(key => {\n        num += this.list[key].length\n      })\n      return num\n    }\n  },\n  data () {\n    return {\n      list: null,\n      total: null\n    }\n  },\n  methods: {\n    getCategoryText (key) {\n      return `${categoryText(categoryList[key], this)}(${this.list[key].length})`\n    },\n    back () {\n      this.$router.go(-1)\n    },\n    onScroll (offsetY) {\n      if (offsetY > realPx(42)) {\n        this.$refs.title.showShadow()\n      } else {\n        this.$refs.title.hideShadow()\n      }\n    },\n    getList () {\n      list().then(response => {\n        this.list = response.data.data\n        this.total = response.data.total\n        const category = this.$route.query.category\n        const keyword = this.$route.query.keyword\n        if (category) {\n          const key = Object.keys(this.list).filter(item => item === category)[0]\n          const data = this.list[key]\n          this.list = {}\n          this.list[key] = data\n        } else if (keyword) {\n          Object.keys(this.list).filter(key => {\n            this.list[key] = this.list[key].filter(book => book.fileName.indexOf(keyword) >= 0)\n            return this.list[key].length > 0\n          })\n        }\n      })\n    }\n  },\n  created () {\n    this.getList()\n    this.titleText = this.$route.query.categoryText\n  }\n}\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n  @import \"../../assets/styles/global\";\n\n  .book-list-wrapper {\n    width: 100%;\n    height: 100%;\n    background: white;\n  }\n</style>\n"],"sourceRoot":"src/views/store"}]}