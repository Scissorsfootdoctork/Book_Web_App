{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js!/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/ebook/EbookBookMark.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/ebook/EbookBookMark.vue","mtime":1589128909822},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgcmVhbFB4IH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMuanMnOwppbXBvcnQgeyBlYm9va01pbnggfSBmcm9tICcuLi8uLi91dGlscy9taXhpbi5qcyc7CmltcG9ydCBCb29rbWFyayBmcm9tICcuLi9jb21tb24vQm9va21hcmsudnVlJzsKaW1wb3J0IHsgZ2V0Qm9va21hcmssIHNhdmVCb29rbWFyayB9IGZyb20gJy4uLy4uL3V0aWxzL2xvY2Fsc3RvcmFnZS5qcyc7CnZhciBCTFVFID0gJyMzNDZjYmMnOwp2YXIgV0hJVEUgPSAnI2ZmZmZmZic7CmV4cG9ydCBkZWZhdWx0IHsKICBtaXhpbnM6IFtlYm9va01pbnhdLAogIGNvbXBvbmVudHM6IHsKICAgIEJvb2ttYXJrOiBCb29rbWFyawogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRleHQ6ICcnLAogICAgICBjb2xvcjogV0hJVEUsCiAgICAgIGlzRml4ZWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGhlaWdodDogZnVuY3Rpb24gaGVpZ2h0KCkgewogICAgICByZXR1cm4gcmVhbFB4KDM1KTsKICAgIH0sCiAgICB0aHJlc2hvbGQ6IGZ1bmN0aW9uIHRocmVzaG9sZCgpIHsKICAgICAgcmV0dXJuIHJlYWxQeCg1NSk7CiAgICB9LAogICAgRml4ZWRTdHlsZTogZnVuY3Rpb24gRml4ZWRTdHlsZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJywKICAgICAgICB0b3A6ICcwJywKICAgICAgICByaWdodDogIiIuY29uY2F0KCh3aW5kb3cuaW5uZXJXaWR0aCAtIHRoaXMuJHJlZnMuYm9va21hcmsuY2xpZW50V2lkdGgpIC8gMikKICAgICAgfTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGJlZm9yZUhlaWdodDogZnVuY3Rpb24gYmVmb3JlSGVpZ2h0KHYpIHsKICAgICAgLy8gc3RhdGVPbmUKICAgICAgaWYgKHRoaXMuaXNCb29rbWFyaykgewogICAgICAgIHRoaXMudGV4dCA9IHRoaXMuJHQoJ2Jvb2sucHVsbGRvd25EZWxldGVNYXJrJyk7CiAgICAgICAgdGhpcy5jb2xvciA9IEJMVUU7CiAgICAgICAgdGhpcy5pc0ZpeGVkID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnRleHQgPSB0aGlzLiR0KCdib29rLnB1bGxkb3duQWRkTWFyaycpOwogICAgICAgIHRoaXMuY29sb3IgPSBXSElURTsKICAgICAgICB0aGlzLmlzRml4ZWQgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGJlZm9yZVRocmVzaG9sZDogZnVuY3Rpb24gYmVmb3JlVGhyZXNob2xkKHYpIHsKICAgICAgLy8gc3RhdGVUd28KICAgICAgdGhpcy4kcmVmcy5ib29rbWFyay5zdHlsZS50b3AgPSAiIi5jb25jYXQoLXYsICJweCIpOwoKICAgICAgaWYgKHRoaXMuaXNCb29rbWFyaykgewogICAgICAgIHRoaXMudGV4dCA9IHRoaXMuJHQoJ2Jvb2sucHVsbGRvd25EZWxldGVNYXJrJyk7CiAgICAgICAgdGhpcy5jb2xvciA9IEJMVUU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy50ZXh0ID0gdGhpcy4kdCgnYm9vay5wdWxsZG93bkFkZE1hcmsnKTsKICAgICAgICB0aGlzLmNvbG9yID0gV0hJVEU7CiAgICAgIH0KCiAgICAgIHZhciBpY29uRG93biA9IHRoaXMuJHJlZnMuaWNvbmRvd247CgogICAgICBpZiAoaWNvbkRvd24uc3R5bGUudHJhbnNmb3JtID09PSAncm90YXRlKDE4MGRlZyknKSB7CiAgICAgICAgaWNvbkRvd24uc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZSgwZGVnKSc7CiAgICAgIH0KICAgIH0sCiAgICBhZnRlclRocmVzaG9sZDogZnVuY3Rpb24gYWZ0ZXJUaHJlc2hvbGQodikgewogICAgICAvLyBzdGF0ZVRocmVlCiAgICAgIHRoaXMuJHJlZnMuYm9va21hcmsuc3R5bGUudG9wID0gIiIuY29uY2F0KC12LCAicHgiKTsKCiAgICAgIGlmICh0aGlzLmlzQm9va21hcmspIHsKICAgICAgICB0aGlzLnRleHQgPSB0aGlzLiR0KCdib29rLnJlbGVhc2VEZWxldGVNYXJrJyk7CiAgICAgICAgdGhpcy5pc0ZpeGVkID0gZmFsc2U7CiAgICAgICAgdGhpcy5jb2xvciA9IFdISVRFOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudGV4dCA9IHRoaXMuJHQoJ2Jvb2sucmVsZWFzZUFkZE1hcmsnKTsKICAgICAgICB0aGlzLmlzRml4ZWQgPSB0cnVlOwogICAgICAgIHRoaXMuY29sb3IgPSBCTFVFOwogICAgICB9CgogICAgICB2YXIgaWNvbkRvd24gPSB0aGlzLiRyZWZzLmljb25kb3duOwoKICAgICAgaWYgKGljb25Eb3duLnN0eWxlLnRyYW5zZm9ybSA9PT0gJycgfHwgaWNvbkRvd24uc3R5bGUudHJhbnNmb3JtID09PSAncm90YXRlKDBkZWcpJykgewogICAgICAgIGljb25Eb3duLnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGUoMTgwZGVnKSc7CiAgICAgIH0KICAgIH0sCiAgICByZXN0b3JlOiBmdW5jdGlvbiByZXN0b3JlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8gc3RhdGVGb3VyCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLiRyZWZzLmJvb2ttYXJrLnN0eWxlLnRvcCA9ICckIHsgLXRoaXMuaGVpZ2h0IH1weCc7CiAgICAgICAgX3RoaXMuJHJlZnMuaWNvbmRvd24uc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZSgwZGVnKSc7CiAgICAgIH0sIDIwMCk7CgogICAgICBpZiAodGhpcy5pc0ZpeGVkKSB7CiAgICAgICAgdGhpcy5zZXRJc0Jvb2ttYXJrKHRydWUpOwogICAgICAgIHRoaXMuYWRkQm9va21hcmsoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNldElzQm9va21hcmsoZmFsc2UpOwogICAgICAgIHRoaXMucmVtb3ZlQm9va21hcmsoKTsKICAgICAgfQogICAgfSwKICAgIGFkZEJvb2ttYXJrOiBmdW5jdGlvbiBhZGRCb29rbWFyaygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmJvb2ttYXJrID0gZ2V0Qm9va21hcmsodGhpcy5maWxlTmFtZSk7CgogICAgICBpZiAoIXRoaXMuYm9va21hcmspIHsKICAgICAgICB0aGlzLmJvb2ttYXJrID0gW107CiAgICAgIH0KCiAgICAgIHZhciBjdXJyZW50TG9jYXRpb24gPSB0aGlzLmN1cnJlbnRCb29rLnJlbmRpdGlvbi5jdXJyZW50TG9jYXRpb24oKTsKICAgICAgdmFyIGNmaUJhc2UgPSBjdXJyZW50TG9jYXRpb24uc3RhcnQuY2ZpLnJlcGxhY2UoLyEuKi8sICcnKTsKICAgICAgdmFyIGNmaVN0YXJ0ID0gY3VycmVudExvY2F0aW9uLnN0YXJ0LmNmaS5yZXBsYWNlKC8uKiEvLCAnJykucmVwbGFjZSgvXCkkLywgJycpOwogICAgICB2YXIgY2ZpRW5kID0gY3VycmVudExvY2F0aW9uLmVuZC5jZmkucmVwbGFjZSgvLiohLywgJycpLnJlcGxhY2UoL1wpJC8sICcnKTsKICAgICAgdmFyIGNmaVJhbmdlID0gIiIuY29uY2F0KGNmaUJhc2UsICIhLCIpLmNvbmNhdChjZmlTdGFydCwgIiwiKS5jb25jYXQoY2ZpRW5kLCAiKSIpOwogICAgICB0aGlzLmN1cnJlbnRCb29rLmdldFJhbmdlKGNmaVJhbmdlKS50aGVuKGZ1bmN0aW9uIChyYW5nZSkgewogICAgICAgIHZhciB0ZXh0ID0gcmFuZ2UudG9TdHJpbmcoKS5yZXBsYWNlKC9cc1xzL2csICcnKTsKCiAgICAgICAgX3RoaXMyLmJvb2ttYXJrLnB1c2goewogICAgICAgICAgY2ZpOiBjdXJyZW50TG9jYXRpb24uc3RhcnQuY2ZpLAogICAgICAgICAgdGV4dDogdGV4dAogICAgICAgIH0pOwoKICAgICAgICBzYXZlQm9va21hcmsoX3RoaXMyLmZpbGVOYW1lLCBfdGhpczIuYm9va21hcmspOwogICAgICB9KTsKICAgIH0sCiAgICByZW1vdmVCb29rbWFyazogZnVuY3Rpb24gcmVtb3ZlQm9va21hcmsoKSB7CiAgICAgIHZhciBjdXJyZW50TG9jYXRpb24gPSB0aGlzLmN1cnJlbnRCb29rLnJlbmRpdGlvbi5jdXJyZW50TG9jYXRpb24oKTsKICAgICAgdmFyIGNmaSA9IGN1cnJlbnRMb2NhdGlvbi5zdGFydC5jZmk7CiAgICAgIHRoaXMuYm9va21hcmsgPSBnZXRCb29rbWFyayh0aGlzLmZpbGVOYW1lKTsKCiAgICAgIGlmICh0aGlzLmJvb2ttYXJrKSB7CiAgICAgICAgdGhpcy5ib29rbWFyayA9IHRoaXMuYm9va21hcmsuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gaXRlbS5jZmkgIT09IGNmaTsKICAgICAgICB9KTsKICAgICAgICBzYXZlQm9va21hcmsodGhpcy5maWxlTmFtZSwgdGhpcy5ib29rbWFyayk7CiAgICAgICAgdGhpcy5zZXRJc0Jvb2ttYXJrKGZhbHNlKTsKICAgICAgfQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIG9mZnNldFk6IGZ1bmN0aW9uIG9mZnNldFkodikgewogICAgICBpZiAoIXRoaXMuYm9va0F2YWlsYWJsZSB8fCB0aGlzLm1lbnVWaXNpYmxlIHx8IHRoaXMuc2V0dGluZ1Zpc2libGUgPj0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHYgPj0gdGhpcy5oZWlnaHQgJiYgdiA8IHRoaXMudGhyZXNob2xkKSB7CiAgICAgICAgdGhpcy5iZWZvcmVUaHJlc2hvbGQodik7CiAgICAgIH0gZWxzZSBpZiAodiA+PSB0aGlzLnRocmVzaG9sZCkgewogICAgICAgIHRoaXMuYWZ0ZXJUaHJlc2hvbGQodik7CiAgICAgIH0gZWxzZSBpZiAodiA+IDAgJiYgdiA8IHRoaXMuaGVpZ2h0KSB7CiAgICAgICAgdGhpcy5iZWZvcmVIZWlnaHQoKTsKICAgICAgfSBlbHNlIGlmICh2ID09PSAwKSB7CiAgICAgICAgdGhpcy5yZXN0b3JlKCk7CiAgICAgIH0KICAgIH0sCiAgICBpc0Jvb2ttYXJrOiBmdW5jdGlvbiBpc0Jvb2ttYXJrKF9pc0Jvb2ttYXJrKSB7CiAgICAgIGlmIChfaXNCb29rbWFyaykgewogICAgICAgIHRoaXMuY29sb3IgPSBCTFVFOwogICAgICAgIHRoaXMuaXNGaXhlZCA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jb2xvciA9IFdISVRFOwogICAgICAgIHRoaXMuaXNGaXhlZCA9IGZhbHNlOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["EbookBookMark.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"ebook-bookmark\" ref=\"bookmark\">\n    <div class=\"ebook-bookmark-text-wrapper\">\n      <div class=\"ebook-bookmark-down-wrapper\" ref=\"icondown\">\n        <span class=\"icon-down\"></span>\n      </div>\n      <div class=\"ebook-bookmark-text\">{{ text }}</div>\n    </div>\n    <div class=\"ebook-bookmark-icon-wrapper\" :style=\"isFixed ? FixedStyle : {}\">\n      <Bookmark :color=\"color\" :width=\"15\" :height=\"35\"></Bookmark>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { realPx } from '../../utils/utils.js'\nimport { ebookMinx } from '../../utils/mixin.js'\nimport Bookmark from '../common/Bookmark.vue'\nimport { getBookmark, saveBookmark } from '../../utils/localstorage.js'\n\nconst BLUE = '#346cbc'\nconst WHITE = '#ffffff'\nexport default {\n  mixins: [ebookMinx],\n  components: {\n    Bookmark\n  },\n  data () {\n    return {\n      text: '',\n      color: WHITE,\n      isFixed: false\n    }\n  },\n  computed: {\n    height () {\n      return realPx(35)\n    },\n    threshold () {\n      return realPx(55)\n    },\n    FixedStyle () {\n      return {\n        position: 'fixed',\n        top: '0',\n        right: `${(window.innerWidth - this.$refs.bookmark.clientWidth) / 2}`\n      }\n    }\n  },\n  methods: {\n    beforeHeight (v) {\n      // stateOne\n      if (this.isBookmark) {\n        this.text = this.$t('book.pulldownDeleteMark')\n        this.color = BLUE\n        this.isFixed = true\n      } else {\n        this.text = this.$t('book.pulldownAddMark')\n        this.color = WHITE\n        this.isFixed = false\n      }\n    },\n    beforeThreshold (v) {\n      // stateTwo\n      this.$refs.bookmark.style.top = `${-v}px`\n      if (this.isBookmark) {\n        this.text = this.$t('book.pulldownDeleteMark')\n        this.color = BLUE\n      } else {\n        this.text = this.$t('book.pulldownAddMark')\n        this.color = WHITE\n      }\n\n      const iconDown = this.$refs.icondown\n      if (iconDown.style.transform === 'rotate(180deg)') {\n        iconDown.style.transform = 'rotate(0deg)'\n      }\n    },\n    afterThreshold (v) {\n      // stateThree\n      this.$refs.bookmark.style.top = `${-v}px`\n      if (this.isBookmark) {\n        this.text = this.$t('book.releaseDeleteMark')\n        this.isFixed = false\n        this.color = WHITE\n      } else {\n        this.text = this.$t('book.releaseAddMark')\n        this.isFixed = true\n        this.color = BLUE\n      }\n      const iconDown = this.$refs.icondown\n      if (\n        iconDown.style.transform === '' ||\n        iconDown.style.transform === 'rotate(0deg)'\n      ) {\n        iconDown.style.transform = 'rotate(180deg)'\n      }\n    },\n    restore () {\n      // stateFour\n      setTimeout(() => {\n        this.$refs.bookmark.style.top = '$ { -this.height }px'\n        this.$refs.icondown.style.transform = 'rotate(0deg)'\n      }, 200)\n      if (this.isFixed) {\n        this.setIsBookmark(true)\n        this.addBookmark()\n      } else {\n        this.setIsBookmark(false)\n        this.removeBookmark()\n      }\n    },\n    addBookmark () {\n      this.bookmark = getBookmark(this.fileName)\n      if (!this.bookmark) {\n        this.bookmark = []\n      }\n      const currentLocation = this.currentBook.rendition.currentLocation()\n      const cfiBase = currentLocation.start.cfi.replace(/!.*/, '')\n      const cfiStart = currentLocation.start.cfi\n        .replace(/.*!/, '')\n        .replace(/\\)$/, '')\n      const cfiEnd = currentLocation.end.cfi\n        .replace(/.*!/, '')\n        .replace(/\\)$/, '')\n      const cfiRange = `${cfiBase}!,${cfiStart},${cfiEnd})`\n      this.currentBook.getRange(cfiRange).then(range => {\n        const text = range.toString().replace(/\\s\\s/g, '')\n        this.bookmark.push({\n          cfi: currentLocation.start.cfi,\n          text: text\n        })\n        saveBookmark(this.fileName, this.bookmark)\n      })\n    },\n    removeBookmark () {\n      const currentLocation = this.currentBook.rendition.currentLocation()\n      const cfi = currentLocation.start.cfi\n      this.bookmark = getBookmark(this.fileName)\n      if (this.bookmark) {\n        this.bookmark = this.bookmark.filter(item => item.cfi !== cfi)\n        saveBookmark(this.fileName, this.bookmark)\n        this.setIsBookmark(false)\n      }\n    }\n  },\n  watch: {\n    offsetY (v) {\n      if (!this.bookAvailable || this.menuVisible || this.settingVisible >= 0) {\n        return\n      }\n      if (v >= this.height && v < this.threshold) {\n        this.beforeThreshold(v)\n      } else if (v >= this.threshold) {\n        this.afterThreshold(v)\n      } else if (v > 0 && v < this.height) {\n        this.beforeHeight()\n      } else if (v === 0) {\n        this.restore()\n      }\n    },\n    isBookmark (isBookmark) {\n      if (isBookmark) {\n        this.color = BLUE\n        this.isFixed = true\n      } else {\n        this.color = WHITE\n        this.isFixed = false\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../assets/styles/global.scss\";\n\n.ebook-bookmark {\n  position: absolute;\n  top: px2rem(-35);\n  left: 0;\n  width: 100%;\n  height: px2rem(35);\n  z-index: 200;\n\n  .ebook-bookmark-text-wrapper {\n    position: absolute;\n    right: px2rem(45);\n    bottom: 0;\n    display: flex;\n\n    .ebook-bookmark-down-wrapper {\n      font-size: px2rem(14);\n      color: white;\n      transition: all 0.2s linear;\n      @include center;\n    }\n\n    .ebook-bookmark-text {\n      font-size: px2rem(14);\n      color: white;\n    }\n  }\n\n  .ebook-bookmark-icon-wrapper {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    margin-right: px2rem(15);\n  }\n}\n</style>\n"],"sourceRoot":"src/components/ebook"}]}