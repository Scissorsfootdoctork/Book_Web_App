{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js!/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/ebook/EbookReder.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/ebook/EbookReder.vue","mtime":1583689560723},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZWJvb2tNaW54IH0gZnJvbSAiLi4vLi4vdXRpbHMvbWl4aW4iOwppbXBvcnQgeyBnZXRGb250RmFtaWx5LCBzYXZlRm9udEZhbWlseSwgZ2V0Rm9udFNpemUsIHNhdmVGb250U2l6ZSwgZ2V0VGhlbWUsIHNhdmVUaGVtZSB9IGZyb20gIi4uLy4uL3V0aWxzL2xvY2Fsc3RvcmFnZS5qcyI7CmltcG9ydCBFcHViIGZyb20gImVwdWJqcyI7Cmdsb2JhbC5lcHViID0gRXB1YjsKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW2Vib29rTWlueF0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRvdWNoU3RhcnQ6ICIiLAogICAgICB0b3VjaFRpbWU6ICIiCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcHJldlBhZ2U6IGZ1bmN0aW9uIHByZXZQYWdlKCkgewogICAgICBpZiAodGhpcy5yZW5kaXRpb24pIHsKICAgICAgICB0aGlzLnJlbmRpdGlvbi5wcmV2KCk7CiAgICAgICAgdGhpcy5oaWRlVGl0bGVBbmRNZW51KCk7CiAgICAgIH0KICAgIH0sCiAgICBuZXh0UGFnZTogZnVuY3Rpb24gbmV4dFBhZ2UoKSB7CiAgICAgIGlmICh0aGlzLnJlbmRpdGlvbikgewogICAgICAgIHRoaXMucmVuZGl0aW9uLm5leHQoKTsKICAgICAgICB0aGlzLmhpZGVUaXRsZUFuZE1lbnUoKTsKICAgICAgfQogICAgfSwKICAgIHNob3dUaXRsZUFuZE1lbnU6IGZ1bmN0aW9uIHNob3dUaXRsZUFuZE1lbnUoKSB7CiAgICAgIGlmICh0aGlzLm1lbnVWaXNpYmxlKSB7CiAgICAgICAgdGhpcy5zZXRTZXR0aW5nVmlzaWJsZSgtMSk7CiAgICAgICAgdGhpcy5zZXRGb250RmFtaWx5VmlzaWJsZShmYWxzZSk7CiAgICAgIH0KCiAgICAgIHRoaXMuc2V0TWVudVZpc2libGUoIXRoaXMubWVudVZpc2libGUpOwogICAgfSwKICAgIGhpZGVUaXRsZUFuZE1lbnU6IGZ1bmN0aW9uIGhpZGVUaXRsZUFuZE1lbnUoKSB7CiAgICAgIHRoaXMuc2V0TWVudVZpc2libGUoZmFsc2UpOwogICAgICB0aGlzLnNldEZvbnRGYW1pbHlWaXNpYmxlKGZhbHNlKTsKICAgICAgdGhpcy5zZXRTZXR0aW5nVmlzaWJsZSgtMSk7CiAgICB9LAogICAgaW5pdEZvbnRTaXplOiBmdW5jdGlvbiBpbml0Rm9udFNpemUoKSB7CiAgICAgIHZhciBmb250U2l6ZSA9IGdldEZvbnRTaXplKHRoaXMuZmlsZU5hbWUpOwoKICAgICAgaWYgKCFmb250U2l6ZSkgewogICAgICAgIHNhdmVGb250U2l6ZSh0aGlzLmZpbGVOYW1lLCB0aGlzLmRlZnVsdEZvbnRTaXplKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmN1cnJlbnRCb29rLnJlbmRpdGlvbi50aGVtZXMuZm9udFNpemUoZm9udFNpemUpOwogICAgICAgIHRoaXMuc2V0RGVmYXVsdEZvbnRTaXplKGZvbnRTaXplKTsKICAgICAgfQogICAgfSwKICAgIGluaXRGb250RmFtaWx5OiBmdW5jdGlvbiBpbml0Rm9udEZhbWlseSgpIHsKICAgICAgdmFyIGZvbnQgPSBnZXRGb250RmFtaWx5KHRoaXMuZmlsZU5hbWUpOwoKICAgICAgaWYgKCFmb250KSB7CiAgICAgICAgc2F2ZUZvbnRGYW1pbHkodGhpcy5maWxlTmFtZSwgdGhpcy5kZWZhdWx0Rm9udEZhbWlseSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jdXJyZW50Qm9vay5yZW5kaXRpb24udGhlbWVzLmZvbnQoZm9udCk7CiAgICAgICAgdGhpcy5zZXREZWZhdWx0Rm9udEZhbWlseShmb250KTsKICAgICAgfQogICAgfSwKICAgIGluaXRUaGVtZTogZnVuY3Rpb24gaW5pdFRoZW1lKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGRlZmF1bHRUaGVtZSA9IGdldFRoZW1lKHRoaXMuZmlsZU5hbWUpOwoKICAgICAgaWYgKCFkZWZhdWx0VGhlbWUpIHsKICAgICAgICBkZWZhdWx0VGhlbWUgPSB0aGlzLlRoZW1lTGlzdFswXS5uYW1lOwogICAgICAgIHNhdmVUaGVtZSh0aGlzLmZpbGVOYW1lLCBkZWZhdWx0VGhlbWUpOwogICAgICB9CgogICAgICB0aGlzLnNldERlZmF1bHRUaGVtZShkZWZhdWx0VGhlbWUpOwogICAgICB0aGlzLlRoZW1lTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgX3RoaXMucmVuZGl0aW9uLnRoZW1lcy5yZWdpc3RlcihlbGVtZW50Lm5hbWUsIGVsZW1lbnQuc3R5bGUpOwogICAgICB9KTsKICAgICAgdGhpcy5yZW5kaXRpb24udGhlbWVzLnNlbGVjdChkZWZhdWx0VGhlbWUpOwogICAgfSwKICAgIGluaXRSZW5kaXRpb246IGZ1bmN0aW9uIGluaXRSZW5kaXRpb24oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5yZW5kaXRpb24gPSB0aGlzLmJvb2sucmVuZGVyVG8oInJlYWQiLCB7CiAgICAgICAgd2lkdGg6IGlubmVyV2lkdGgsCiAgICAgICAgaGVpZ2h0OiBpbm5lckhlaWdodCwKICAgICAgICBtZXRob2Q6ICJkZWZhdWx0IgogICAgICB9KTsKICAgICAgdGhpcy5yZW5kaXRpb24uZGlzcGxheSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5pbml0VGhlbWUoKTsKCiAgICAgICAgX3RoaXMyLmluaXRGb250U2l6ZSgpOwoKICAgICAgICBfdGhpczIuaW5pdEZvbnRGYW1pbHkoKTsKCiAgICAgICAgX3RoaXMyLmluaXRHbG9ibGVTdHlsZSgpOwogICAgICB9KTsKICAgICAgdGhpcy5yZW5kaXRpb24uaG9va3MuY29udGVudC5yZWdpc3RlcihmdW5jdGlvbiAoY29udGVudHMpIHsKICAgICAgICBQcm9taXNlLmFsbChbY29udGVudHMuYWRkU3R5bGVzaGVldCgiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9SRVNfVVJMLCAiL2ZvbnRzL2RheXNPbmUuY3NzIikpLCBjb250ZW50cy5hZGRTdHlsZXNoZWV0KCIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkwsICIvZm9udHMvY2FiaW4uY3NzIikpLCBjb250ZW50cy5hZGRTdHlsZXNoZWV0KCIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkwsICIvZm9udHMvbW9udHNlcnJhdC5jc3MiKSksIGNvbnRlbnRzLmFkZFN0eWxlc2hlZXQoIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfUkVTX1VSTCwgIi9mb250cy90YW5nZXJpbmUuY3NzIikpXSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygi5a2X5L2T5YWo6YOo5Yqg6L295a6M5q+VLi4uIik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGluaXRHZXN0dXJlOiBmdW5jdGlvbiBpbml0R2VzdHVyZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLnJlbmRpdGlvbi5vbigidG91Y2hzdGFydCIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgX3RoaXMzLnRvdWNoU3RhcnQgPSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7CiAgICAgICAgX3RoaXMzLnRvdWNoVGltZSA9IGUudGltZVN0YW1wOwogICAgICB9KTsKICAgICAgdGhpcy5yZW5kaXRpb24ub24oInRvdWNoZW5kIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgb2Zmc2V0WCA9IF90aGlzMy50b3VjaFN0YXJ0IC0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYOwogICAgICAgIHZhciBUaW1lID0gZS50aW1lU3RhbXAgLSBfdGhpczMudG91Y2hUaW1lOwoKICAgICAgICBpZiAoVGltZSA8IDQwMCAmJiBvZmZzZXRYID4gNDApIHsKICAgICAgICAgIF90aGlzMy5uZXh0UGFnZSgpOwogICAgICAgIH0gZWxzZSBpZiAoVGltZSA8IDQwMCAmJiBvZmZzZXRYIDwgLTQwKSB7CiAgICAgICAgICBfdGhpczMucHJldlBhZ2UoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMzLnNob3dUaXRsZUFuZE1lbnUoKTsKICAgICAgICB9CgogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICB9KTsKICAgIH0sCiAgICBpbml0RXB1YjogZnVuY3Rpb24gaW5pdEVwdWIoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdmFyIFVybCA9ICIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkwsICIvZXB1Yi8iKSArIHRoaXMuZmlsZU5hbWUgKyAiLmVwdWIiOwogICAgICB0aGlzLmJvb2sgPSBuZXcgRXB1YihVcmwpOwogICAgICB0aGlzLnNldEN1cnJlbnRCb29rKHRoaXMuYm9vayk7CiAgICAgIHRoaXMuaW5pdFJlbmRpdGlvbigpOwogICAgICB0aGlzLmluaXRHZXN0dXJlKCk7CiAgICAgIHRoaXMuYm9vay5yZWFkeS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM0LmJvb2subG9jYXRpb25zLmdlbmVyYXRlKDc1MCAqICh3aW5kb3cuaW5uZXJXaWR0aCAvIDM3NSkgKiAoZ2V0Rm9udFNpemUoX3RoaXM0LmZpbGVOYW1lKSAvIDE2KSk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGxvY2F0aW9ucykgewogICAgICAgIF90aGlzNC5zZXRCb29rQXZhaWxhYmxlKHRydWUpOwogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICB0aGlzLnNldEZpbGVOYW1lKHRoaXMuJHJvdXRlLnBhcmFtcy5maWxlTmFtZS5zcGxpdCgifCIpLmpvaW4oIi8iKSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzNS5pbml0RXB1YigpOwogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["EbookReder.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"Ebook-Reder\">\n    <div id=\"read\"></div>\n  </div>\n</template>\n\n<script>\nimport { ebookMinx } from \"../../utils/mixin\";\nimport {\n  getFontFamily,\n  saveFontFamily,\n  getFontSize,\n  saveFontSize,\n  getTheme,\n  saveTheme\n} from \"../../utils/localstorage.js\";\nimport Epub from \"epubjs\";\nglobal.epub = Epub;\nexport default {\n  mixins: [ebookMinx],\n  data() {\n    return {\n      touchStart: \"\",\n      touchTime: \"\"\n    };\n  },\n  methods: {\n    prevPage() {\n      if (this.rendition) {\n        this.rendition.prev();\n        this.hideTitleAndMenu();\n      }\n    },\n    nextPage() {\n      if (this.rendition) {\n        this.rendition.next();\n        this.hideTitleAndMenu();\n      }\n    },\n    showTitleAndMenu() {\n      if (this.menuVisible) {\n        this.setSettingVisible(-1);\n        this.setFontFamilyVisible(false);\n      }\n      this.setMenuVisible(!this.menuVisible);\n    },\n    hideTitleAndMenu() {\n      this.setMenuVisible(false);\n      this.setFontFamilyVisible(false);\n      this.setSettingVisible(-1);\n    },\n    initFontSize() {\n      const fontSize = getFontSize(this.fileName);\n      if (!fontSize) {\n        saveFontSize(this.fileName, this.defultFontSize);\n      } else {\n        this.currentBook.rendition.themes.fontSize(fontSize);\n        this.setDefaultFontSize(fontSize);\n      }\n    },\n    initFontFamily() {\n      const font = getFontFamily(this.fileName);\n      if (!font) {\n        saveFontFamily(this.fileName, this.defaultFontFamily);\n      } else {\n        this.currentBook.rendition.themes.font(font);\n        this.setDefaultFontFamily(font);\n      }\n    },\n    initTheme() {\n      let defaultTheme = getTheme(this.fileName);\n      if (!defaultTheme) {\n        defaultTheme = this.ThemeList[0].name;\n        saveTheme(this.fileName, defaultTheme);\n      }\n      this.setDefaultTheme(defaultTheme);\n      this.ThemeList.forEach(element => {\n        this.rendition.themes.register(element.name, element.style);\n      });\n      this.rendition.themes.select(defaultTheme);\n    },\n    initRendition() {\n      this.rendition = this.book.renderTo(\"read\", {\n        width: innerWidth,\n        height: innerHeight,\n        method: \"default\"\n      });\n\n      this.rendition.display().then(() => {\n        this.initTheme();\n        this.initFontSize();\n        this.initFontFamily();\n        this.initGlobleStyle();\n      });\n      this.rendition.hooks.content.register(contents => {\n        Promise.all([\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/daysOne.css`\n          ),\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/cabin.css`\n          ),\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/montserrat.css`\n          ),\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/tangerine.css`\n          )\n        ]).then(() => {\n          console.log(\"字体全部加载完毕...\");\n        });\n      });\n    },\n    initGesture() {\n      this.rendition.on(\"touchstart\", e => {\n        this.touchStart = e.changedTouches[0].clientX;\n        this.touchTime = e.timeStamp;\n      });\n      this.rendition.on(\"touchend\", e => {\n        const offsetX = this.touchStart - e.changedTouches[0].clientX;\n        const Time = e.timeStamp - this.touchTime;\n        if (Time < 400 && offsetX > 40) {\n          this.nextPage();\n        } else if (Time < 400 && offsetX < -40) {\n          this.prevPage();\n        } else {\n          this.showTitleAndMenu();\n        }\n         e.preventDefault();\n         e.stopPropagation();\n      });\n    },\n    initEpub() {\n      const Url =\n        `${process.env.VUE_APP_RES_URL}/epub/` + this.fileName + \".epub\";\n      this.book = new Epub(Url);\n      this.setCurrentBook(this.book);\n      this.initRendition();\n      this.initGesture()\n      this.book.ready.then(() => {\n        return this.book.locations.generate(750 * (window.innerWidth / 375) * (getFontSize(this.fileName) / 16))\n      }).then((locations) => {\n        this.setBookAvailable(true)\n      })\n    }\n  },\n\n  mounted() {\n    this.setFileName(this.$route.params.fileName.split(\"|\").join(\"/\")).then(\n      () => {\n        this.initEpub();\n      }\n    );\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n"],"sourceRoot":"src/components/ebook"}]}