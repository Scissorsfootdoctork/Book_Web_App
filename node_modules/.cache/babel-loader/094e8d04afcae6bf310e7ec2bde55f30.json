{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js!/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/home/searchBar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/home/searchBar.vue","mtime":1541580605000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { realPx } from '@/utils/utils';\nimport HotSearch from '@/components/home/hotSearch';\nexport default {\n  components: {\n    HotSearch: HotSearch\n  },\n  props: {\n    ifShowSearchPage: {\n      type: Boolean,\n      default: false\n    },\n    ifShowHotSearch: {\n      type: Boolean,\n      default: true\n    },\n    bookListOffsetY: Number\n  },\n  data: function data() {\n    return {\n      searchList: {\n        hotSearch: [{\n          type: 1,\n          text: 'Self-Reported Population Health',\n          num: '1.8万'\n        }, {\n          type: 1,\n          text: 'Library and Information Sciences',\n          num: '1.1万'\n        }, {\n          type: 1,\n          text: 'Global Business Strategy',\n          num: '1.3万'\n        }, {\n          type: 1,\n          text: 'Corporate Data Quality',\n          num: '1.0万'\n        }, {\n          type: 1,\n          text: 'Verrechnungspreise',\n          num: '3.9万'\n        }],\n        historySearch: [{\n          type: 2,\n          text: 'Computer Science'\n        }, {\n          type: 1,\n          text: 'Building the Infrastructure for Cloud Security'\n        }, {\n          type: 2,\n          text: 'ePub'\n        }, {\n          type: 2,\n          text: 'api'\n        }, {\n          type: 2,\n          text: 'Vue.js'\n        }, {\n          type: 2,\n          text: 'Nginx'\n        }, {\n          type: 2,\n          text: 'Java'\n        }, {\n          type: 2,\n          text: 'hdfs'\n        }, {\n          type: 2,\n          text: 'vuejs'\n        }, {\n          type: 2,\n          text: 'es6'\n        }, {\n          type: 2,\n          text: 'Intel'\n        }, {\n          type: 1,\n          text: 'Pro Git'\n        }, {\n          type: 2,\n          text: 'imooc'\n        }, {\n          type: 2,\n          text: 'Education'\n        }, {\n          type: 2,\n          text: 'Springer'\n        }, {\n          type: 2,\n          text: 'Environment'\n        }]\n      },\n      ifHideShadow: true,\n      searchText: null\n    };\n  },\n  methods: {\n    setKeyword: function setKeyword(keyword) {\n      this.searchText = keyword;\n      this.searchList.historySearch.push(keyword);\n    },\n    search: function search() {\n      this.$router.push({\n        path: '/book-store/list',\n        query: {\n          keyword: this.searchText\n        }\n      });\n    },\n    hideHotSearch: function hideHotSearch() {\n      this.$emit('update:ifShowHotSearch', false);\n    },\n    showShadow: function showShadow() {\n      this.ifHideShadow = false;\n    },\n    hideShadow: function hideShadow() {\n      this.ifHideShadow = true;\n    },\n    showSearchPageAndHotSearch: function showSearchPageAndHotSearch() {\n      var _this = this;\n\n      this.showSearchPage();\n      this.hideShadow();\n      this.$emit('update:ifShowHotSearch', true);\n      this.$nextTick(function () {\n        _this.initHotSearch();\n      });\n    },\n    back: function back() {\n      this.searchText = '';\n\n      if (this.ifShowSearchPage) {\n        if (this.bookListOffsetY <= 0) {\n          this.hideSearchPage();\n        } else {\n          if (this.ifShowHotSearch) {\n            this.hideHotSearch();\n            this.showShadow();\n          } else {\n            this.$router.push('/book-store/shelf');\n          }\n        }\n      } else {\n        this.$router.push('/book-store/shelf');\n      }\n\n      this.$emit('back');\n    },\n    hideSearchPage: function hideSearchPage() {\n      this.$emit('update:ifShowSearchPage', false);\n      this.ifHideShadow = true;\n    },\n    showSearchPage: function showSearchPage() {\n      this.$emit('update:ifShowSearchPage', true);\n    },\n    showFlapCard: function showFlapCard() {\n      this.$emit('showFlapCard');\n    },\n    handleScroll: function handleScroll(e) {\n      var target = e.target;\n\n      if (target) {\n        if (target.scrollTop > 0) {\n          this.ifHideShadow = false;\n        } else {\n          this.ifHideShadow = true;\n        }\n      }\n    },\n    initHotSearch: function initHotSearch() {\n      if (this.$refs.searchMaskWrapper) {\n        this.$refs.searchMaskWrapper.style.height = window.innerHeight - realPx(52) + 'px';\n        this.$refs.searchMaskWrapper.addEventListener('scroll', this.handleScroll);\n        this.$refs.searchMaskWrapper.scrollTo(0, 0);\n      }\n    }\n  }\n};",{"version":3,"sources":["searchBar.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"search-bar-wrapper\">\n    <div class=\"title-search-wrapper\" :class=\"{'show-search': ifShowSearchPage, 'hide-shadow': ifHideShadow}\" ref=\"titleSearchWrapper\">\n      <transition name=\"title\">\n        <div class=\"title-search-page-wrapper\" v-show=\"!ifShowSearchPage\">\n          <span class=\"title-text\">{{$t('home.title')}}</span>\n          <div class=\"icon-shake-wrapper\" @click=\"showFlapCard\">\n            <span class=\"icon-shake icon\"></span>\n          </div>\n        </div>\n      </transition>\n      <div class=\"icon-back-wrapper\" :class=\"{'show-search': ifShowSearchPage}\" @click=\"back\">\n        <span class=\"icon-back icon\"></span>\n      </div>\n      <div class=\"search-wrapper\" :class=\"{'show-search': ifShowSearchPage}\">\n        <div class=\"search-back-wrapper\" :class=\"{'show-search': ifShowSearchPage}\">\n          <span class=\"icon-back icon\" :class=\"{'show-search': ifShowSearchPage}\"></span>\n        </div>\n        <div class=\"search-bg\">\n          <span class=\"icon-search icon\"></span>\n          <input type=\"text\" class=\"search\" :placeholder=\"$t('home.hint')\" v-model=\"searchText\" @click=\"showSearchPageAndHotSearch\" @keyup.13.exact=\"search\">\n        </div>\n      </div>\n    </div>\n    <transition name=\"host-search\">\n      <div class=\"hot-search-wrapper\" v-if=\"ifShowSearchPage && ifShowHotSearch\" ref=\"searchMaskWrapper\">\n        <hot-search :label=\"$t('home.hotSearch')\"\n                    :btn=\"$t('home.change')\"\n                    :hotSearch=\"searchList.hotSearch\"></hot-search>\n        <div class=\"line\"></div>\n        <hot-search :label=\"$t('home.historySearch')\"\n                    :btn=\"$t('home.clear')\"\n                    :hotSearch=\"searchList.historySearch\"></hot-search>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\n  import { realPx } from '@/utils/utils'\n  import HotSearch from '@/components/home/hotSearch'\n\n  export default {\n    components: {\n      HotSearch\n    },\n    props: {\n      ifShowSearchPage: {\n        type: Boolean,\n        default: false\n      },\n      ifShowHotSearch: {\n        type: Boolean,\n        default: true\n      },\n      bookListOffsetY: Number\n    },\n    data() {\n      return {\n        searchList: {\n          hotSearch: [\n            {\n              type: 1,\n              text: 'Self-Reported Population Health',\n              num: '1.8万'\n            },\n            {\n              type: 1,\n              text: 'Library and Information Sciences',\n              num: '1.1万'\n            },\n            {\n              type: 1,\n              text: 'Global Business Strategy',\n              num: '1.3万'\n            },\n            {\n              type: 1,\n              text: 'Corporate Data Quality',\n              num: '1.0万'\n            },\n            {\n              type: 1,\n              text: 'Verrechnungspreise',\n              num: '3.9万'\n            }\n          ],\n          historySearch: [\n            {\n              type: 2,\n              text: 'Computer Science'\n            },\n            {\n              type: 1,\n              text: 'Building the Infrastructure for Cloud Security'\n            },\n            {\n              type: 2,\n              text: 'ePub'\n            },\n            {\n              type: 2,\n              text: 'api'\n            },\n            {\n              type: 2,\n              text: 'Vue.js'\n            },\n            {\n              type: 2,\n              text: 'Nginx'\n            },\n            {\n              type: 2,\n              text: 'Java'\n            },\n            {\n              type: 2,\n              text: 'hdfs'\n            },\n            {\n              type: 2,\n              text: 'vuejs'\n            },\n            {\n              type: 2,\n              text: 'es6'\n            },\n            {\n              type: 2,\n              text: 'Intel'\n            },\n            {\n              type: 1,\n              text: 'Pro Git'\n            },\n            {\n              type: 2,\n              text: 'imooc'\n            },\n            {\n              type: 2,\n              text: 'Education'\n            },\n            {\n              type: 2,\n              text: 'Springer'\n            },\n            {\n              type: 2,\n              text: 'Environment'\n            }\n          ]\n        },\n        ifHideShadow: true,\n        searchText: null\n      }\n    },\n    methods: {\n      setKeyword(keyword) {\n        this.searchText = keyword\n        this.searchList.historySearch.push(keyword)\n      },\n      search() {\n        this.$router.push({\n          path: '/book-store/list',\n          query: {\n            keyword: this.searchText\n          }\n        })\n      },\n      hideHotSearch() {\n        this.$emit('update:ifShowHotSearch', false)\n      },\n      showShadow() {\n        this.ifHideShadow = false\n      },\n      hideShadow() {\n        this.ifHideShadow = true\n      },\n      showSearchPageAndHotSearch() {\n        this.showSearchPage()\n        this.hideShadow()\n        this.$emit('update:ifShowHotSearch', true)\n        this.$nextTick(() => {\n          this.initHotSearch()\n        })\n      },\n      back() {\n        this.searchText = ''\n        if (this.ifShowSearchPage) {\n          if (this.bookListOffsetY <= 0) {\n            this.hideSearchPage()\n          } else {\n            if (this.ifShowHotSearch) {\n              this.hideHotSearch()\n              this.showShadow()\n            } else {\n              this.$router.push('/book-store/shelf')\n            }\n          }\n        } else {\n          this.$router.push('/book-store/shelf')\n        }\n        this.$emit('back')\n      },\n      hideSearchPage() {\n        this.$emit('update:ifShowSearchPage', false)\n        this.ifHideShadow = true\n      },\n      showSearchPage() {\n        this.$emit('update:ifShowSearchPage', true)\n      },\n      showFlapCard() {\n        this.$emit('showFlapCard')\n      },\n      handleScroll(e) {\n        const target = e.target\n        if (target) {\n          if (target.scrollTop > 0) {\n            this.ifHideShadow = false\n          } else {\n            this.ifHideShadow = true\n          }\n        }\n      },\n      initHotSearch() {\n        if (this.$refs.searchMaskWrapper) {\n          this.$refs.searchMaskWrapper.style.height = window.innerHeight - realPx(52) + 'px'\n          this.$refs.searchMaskWrapper.addEventListener('scroll', this.handleScroll)\n          this.$refs.searchMaskWrapper.scrollTo(0, 0)\n        }\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n  @import \"../../assets/styles/global\";\n\n  .search-bar-wrapper {\n    .title-search-wrapper {\n      position: relative;\n      z-index: 110;\n      width: 100%;\n      height: px2rem(94);\n      background: white;\n      box-shadow: 0 px2rem(2) px2rem(2) 0 rgba(0, 0, 0, .1);\n      &.show-search {\n        height: px2rem(52);\n      }\n      &.hide-shadow {\n        box-shadow: none;\n      }\n      .title-search-page-wrapper {\n        position: absolute;\n        top: 0;\n        left: 0;\n        z-index: 105;\n        width: 100%;\n        height: px2rem(42);\n        @include center;\n        .title-text {\n          font-weight: bold;\n        }\n        .icon-shake-wrapper {\n          position: absolute;\n          right: 0;\n          top: 0;\n          z-index: 110;\n          padding-right: px2rem(15);\n          height: 100%;\n          @include center;\n        }\n      }\n      .icon-back-wrapper {\n        position: absolute;\n        left: px2rem(15);\n        top: 0;\n        z-index: 110;\n        height: px2rem(42);\n        @include center;\n        transition: all $homeAnimationTime linear;\n        &.show-search {\n          height: px2rem(52);\n        }\n      }\n      .search-wrapper {\n        position: absolute;\n        top: px2rem(42);\n        left: 0;\n        z-index: 100;\n        display: flex;\n        padding: px2rem(10);\n        width: 100%;\n        box-sizing: border-box;\n        transition: all $homeAnimationTime linear;\n        &.show-search {\n          top: 0;\n        }\n        .search-back-wrapper {\n          flex: 0;\n          width: 0;\n          @include center;\n          transition: all $homeAnimationTime linear;\n          visibility: hidden;\n          &.show-search {\n            margin-right: px2rem(10);\n            flex: 0 0 px2rem(20);\n            width: px2rem(20);\n          }\n          .icon-back {\n            font-size: 0;\n            &.show-search {\n              font-size: px2rem(20);\n            }\n          }\n        }\n        .search-bg {\n          flex: 1;\n          background: #f4f4f4;\n          border-radius: px2rem(20);\n          border: px2rem(1) solid #eee;\n          box-sizing: border-box;\n          padding: px2rem(5) px2rem(15);\n          transition: all $homeAnimationTime linear;\n          @include left;\n          .icon-search {\n            font-size: px2rem(16);\n            color: #999;\n          }\n          .search {\n            color: #666;\n            width: 100%;\n            height: px2rem(22);\n            background: transparent;\n            font-size: px2rem(12);\n            margin-left: px2rem(10);\n            border: none;\n            &:focus {\n              outline: none;\n            }\n            &::-webkit-input-placeholder {\n              color: #ccc;\n            }\n          }\n        }\n      }\n    }\n    .hot-search-wrapper {\n      width: 100%;\n      height: 100%;\n      background: white;\n      overflow-x: hidden;\n      overflow-y: scroll;\n      -webkit-overflow-scrolling: touch;\n      &::-webkit-scrollbar {\n        display: none;\n      }\n      .line {\n        width: 100%;\n        height: 0;\n        border-top: px2rem(1) solid #eee;\n        margin: px2rem(10) 0;\n      }\n    }\n  }\n</style>\n"],"sourceRoot":"src/components/home"}]}