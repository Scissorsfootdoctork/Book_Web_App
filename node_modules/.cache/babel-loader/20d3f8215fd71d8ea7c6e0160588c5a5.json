{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js!/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/views/store/bookList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/views/store/bookList.vue","mtime":1541580605000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport DetailTitle from '@/components/detail/detaiTitle';\nimport Scroll from '@/components/Scroll';\nimport Featured from '@/components/home/featured';\nimport { realPx } from '@/utils/utils';\nimport { list } from '@/api/book';\nimport { categoryList, categoryText } from '@/utils/book';\nexport default {\n  components: {\n    DetailTitle: DetailTitle,\n    Scroll: Scroll,\n    Featured: Featured\n  },\n  computed: {\n    title: function title() {\n      if (this.list) {\n        return this.total && this.$t('home.allBook').replace('$1', this.totalNumber);\n      } else {\n        return null;\n      }\n    },\n    totalNumber: function totalNumber() {\n      var _this = this;\n\n      var num = 0;\n      Object.keys(this.list).forEach(function (key) {\n        num += _this.list[key].length;\n      });\n      return num;\n    }\n  },\n  data: function data() {\n    return {\n      list: null,\n      total: null\n    };\n  },\n  methods: {\n    getCategoryText: function getCategoryText(key) {\n      return \"\".concat(categoryText(categoryList[key], this), \"(\").concat(this.list[key].length, \")\");\n    },\n    back: function back() {\n      this.$router.go(-1);\n    },\n    onScroll: function onScroll(offsetY) {\n      if (offsetY > realPx(42)) {\n        this.$refs.title.showShadow();\n      } else {\n        this.$refs.title.hideShadow();\n      }\n    },\n    getList: function getList() {\n      var _this2 = this;\n\n      list().then(function (response) {\n        _this2.list = response.data.data;\n        _this2.total = response.data.total;\n        var category = _this2.$route.query.category;\n        var keyword = _this2.$route.query.keyword;\n\n        if (category) {\n          var key = Object.keys(_this2.list).filter(function (item) {\n            return item === category;\n          })[0];\n          var data = _this2.list[key];\n          _this2.list = {};\n          _this2.list[key] = data;\n        } else if (keyword) {\n          Object.keys(_this2.list).filter(function (key) {\n            _this2.list[key] = _this2.list[key].filter(function (book) {\n              return book.fileName.indexOf(keyword) >= 0;\n            });\n            return _this2.list[key].length > 0;\n          });\n        }\n      });\n    }\n  },\n  created: function created() {\n    this.getList();\n    this.titleText = this.$route.query.categoryText;\n  }\n};",{"version":3,"sources":["bookList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"book-list-wrapper\">\n    <detail-title :title=\"title\"\n                  :showShelf=\"true\"\n                  @back=\"back\"\n                  ref=\"title\"></detail-title>\n    <scroll class=\"book-list-scroll-wrapper\"\n            :top=\"42\"\n            @onScroll=\"onScroll\"\n            ref=\"scroll\">\n      <featured :data=\"value\" :titleText=\"titleText ? titleText : getCategoryText(key)\" :btnText=\"''\" v-for=\"(value, key, index) in list\"\n                :key=\"index\"></featured>\n    </scroll>\n  </div>\n</template>\n\n<script>\n  import DetailTitle from '@/components/detail/detaiTitle'\n  import Scroll from '@/components/Scroll'\n  import Featured from '@/components/home/featured'\n  import { realPx } from '@/utils/utils'\n  import { list } from '@/api/book'\n  import { categoryList, categoryText } from '@/utils/book'\n\n  export default {\n    components: {\n      DetailTitle,\n      Scroll,\n      Featured\n    },\n    computed: {\n      title() {\n        if (this.list) {\n          return this.total && this.$t('home.allBook').replace('$1', this.totalNumber)\n        } else {\n          return null\n        }\n      },\n      totalNumber() {\n        let num = 0\n        Object.keys(this.list).forEach(key => {\n          num += this.list[key].length\n        })\n        return num\n      }\n    },\n    data() {\n      return {\n        list: null,\n        total: null\n      }\n    },\n    methods: {\n      getCategoryText(key) {\n        return `${categoryText(categoryList[key], this)}(${this.list[key].length})`\n      },\n      back() {\n        this.$router.go(-1)\n      },\n      onScroll(offsetY) {\n        if (offsetY > realPx(42)) {\n          this.$refs.title.showShadow()\n        } else {\n          this.$refs.title.hideShadow()\n        }\n      },\n      getList() {\n        list().then(response => {\n          this.list = response.data.data\n          this.total = response.data.total\n          const category = this.$route.query.category\n          const keyword = this.$route.query.keyword\n          if (category) {\n            const key = Object.keys(this.list).filter(item => item === category)[0]\n            const data = this.list[key]\n            this.list = {}\n            this.list[key] = data\n          } else if (keyword) {\n            Object.keys(this.list).filter(key => {\n              this.list[key] = this.list[key].filter(book => book.fileName.indexOf(keyword) >= 0)\n              return this.list[key].length > 0\n            })\n          }\n        })\n      }\n    },\n    created() {\n      this.getList()\n      this.titleText = this.$route.query.categoryText\n    }\n  }\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n  @import \"../../assets/styles/global\";\n\n  .book-list-wrapper {\n    width: 100%;\n    height: 100%;\n    background: white;\n  }\n</style>\n"],"sourceRoot":"src/views/store"}]}