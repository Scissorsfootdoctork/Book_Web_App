{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js!/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/shelf/shelfGroupDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/src/components/shelf/shelfGroupDialog.vue","mtime":1541580605000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"/Users/kscissorfootdoctor/Desktop/Book_Web_App/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.array.filter\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  props: {\n    visible: Boolean,\n    data: Array,\n    bookList: Array,\n    isInGroup: Boolean,\n    category: Object,\n    isEditGroupName: {\n      type: Boolean,\n      default: false\n    }\n  },\n  computed: {\n    defaultCategory: function defaultCategory() {\n      return [{\n        title: this.$t('shelf.newGroup'),\n        edit: 1\n      }, {\n        title: this.$t('shelf.groupOut'),\n        edit: 2\n      }];\n    },\n    categoryList: function categoryList() {\n      var list = this.bookList ? this.bookList.filter(function (item) {\n        return item.type === 2;\n      }) : [];\n      return [].concat(_toConsumableArray(this.defaultCategory), _toConsumableArray(list));\n    }\n  },\n  data: function data() {\n    return {\n      newGroupDialogVisible: false,\n      selectGroupDialogVisible: true,\n      newGroupName: ''\n    };\n  },\n  methods: {\n    createNewGroup: function createNewGroup() {\n      if (this.isEditGroupName) {\n        this.$emit('editGroupName', this.category, this.newGroupName);\n        this.hide();\n      } else {\n        if (this.newGroupName.length > 0) {\n          this.$emit('group', 2, {\n            id: this.bookList[this.bookList.length - 2].id + 1,\n            itemList: [],\n            selected: false,\n            title: this.newGroupName,\n            type: 2\n          });\n        }\n\n        this.hide();\n      }\n    },\n    clear: function clear() {\n      this.newGroupName = '';\n    },\n    onGroupClick: function onGroupClick(item) {\n      if (item.edit && item.edit === 1) {\n        // 新建分组\n        this.showCreateGroupDialog();\n      } else if (item.edit && item.edit === 2) {\n        // 移出分组\n        this.$emit('group', 3, item);\n        this.hide();\n      } else {\n        // 移入分组\n        this.$emit('group', 1, item);\n        this.hide();\n      }\n    },\n    showCreateGroupDialog: function showCreateGroupDialog() {\n      var _this = this;\n\n      this.newGroupDialogVisible = true;\n      this.selectGroupDialogVisible = false;\n      this.newGroupName = '';\n      this.$nextTick(function () {\n        _this.$refs.dialogInput.focus();\n      });\n    },\n    showEditGroupDialog: function showEditGroupDialog() {\n      var _this2 = this;\n\n      this.newGroupDialogVisible = true;\n      this.selectGroupDialogVisible = false;\n      this.newGroupName = this.category.title;\n      this.$nextTick(function () {\n        _this2.$refs.dialogInput.focus();\n      });\n    },\n    show: function show() {\n      this.$emit('update:visible', true);\n    },\n    hide: function hide() {\n      this.$emit('update:visible', false);\n      this.newGroupDialogVisible = false;\n      this.selectGroupDialogVisible = true;\n    }\n  }\n};",{"version":3,"sources":["shelfGroupDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA,OADA;AAEA,IAAA,IAAA,EAAA,KAFA;AAGA,IAAA,QAAA,EAAA,KAHA;AAIA,IAAA,SAAA,EAAA,OAJA;AAKA,IAAA,QAAA,EAAA,MALA;AAMA,IAAA,eAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA;AANA,GADA;AAYA,EAAA,QAAA,EAAA;AACA,IAAA,eADA,6BACA;AACA,aAAA,CACA;AACA,QAAA,KAAA,EAAA,KAAA,EAAA,CAAA,gBAAA,CADA;AAEA,QAAA,IAAA,EAAA;AAFA,OADA,EAKA;AACA,QAAA,KAAA,EAAA,KAAA,EAAA,CAAA,gBAAA,CADA;AAEA,QAAA,IAAA,EAAA;AAFA,OALA,CAAA;AAUA,KAZA;AAaA,IAAA,YAbA,0BAaA;AACA,UAAA,IAAA,GAAA,KAAA,QAAA,GAAA,KAAA,QAAA,CAAA,MAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,IAAA,KAAA,CAAA;AAAA,OAAA,CAAA,GAAA,EAAA;AACA,0CAAA,KAAA,eAAA,sBAAA,IAAA;AACA;AAhBA,GAZA;AA8BA,EAAA,IA9BA,kBA8BA;AACA,WAAA;AACA,MAAA,qBAAA,EAAA,KADA;AAEA,MAAA,wBAAA,EAAA,IAFA;AAGA,MAAA,YAAA,EAAA;AAHA,KAAA;AAKA,GApCA;AAqCA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AACA,UAAA,KAAA,eAAA,EAAA;AACA,aAAA,KAAA,CAAA,eAAA,EAAA,KAAA,QAAA,EAAA,KAAA,YAAA;AACA,aAAA,IAAA;AACA,OAHA,MAGA;AACA,YAAA,KAAA,YAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,eAAA,KAAA,CAAA,OAAA,EAAA,CAAA,EAAA;AACA,YAAA,EAAA,EAAA,KAAA,QAAA,CAAA,KAAA,QAAA,CAAA,MAAA,GAAA,CAAA,EAAA,EAAA,GAAA,CADA;AAEA,YAAA,QAAA,EAAA,EAFA;AAGA,YAAA,QAAA,EAAA,KAHA;AAIA,YAAA,KAAA,EAAA,KAAA,YAJA;AAKA,YAAA,IAAA,EAAA;AALA,WAAA;AAOA;;AACA,aAAA,IAAA;AACA;AACA,KAjBA;AAkBA,IAAA,KAlBA,mBAkBA;AACA,WAAA,YAAA,GAAA,EAAA;AACA,KApBA;AAqBA,IAAA,YArBA,wBAqBA,IArBA,EAqBA;AACA,UAAA,IAAA,CAAA,IAAA,IAAA,IAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA;AACA,aAAA,qBAAA;AACA,OAHA,MAGA,IAAA,IAAA,CAAA,IAAA,IAAA,IAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA;AACA,aAAA,KAAA,CAAA,OAAA,EAAA,CAAA,EAAA,IAAA;AACA,aAAA,IAAA;AACA,OAJA,MAIA;AACA;AACA,aAAA,KAAA,CAAA,OAAA,EAAA,CAAA,EAAA,IAAA;AACA,aAAA,IAAA;AACA;AACA,KAlCA;AAmCA,IAAA,qBAnCA,mCAmCA;AAAA;;AACA,WAAA,qBAAA,GAAA,IAAA;AACA,WAAA,wBAAA,GAAA,KAAA;AACA,WAAA,YAAA,GAAA,EAAA;AACA,WAAA,SAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,WAAA,CAAA,KAAA;AACA,OAFA;AAGA,KA1CA;AA2CA,IAAA,mBA3CA,iCA2CA;AAAA;;AACA,WAAA,qBAAA,GAAA,IAAA;AACA,WAAA,wBAAA,GAAA,KAAA;AACA,WAAA,YAAA,GAAA,KAAA,QAAA,CAAA,KAAA;AACA,WAAA,SAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,KAAA,CAAA,WAAA,CAAA,KAAA;AACA,OAFA;AAGA,KAlDA;AAmDA,IAAA,IAnDA,kBAmDA;AACA,WAAA,KAAA,CAAA,gBAAA,EAAA,IAAA;AACA,KArDA;AAsDA,IAAA,IAtDA,kBAsDA;AACA,WAAA,KAAA,CAAA,gBAAA,EAAA,KAAA;AACA,WAAA,qBAAA,GAAA,KAAA;AACA,WAAA,wBAAA,GAAA,IAAA;AACA;AA1DA;AArCA,CAAA","sourcesContent":["<template>\n  <transition name=\"fade\">\n    <div class=\"shelf-group-dialog-bg\" v-if=\"visible\">\n      <div class=\"shelf-group-dialog-wrapper\" v-if=\"selectGroupDialogVisible\">\n        <div class=\"dialog-list\">\n          <div class=\"dialog-title-wrapper\">\n            <span class=\"dialog-title-text\">{{$t('shelf.moveBook')}}</span>\n          </div>\n          <div class=\"dialog-list-wrapper\">\n            <div class=\"dialog-list-item\" :class=\"{'is-add': item.edit ? item.edit === 1 : false}\" v-for=\"(item, index) in categoryList\" :key=\"index\" @click=\"onGroupClick(item)\" v-if=\"(item.edit === 2 && isInGroup) || item.edit !== 2 || !item.edit\">\n              <div class=\"dialog-list-item-text\">{{item.title}}</div>\n              <div class=\"dialog-list-icon-wrapper\" v-if=\"category && item.id ? category.id === item.id : false\">\n                <span class=\"icon-check\"></span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"dialog-btn-wrapper\" @click=\"hide\">\n          <div class=\"dialog-btn\">{{$t('shelf.cancel')}}</div>\n        </div>\n      </div>\n      <div class=\"shelf-group-dialog-wrapper\" v-if=\"newGroupDialogVisible\">\n        <div class=\"dialog-list\">\n          <div class=\"dialog-title-wrapper\">\n            <span class=\"dialog-title-text\">{{$t('shelf.newGroup')}}</span>\n          </div>\n          <div class=\"dialog-input-title-wrapper\">\n            <span class=\"dialog-input-title\">{{$t('shelf.groupName')}}</span>\n          </div>\n          <div class=\"dialog-input-wrapper\">\n            <div class=\"dialog-input-inner-wrapper\">\n              <input type=\"text\" class=\"dialog-input\" v-model=\"newGroupName\" ref=\"dialogInput\">\n              <div class=\"dialog-input-clear-wrapper\" @click=\"clear\" v-show=\"newGroupName.length > 0\">\n                <span class=\"icon-close-circle-fill\"></span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"dialog-btn-wrapper\">\n          <div class=\"dialog-btn\" @click=\"hide\">{{$t('shelf.cancel')}}</div>\n          <div class=\"dialog-btn\" @click=\"createNewGroup\" :class=\"{'is-empty': newGroupName.length === 0}\">{{$t('shelf.confirm')}}</div>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\n  export default {\n    props: {\n      visible: Boolean,\n      data: Array,\n      bookList: Array,\n      isInGroup: Boolean,\n      category: Object,\n      isEditGroupName: {\n        type: Boolean,\n        default: false\n      }\n    },\n    computed: {\n      defaultCategory() {\n        return [\n          {\n            title: this.$t('shelf.newGroup'),\n            edit: 1\n          },\n          {\n            title: this.$t('shelf.groupOut'),\n            edit: 2\n          }\n        ]\n      },\n      categoryList() {\n        const list = this.bookList ? this.bookList.filter(item => item.type === 2) : []\n        return [...this.defaultCategory, ...list]\n      }\n    },\n    data() {\n      return {\n        newGroupDialogVisible: false,\n        selectGroupDialogVisible: true,\n        newGroupName: ''\n      }\n    },\n    methods: {\n      createNewGroup() {\n        if (this.isEditGroupName) {\n          this.$emit('editGroupName', this.category, this.newGroupName)\n          this.hide()\n        } else {\n          if (this.newGroupName.length > 0) {\n            this.$emit('group', 2, {\n              id: this.bookList[this.bookList.length - 2].id + 1,\n              itemList: [],\n              selected: false,\n              title: this.newGroupName,\n              type: 2\n            })\n          }\n          this.hide()\n        }\n      },\n      clear() {\n        this.newGroupName = ''\n      },\n      onGroupClick(item) {\n        if (item.edit && item.edit === 1) {\n          // 新建分组\n          this.showCreateGroupDialog()\n        } else if (item.edit && item.edit === 2) {\n          // 移出分组\n          this.$emit('group', 3, item)\n          this.hide()\n        } else {\n          // 移入分组\n          this.$emit('group', 1, item)\n          this.hide()\n        }\n      },\n      showCreateGroupDialog() {\n        this.newGroupDialogVisible = true\n        this.selectGroupDialogVisible = false\n        this.newGroupName = ''\n        this.$nextTick(() => {\n          this.$refs.dialogInput.focus()\n        })\n      },\n      showEditGroupDialog() {\n        this.newGroupDialogVisible = true\n        this.selectGroupDialogVisible = false\n        this.newGroupName = this.category.title\n        this.$nextTick(() => {\n          this.$refs.dialogInput.focus()\n        })\n      },\n      show() {\n        this.$emit('update:visible', true)\n      },\n      hide() {\n        this.$emit('update:visible', false)\n        this.newGroupDialogVisible = false\n        this.selectGroupDialogVisible = true\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n  @import \"../../assets/styles/global\";\n\n  .shelf-group-dialog-bg {\n    position: fixed;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    z-index: 120;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, .2);\n    font-size: px2rem(16);\n    color: #333;\n    @include center;\n    .shelf-group-dialog-wrapper {\n      position: relative;\n      display: flex;\n      flex-direction: column;\n      width: 60%;\n      max-height: 80%;\n      background: white;\n      border-radius: px2rem(10);\n      .dialog-list {\n        width: 100%;\n        padding: 0 px2rem(20);\n        box-sizing: border-box;\n        @include scroll;\n        .dialog-title-wrapper {\n          font-size: px2rem(22);\n          font-weight: bold;\n          text-align: center;\n          padding: px2rem(30) 0 px2rem(20) 0;\n        }\n        .dialog-list-wrapper {\n          font-size: px2rem(14);\n          .dialog-list-item {\n            display: flex;\n            padding: px2rem(15) 0;\n            box-sizing: border-box;\n            color: #666;\n            &.is-add {\n              color: $color-blue;\n              &:active {\n                color: $color-blue-transparent;\n              }\n            }\n            &:active {\n              color: rgba(102, 102, 102, .5)\n            }\n            .dialog-list-item-text {\n              flex: 1;\n            }\n            .dialog-list-icon-wrapper {\n              flex: 0 0 px2rem(30);\n              color: $color-blue;\n              @include right;\n            }\n          }\n        }\n      }\n      .dialog-btn-wrapper {\n        display: flex;\n        width: 100%;\n        background: $color-blue;\n        font-size: px2rem(14);\n        font-weight: bold;\n        color: white;\n        text-align: center;\n        padding: px2rem(15) 0;\n        box-sizing: border-box;\n        border-radius: 0 0 px2rem(10) px2rem(10);\n        .dialog-btn {\n          flex: 1;\n          &.is-empty {\n            color: rgba(255, 255, 255, .5);\n          }\n          &:active {\n            color: rgba(255, 255, 255, .5)\n          }\n        }\n      }\n      .dialog-input-title-wrapper {\n        font-size: px2rem(10);\n        margin-top: px2rem(20);\n      }\n      .dialog-input-wrapper {\n        width: 100%;\n        padding: 0 0 px2rem(30) 0;\n        box-sizing: border-box;\n        .dialog-input-inner-wrapper {\n          display: flex;\n          width: 100%;\n          padding: px2rem(10) 0;\n          box-sizing: border-box;\n          border-bottom: px2rem(1) solid #eee;\n          font-size: px2rem(14);\n          color: #666;\n          .dialog-input {\n            flex: 1;\n            border: none;\n            &:focus {\n              outline: none;\n            }\n          }\n          .dialog-input-clear-wrapper {\n            flex: 0 0 px2rem(30);\n            color: #ccc;\n            @include center;\n            &:active {\n              color: #999;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n"],"sourceRoot":"src/components/shelf"}]}