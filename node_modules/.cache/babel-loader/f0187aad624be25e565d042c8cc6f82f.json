{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/babel-loader/lib/index.js!/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/src/components/ebook/EbookSlideContent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/src/components/ebook/EbookSlideContent.vue","mtime":1584214469920},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBzY3JvbGwgZnJvbSAiLi4vY29tbW9uL3Njcm9sbC52dWUiOwppbXBvcnQgeyBlYm9va01pbnggfSBmcm9tICIuLi8uLi91dGlscy9taXhpbi5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBtaXhpbnM6IFtlYm9va01pbnhdLAogIGNvbXBvbmVudHM6IHsKICAgIHNjcm9sbDogc2Nyb2xsCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VhcmNoVmlzaWJsZTogZmFsc2UsCiAgICAgIHNlYXJjaFRleHQ6ICIiLAogICAgICBzZWFyY2hMaXN0OiBudWxsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc2VhcmNoOiBmdW5jdGlvbiBzZWFyY2goKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5zZWFyY2hUZXh0ICYmIHRoaXMuc2VhcmNoVGV4dC5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5kb1NlYXJjaCh0aGlzLnNlYXJjaFRleHQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXMuc2VhcmNoTGlzdCA9IHJlczsKCiAgICAgICAgICBfdGhpcy5zZWFyY2hMaXN0Lm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICBpdGVtLmV4Y2VycHQgPSBpdGVtLmV4Y2VycHQucmVwbGFjZShfdGhpcy5zZWFyY2hUZXh0LCAiPHNwYW4gY2xhc3M9XCJjb250ZW50LXNlYXJjaC10ZXh0XCI+Ii5jb25jYXQoX3RoaXMuc2VhcmNoVGV4dCwgIjwvc3Bhbj4iKSk7CiAgICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBkb1NlYXJjaDogZnVuY3Rpb24gZG9TZWFyY2gocSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBQcm9taXNlLmFsbCh0aGlzLmN1cnJlbnRCb29rLnNwaW5lLnNwaW5lSXRlbXMubWFwKGZ1bmN0aW9uIChzZWN0aW9uKSB7CiAgICAgICAgcmV0dXJuIHNlY3Rpb24ubG9hZChfdGhpczIuY3VycmVudEJvb2subG9hZC5iaW5kKF90aGlzMi5jdXJyZW50Qm9vaykpLnRoZW4oc2VjdGlvbi5maW5kLmJpbmQoc2VjdGlvbiwgcSkpLmZpbmFsbHkoc2VjdGlvbi51bmxvYWQuYmluZChzZWN0aW9uKSk7CiAgICAgIH0pKS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXS5jb25jYXQuYXBwbHkoW10sIHJlc3VsdHMpKTsKICAgICAgfSk7CiAgICB9LAogICAgZGlzcGxheXNlYXJjaDogZnVuY3Rpb24gZGlzcGxheXNlYXJjaCh3LCBpKSB7CiAgICAgIGlmIChpKSB7CiAgICAgICAgdGhpcy5jdXJyZW50Qm9vay5yZW5kaXRpb24uYW5ub3RhdGlvbnMuaGlnaGxpZ2h0KHcpOwogICAgICB9CgogICAgICB0aGlzLmhpZGVUaXRsZUFuZE1lbnUoKTsKICAgIH0sCiAgICBzZWNpazogZnVuY3Rpb24gc2VjaWsoaSkgewogICAgICB0aGlzLnNldFNlY3Rpb24oaSk7CiAgICAgIHRoaXMuaGlkZVRpdGxlQW5kTWVudSgpOwogICAgfSwKICAgIHNob3dTZWFyY2hQYWdlOiBmdW5jdGlvbiBzaG93U2VhcmNoUGFnZSgpIHsKICAgICAgdGhpcy5zZWFyY2hWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBoaWRlU2VhcmNoUGFnZTogZnVuY3Rpb24gaGlkZVNlYXJjaFBhZ2UoKSB7CiAgICAgIHRoaXMuc2VhcmNoVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLnNlYXJjaFRleHQgPSAiIjsKICAgICAgdGhpcy5zZWFyY2hMaXN0ID0gbnVsbDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["EbookSlideContent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA,OAAA,MAAA,MAAA,sBAAA;AACA,SAAA,SAAA,QAAA,sBAAA;AACA,eAAA;AACA,EAAA,MAAA,EAAA,CAAA,SAAA,CADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,MAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,aAAA,EAAA,KADA;AAEA,MAAA,UAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA;AAHA,KAAA;AAKA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AAAA;;AACA,UAAA,KAAA,UAAA,IAAA,KAAA,UAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,UAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,UAAA,GAAA,GAAA;;AACA,UAAA,KAAA,CAAA,UAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,OAAA,GAAA,IAAA,CAAA,OAAA,CAAA,OAAA,CACA,KAAA,CAAA,UADA,gDAEA,KAAA,CAAA,UAFA,aAAA;AAIA,mBAAA,IAAA;AACA,WANA;AAOA,SATA;AAUA;AACA,KAdA;AAeA,IAAA,QAfA,oBAeA,CAfA,EAeA;AAAA;;AACA,aAAA,OAAA,CAAA,GAAA,CACA,KAAA,WAAA,CAAA,KAAA,CAAA,UAAA,CAAA,GAAA,CAAA,UAAA,OAAA;AAAA,eACA,OAAA,CACA,IADA,CACA,MAAA,CAAA,WAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,CAAA,WAAA,CADA,EAEA,IAFA,CAEA,OAAA,CAAA,IAAA,CAAA,IAAA,CAAA,OAAA,EAAA,CAAA,CAFA,EAGA,OAHA,CAGA,OAAA,CAAA,MAAA,CAAA,IAAA,CAAA,OAAA,CAHA,CADA;AAAA,OAAA,CADA,EAOA,IAPA,CAOA,UAAA,OAAA;AAAA,eAAA,OAAA,CAAA,OAAA,CAAA,GAAA,MAAA,CAAA,KAAA,CAAA,EAAA,EAAA,OAAA,CAAA,CAAA;AAAA,OAPA,CAAA;AAQA,KAxBA;AAyBA,IAAA,aAzBA,yBAyBA,CAzBA,EAyBA,CAzBA,EAyBA;AACA,UAAA,CAAA,EAAA;AACA,aAAA,WAAA,CAAA,SAAA,CAAA,WAAA,CAAA,SAAA,CAAA,CAAA;AACA;;AACA,WAAA,gBAAA;AACA,KA9BA;AA+BA,IAAA,KA/BA,iBA+BA,CA/BA,EA+BA;AACA,WAAA,UAAA,CAAA,CAAA;AACA,WAAA,gBAAA;AACA,KAlCA;AAmCA,IAAA,cAnCA,4BAmCA;AACA,WAAA,aAAA,GAAA,IAAA;AACA,KArCA;AAsCA,IAAA,cAtCA,4BAsCA;AACA,WAAA,aAAA,GAAA,KAAA;AACA,WAAA,UAAA,GAAA,EAAA;AACA,WAAA,UAAA,GAAA,IAAA;AACA;AA1CA;AAZA,CAAA","sourcesContent":["<template>\n  <div class=\"ebook-slide-contents\">\n    <div class=\"slide-contents-search-wrapper\">\n      <div class=\"slide-contents-search-input-wrapper\">\n        <div class=\"slide-contents-search-icon\">\n          <span class=\"icon-search\"></span>\n        </div>\n        <input\n          class=\"slide-contents-search-input\"\n          type=\"text\"\n          v-model=\"searchText\"\n          :placeholder=\"$t('book.searchHint')\"\n          @keyup.enter.exact=\"search()\"\n          @click=\"showSearchPage\"\n        />\n      </div>\n      <div\n        class=\"slide-contents-search-cancel\"\n        v-if=\"searchVisible\"\n        @click=\"hideSearchPage()\"\n      >{{$t('book.cancel')}}</div>\n    </div>\n    <div class=\"slide-contents-book-wrapper\" v-show=\"!searchVisible\">\n      <div class=\"slide-contents-book-img-wrapper\">\n        <img :src=\"cover\" alt class=\"slide-contents-book-img\" />\n      </div>\n      <div class=\"slide-contents-book-info-wrapper\">\n        <div class=\"slide-contents-book-title\">{{metadata.title}}</div>\n        <div class=\"slide-contents-book-author\">{{metadata.creator}}</div>\n      </div>\n      <div class=\"slide-contents-book-progress-wrapper\">\n        <div class=\"slide-contents-book-progress\">\n          <span class=\"progress\">{{progress + '%'}}</span>\n          <span class=\"progress-text\">{{$t('book.haveRead2')}}</span>\n        </div>\n        <div class=\"slide-contents-book-time\">{{getReadTimeText()}}</div>\n      </div>\n    </div>\n    <scroll\n      class=\"slide-contents-list\"\n      ref=\"scroll\"\n      :top=\"156\"\n      :bottom=\"48\"\n      v-show=\"!searchVisible\"\n    >\n      <div class=\"slide-contents-item\" v-for=\"(item, index) in navigation\" :key=\"index\">\n        <span\n          class=\"slide-contents-item-lable\"\n          :class=\"{'selected':section===index}\"\n          @click=\"display(item.href),secik(index)\"\n        >{{item.label}}</span>\n        <span class=\"slide-contents-item-page\"></span>\n      </div>\n    </scroll>\n    <scroll class=\"slide-search-list\" :top=\"66\" :bottom=\"48\" v-show=\"searchVisible\">\n      <div\n        class=\"slide-search-item\"\n        v-for=\"(item, index) in searchList\"\n        :key=\"index\"\n        v-html=\"item.excerpt\"\n        @click=\"display(item.cfi), displaysearch(item.cfi,true)\"\n      ></div>\n    </scroll>\n  </div>\n</template>\n\n<script>\nimport scroll from \"../common/scroll.vue\";\nimport { ebookMinx } from \"../../utils/mixin.js\";\nexport default {\n  mixins: [ebookMinx],\n  components: {\n    scroll\n  },\n  data() {\n    return {\n      searchVisible: false,\n      searchText: \"\",\n      searchList: null\n    };\n  },\n  methods: {\n    search() {\n      if (this.searchText && this.searchText.length > 0) {\n        this.doSearch(this.searchText).then(res => {\n          this.searchList = res;\n          this.searchList.map(item => {\n            item.excerpt = item.excerpt.replace(\n              this.searchText,\n              `<span class=\"content-search-text\">${this.searchText}</span>`\n            );\n            return item;\n          });\n        });\n      }\n    },\n    doSearch(q) {\n      return Promise.all(\n        this.currentBook.spine.spineItems.map(section =>\n          section\n            .load(this.currentBook.load.bind(this.currentBook))\n            .then(section.find.bind(section, q))\n            .finally(section.unload.bind(section))\n        )\n      ).then(results => Promise.resolve([].concat.apply([], results)));\n    },\n    displaysearch(w, i) {\n      if (i) {\n        this.currentBook.rendition.annotations.highlight(w);\n      }\n      this.hideTitleAndMenu();\n    },\n    secik(i) {\n      this.setSection(i);\n      this.hideTitleAndMenu();\n    },\n    showSearchPage() {\n      this.searchVisible = true;\n    },\n    hideSearchPage() {\n      this.searchVisible = false;\n      this.searchText = \"\";\n      this.searchList = null;\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../assets/styles/global.scss\";\n.selected {\n  font-weight: bold;\n  color: aliceblue;\n}\n.ebook-slide-contents {\n  width: 100%;\n  font-size: 0;\n  .slide-contents-search-wrapper {\n    display: flex;\n    width: 100%;\n    height: px2rem(36);\n    margin: px2rem(20) 0 px2rem(10) 0;\n    padding: 0 px2rem(15);\n    box-sizing: border-box;\n    .slide-contents-search-input-wrapper {\n      flex: 1;\n      @include center;\n      .slide-contents-search-icon {\n        flex: 0 0 px2rem(28);\n        font-size: px2rem(12);\n        @include center;\n      }\n      .slide-contents-search-input {\n        flex: 1;\n        width: 100%;\n        height: px2rem(32);\n        font-size: px2rem(14);\n        background: transparent;\n        border: none;\n        &:focus {\n          outline: none;\n        }\n      }\n    }\n    .slide-contents-search-cancel {\n      flex: 0 0 px2rem(50);\n      font-size: px2rem(14);\n      @include right;\n    }\n  }\n  .slide-contents-book-wrapper {\n    display: flex;\n    width: 100%;\n    height: px2rem(90);\n    padding: px2rem(10) px2rem(15) px2rem(20) px2rem(15);\n    box-sizing: border-box;\n    .slide-contents-book-img-wrapper {\n      flex: 0 0 px2rem(45);\n      .slide-contents-book-img {\n        width: px2rem(45);\n        height: px2rem(60);\n      }\n    }\n    .slide-contents-book-info-wrapper {\n      flex: 1;\n      padding: 0 px2rem(10);\n      box-sizing: border-box;\n      .slide-contents-book-title {\n        width: px2rem(153.75);\n        font-size: px2rem(14);\n        @include ellipsis2(2);\n      }\n      .slide-contents-book-author {\n        margin-top: px2rem(5);\n        width: px2rem(153.75);\n        font-size: px2rem(12);\n        @include textSmall;\n      }\n    }\n    .slide-contents-book-progress-wrapper {\n      flex: 0 0 px2rem(70);\n      .slide-contents-book-progress {\n        .progress {\n          font-size: px2rem(14);\n        }\n        .progress-text {\n          font-size: px2rem(12);\n        }\n      }\n      .slide-contents-book-time {\n        font-size: px2rem(12);\n        margin-top: px2rem(5);\n      }\n    }\n  }\n  .slide-contents-list {\n    padding: 0 px2rem(15);\n    box-sizing: border-box;\n    .slide-contents-item {\n      padding: px2rem(20) 0;\n      box-sizing: border-box;\n      display: flex;\n      .slide-contents-item-lable {\n        flex: 1;\n        font-size: px2rem(14);\n        line-height: px2rem(16);\n        @include textSmall;\n      }\n      .slide-contents-item-page {\n      }\n    }\n  }\n  .slide-search-list {\n    width: 100%;\n    padding: 0 px2rem(15);\n    box-sizing: border-box;\n    .slide-search-item {\n      font-size: px2rem(14);\n      line-height: px2rem(16);\n      padding: px2rem(20) 0;\n      box-sizing: border-box;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/components/ebook"}]}