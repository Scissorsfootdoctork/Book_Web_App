{"remainingRequest":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/babel-loader/lib/index.js!/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/eslint-loader/index.js??ref--13-0!/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/src/api/store.js","dependencies":[{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/src/api/store.js","mtime":1590510580098},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgc2V0TG9jYWxGb3JhZ2UgfSBmcm9tICcuLi91dGlscy9sb2NhbEZvcmFnZSc7CmV4cG9ydCBmdW5jdGlvbiBob21lKCkgewogIHJldHVybiBheGlvcyh7CiAgICBtZXRob2Q6ICdnZXQnLAogICAgdXJsOiAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX1VSTCwgIi9ib29rL2hvbWUiKQogIH0pOwp9CmV4cG9ydCBmdW5jdGlvbiBkZXRhaWwoYm9vaykgewogIHJldHVybiBheGlvcyh7CiAgICBtZXRob2Q6ICdnZXQnLAogICAgdXJsOiAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9CT09LX1VSTCwgIi9ib29rL2RldGFpbCIpLAogICAgcGFyYW1zOiB7CiAgICAgIGZpbGVOYW1lOiBib29rCiAgICB9CiAgfSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGxpc3QoKSB7CiAgcmV0dXJuIGF4aW9zKHsKICAgIG1ldGhvZDogJ2dldCcsCiAgICB1cmw6ICIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfVVJMLCAiL2Jvb2svbGlzdCIpCiAgfSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIHNoZWxmKCkgewogIHJldHVybiBheGlvcyh7CiAgICBtZXRob2Q6ICdnZXQnLAogICAgdXJsOiAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX1VSTCwgIi9ib29rL3NoZWxmIikKICB9KTsKfQpleHBvcnQgZnVuY3Rpb24gZG93bmxvYWQoYm9vaywgb25TdWNlc3MsIG9uRXJyb3IsIG9uUHJvZ3Jlc3MpIHsKICBpZiAob25Qcm9ncmVzcyA9PSBudWxsKSB7CiAgICBvblByb2dyZXNzID0gb25FcnJvcjsKICAgIG9uRXJyb3IgPSBudWxsOwogIH0KCiAgcmV0dXJuIGF4aW9zLmNyZWF0ZSh7CiAgICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0VQVUJfVVJMLAogICAgbWV0aG9kOiAnZ2V0JywKICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InLAogICAgdGltZW91dDogMTgwICogMTAwMCwKICAgIG9uRG93bmxvYWRQcm9ncmVzczogZnVuY3Rpb24gb25Eb3dubG9hZFByb2dyZXNzKHByb2dyZXNzRXZlbnQpIHsKICAgICAgaWYgKG9uUHJvZ3Jlc3MpIG9uUHJvZ3Jlc3MocHJvZ3Jlc3NFdmVudCk7CiAgICB9CiAgfSkuZ2V0KCIiLmNvbmNhdChib29rLmNhdGVnb3J5VGV4dCwgIi8iKS5jb25jYXQoYm9vay5maWxlTmFtZSwgIi5lcHViIikpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbcmVzLmRhdGFdKTsKICAgIHNldExvY2FsRm9yYWdlKGJvb2suZmlsZU5hbWUsIGJsb2IsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIG9uU3VjZXNzKGJvb2spOwogICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICByZXR1cm4gb25FcnJvcihlcnIpOwogICAgfSk7CiAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgaWYgKG9uRXJyb3IpIG9uRXJyb3IoZXJyKTsKICB9KTsKfQ=="},{"version":3,"sources":["/Users/kscissorfootdoctor/Desktop/Mine-Project/Book_Web_App/src/api/store.js"],"names":["axios","setLocalForage","home","method","url","process","env","VUE_APP_BASE_URL","detail","book","VUE_APP_BOOK_URL","params","fileName","list","shelf","download","onSucess","onError","onProgress","create","baseURL","VUE_APP_EPUB_URL","responseType","timeout","onDownloadProgress","progressEvent","get","categoryText","then","res","blob","Blob","data","err","catch"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,QAA+B,sBAA/B;AAEA,OAAO,SAASC,IAAT,GAAgB;AACnB,SAAOF,KAAK,CAAC;AACTG,IAAAA,MAAM,EAAE,KADC;AAETC,IAAAA,GAAG,YAAKC,OAAO,CAACC,GAAR,CAAYC,gBAAjB;AAFM,GAAD,CAAZ;AAIH;AAED,OAAO,SAASC,MAAT,CAAgBC,IAAhB,EAAsB;AACzB,SAAOT,KAAK,CAAC;AACTG,IAAAA,MAAM,EAAE,KADC;AAETC,IAAAA,GAAG,YAAKC,OAAO,CAACC,GAAR,CAAYI,gBAAjB,iBAFM;AAGTC,IAAAA,MAAM,EAAE;AACJC,MAAAA,QAAQ,EAAEH;AADN;AAHC,GAAD,CAAZ;AAOH;AAED,OAAO,SAASI,IAAT,GAAgB;AACnB,SAAOb,KAAK,CAAC;AACTG,IAAAA,MAAM,EAAE,KADC;AAETC,IAAAA,GAAG,YAAKC,OAAO,CAACC,GAAR,CAAYC,gBAAjB;AAFM,GAAD,CAAZ;AAIH;AAED,OAAO,SAASO,KAAT,GAAiB;AACpB,SAAOd,KAAK,CAAC;AACTG,IAAAA,MAAM,EAAE,KADC;AAETC,IAAAA,GAAG,YAAKC,OAAO,CAACC,GAAR,CAAYC,gBAAjB;AAFM,GAAD,CAAZ;AAIH;AAED,OAAO,SAASQ,QAAT,CAAkBN,IAAlB,EAAwBO,QAAxB,EAAkCC,OAAlC,EAA2CC,UAA3C,EAAuD;AAC1D,MAAIA,UAAU,IAAI,IAAlB,EAAwB;AACpBA,IAAAA,UAAU,GAAGD,OAAb;AACAA,IAAAA,OAAO,GAAG,IAAV;AACH;;AACD,SAAOjB,KAAK,CAACmB,MAAN,CAAa;AAChBC,IAAAA,OAAO,EAAEf,OAAO,CAACC,GAAR,CAAYe,gBADL;AAEhBlB,IAAAA,MAAM,EAAE,KAFQ;AAGhBmB,IAAAA,YAAY,EAAE,MAHE;AAIhBC,IAAAA,OAAO,EAAE,MAAM,IAJC;AAKhBC,IAAAA,kBAAkB,EAAE,4BAAAC,aAAa,EAAI;AACjC,UAAIP,UAAJ,EAAgBA,UAAU,CAACO,aAAD,CAAV;AACnB;AAPe,GAAb,EAQJC,GARI,WAQGjB,IAAI,CAACkB,YARR,cAQwBlB,IAAI,CAACG,QAR7B,YAQ8CgB,IAR9C,CAQmD,UAAAC,GAAG,EAAI;AAC7D,QAAMC,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACF,GAAG,CAACG,IAAL,CAAT,CAAb;AACA/B,IAAAA,cAAc,CAACQ,IAAI,CAACG,QAAN,EAAgBkB,IAAhB,EACR;AAAA,aAAMd,QAAQ,CAACP,IAAD,CAAd;AAAA,KADQ,EAER,UAAAwB,GAAG;AAAA,aAAIhB,OAAO,CAACgB,GAAD,CAAX;AAAA,KAFK,CAAd;AAGH,GAbM,EAaJC,KAbI,CAaE,UAAAD,GAAG,EAAI;AACZ,QAAIhB,OAAJ,EAAaA,OAAO,CAACgB,GAAD,CAAP;AAChB,GAfM,CAAP;AAgBH","sourcesContent":["import axios from 'axios'\nimport { setLocalForage } from '../utils/localForage'\n\nexport function home() {\n    return axios({\n        method: 'get',\n        url: `${process.env.VUE_APP_BASE_URL}/book/home`\n    })\n}\n\nexport function detail(book) {\n    return axios({\n        method: 'get',\n        url: `${process.env.VUE_APP_BOOK_URL}/book/detail`,\n        params: {\n            fileName: book\n        }\n    })\n}\n\nexport function list() {\n    return axios({\n        method: 'get',\n        url: `${process.env.VUE_APP_BASE_URL}/book/list`\n    })\n}\n\nexport function shelf() {\n    return axios({\n        method: 'get',\n        url: `${process.env.VUE_APP_BASE_URL}/book/shelf`\n    })\n}\n\nexport function download(book, onSucess, onError, onProgress) {\n    if (onProgress == null) {\n        onProgress = onError\n        onError = null\n    }\n    return axios.create({\n        baseURL: process.env.VUE_APP_EPUB_URL,\n        method: 'get',\n        responseType: 'blob',\n        timeout: 180 * 1000,\n        onDownloadProgress: progressEvent => {\n            if (onProgress) onProgress(progressEvent)\n        }\n    }).get(`${book.categoryText}/${book.fileName}.epub`).then(res => {\n        const blob = new Blob([res.data])\n        setLocalForage(book.fileName, blob,\n              () => onSucess(book),\n              err => onError(err))\n    }).catch(err => {\n        if (onError) onError(err)\n    })\n}\n"]}]}